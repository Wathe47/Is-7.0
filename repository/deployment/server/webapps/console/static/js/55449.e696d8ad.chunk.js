"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[55449],{55449:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var i=n(24184),a=n(93129),c=n(3356),r=n(86727),l=n(44194),o=n(10479),s=n(47245),d=n(89141),u=n(12638),m=n(41193),f=n(62508),p=n(35542),g=n(24393),E=n(84870),h=n(16645),y=n(45481),v=n(43227);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,c,r,l=[],o=!0,s=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(i=c.call(n)).done)&&(l.push(i.value),l.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{if(!o&&null!=n.return&&(r=n.return(),Object(r)!==r))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Z=function(e){var t,n=e.attributeType,y=e.attributeUri,C=e.mappedLocalClaims,Z=e.updateMappedClaims,A=e["data-testid"],R=e.id,S=b((0,l.useState)(null),2),w=S[0],D=S[1],U=b((0,l.useState)(void 0),2),I=U[0],T=U[1],M=b((0,l.useState)(!0),2),_=M[0],x=M[1],L=b((0,l.useState)(!1),2),O=L[0],k=L[1],V=(0,s.I0)(),j=(0,o.$)().t,Q=(0,s.v9)((function(e){return e.config.ui.features})),H=function(e){(0,p.vR)(null!=e?e:R).then((function(e){D(e)})).catch((function(e){V((0,c.V_)({description:(null==e?void 0:e.description)||j("claims:dialects.notifications.fetchADialect.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||j("claims:dialects.notifications.fetchADialect.genericError.message")}))}))};(0,l.useEffect)((function(){R&&H()}),[R]);var P=function(e,t,i,r){R&&x(!0),R&&T(void 0),R&&(0,p.gR)(R,{filter:r,limit:e,offset:t,sort:i}).then((function(e){var t=E.attributeConfig.attributeMappings.getExternalAttributes(n,e);T((0,g.fS)(t,"claimURI",!0))})).catch((function(e){var t,i;V((0,c.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||j("claims:dialects.notifications.fetchExternalClaims.genericError.description",{type:(0,v.i)(n)}),level:a.QU.ERROR,message:(null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.message)||j("claims:dialects.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){x(!1)}))};(0,l.useEffect)((function(){P()}),[R]);var $=function(e){(0,p.Nx)(e).then((function(){g.m8.push(g.$x.getPaths().get("CLAIM_DIALECTS")),V((0,c.V_)({description:j("claims:dialects.notifications.deleteDialect.success.description",{type:(0,v.i)(n,!0)}),level:a.QU.SUCCESS,message:j("claims:dialects.notifications.deleteDialect.success.message")}))})).catch((function(e){V((0,c.V_)({description:(null==e?void 0:e.description)||j("claims:dialects.notifications.deleteDialect.genericError.description",{type:(0,v.i)(n,!0)}),level:a.QU.ERROR,message:(null==e?void 0:e.message)||j("claims:dialects.notifications.deleteDialect.genericError.message")}))}))};return l.createElement(l.Fragment,null,E.attributeConfig.attributeMappings.editAttributeMappingDetails&&l.createElement(l.Fragment,null,l.createElement(d.Z,null,l.createElement(d.Z.Row,{columns:1},l.createElement(d.Z.Column,{width:16},l.createElement(u.Z,{as:"h4"},j("claims:dialects.pageLayout.edit.updateDialectURI",{type:(0,v.i)(n,!0)})),l.createElement(r.pJ,null,_?l.createElement(m.Z,null,l.createElement(m.Z.Line,{length:"short"}),l.createElement(m.Z.Line,{length:"medium"})):l.createElement(h.T8,{dialect:w,"data-testid":"".concat(A,"-edit-dialect-details"),attributeType:n,onUpdate:function(e){H(e)}}))))),l.createElement(f.Z,{hidden:!0}),l.createElement(d.Z,{columns:1},l.createElement(d.Z.Column,{width:16},l.createElement(u.Z,{as:"h4"},j("claims:dialects.pageLayout.edit.updateExternalAttributes",{type:(0,v.i)(n,!0)})))),l.createElement(f.Z,{hidden:!0}),l.createElement(f.Z,{hidden:!0})),l.createElement(h._v,{dialectID:R,isLoading:_,claims:I,update:P,"data-testid":"".concat(A,"-edit-external-claims"),attributeType:n,attributeUri:y,mappedLocalClaims:C,updateMappedClaims:Z}),l.createElement(f.Z,{hidden:!0}),E.attributeConfig.attributeMappings.showDangerZone&&l.createElement(d.Z,null,l.createElement(d.Z.Row,{columns:1},l.createElement(d.Z.Column,{width:16},l.createElement(i.di,{when:null==Q||null===(t=Q.oidcScopes)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.delete},l.createElement(r.v9,{sectionHeader:j("common:dangerZone"),"data-testid":"".concat(A,"-danger-zone-group")},l.createElement(r.cN,{actionTitle:j("claims:dialects.dangerZone.actionTitle",{type:(0,v.i)(n,!0,!0)}),header:j("claims:dialects.dangerZone.header",{type:(0,v.i)(n,!0)}),subheader:j("claims:dialects.dangerZone.subheader",{type:(0,v.i)(n)}),onActionClick:function(){return k(!0)},"data-testid":"".concat(A,"-dialect-delete-danger-zone")})))))),E.attributeConfig.attributeMappings.showDangerZone&&O&&l.createElement(r.cV,{onClose:function(){return k(!1)},type:"negative",open:O,assertion:w.dialectURI,assertionHint:l.createElement("p",null,"Please type ",l.createElement("strong",null,w.dialectURI)," to confirm."),assertionType:"input",primaryAction:j("claims:dialects.confirmations.action"),secondaryAction:j("common:cancel"),onSecondaryActionClick:function(){return k(!1)},onPrimaryActionClick:function(){return $(w.id)},"data-testid":"".concat(A,"-delete-confirmation-modal"),closeOnDimmerClick:!1},l.createElement(r.cV.Header,{"data-testid":"".concat(A,"-delete-confirmation-modal-header")},j("claims:dialects.confirmations.header")),l.createElement(r.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(A,"-delete-confirmation-modal-message")},j("claims:dialects.confirmations.message")),l.createElement(r.cV.Content,{"data-testid":"".concat(A,"-delete-confirmation-modal-content")},j("claims:dialects.confirmations.content",{type:(0,v.i)(n)}))))};Z.defaultProps={attributeType:y.Q.OTHERS,"data-testid":"external-dialect-edit"};const A=Z}}]);