"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[66966],{66966:(e,t,n)=>{n.d(t,{X:()=>ae,I:()=>y});var i=n(24184),r=n(54833),a=n(86727),o=n(44194),l=n(10479),c=n(47245),d=n(26154),u=n(12638),s=n(24393),m=n(43970),f=n(58143);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var y=function(e){var t=e.defaultListItemLimit,n=e.isLoading,v=e.idvpList,y=e.idvpTemplateTypeList,b=e.onEmptyListPlaceholderActionClick,h=e.onIdentityVerificationProviderDelete,g=e.onListItemClick,E=e.selection,S=e.showListItemActions,A=e["data-componentid"],I=p((0,o.useState)(!1),2),C=I[0],w=I[1],P=p((0,o.useState)(void 0),2),D=P[0],L=P[1],T=p((0,o.useState)(!1),2),V=T[0],O=T[1],M=(0,l.$)().t,Z=(0,c.v9)((function(e){return e.config.ui.features})),j=(0,c.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),k=function(e){s.m8.push(s.$x.getPaths().get("IDVP_EDIT").replace(":id",e))},N=function(){var e;return 0===(null==v?void 0:v.totalResults)?o.createElement(a.$J,{className:"list-placeholder",action:b&&o.createElement(i.di,{when:null==Z||null===(e=Z.identityVerificationProviders)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},o.createElement(a.KM,{onClick:b},o.createElement(d.Z,{name:"add"}),M("idvp:buttons.addIDVP"))),image:(0,s.jF)().newList,imageSize:"tiny",subtitle:[M("idvp:placeholders.emptyIDVPList.subtitles.0")],"data-testid":"".concat(A,"-empty-placeholder")}):null};return o.createElement(o.Fragment,null,o.createElement(a.wQ,{className:"identity-providers-table",isLoading:n,loadingStateOptions:{count:null!=t?t:s.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:function(){if(S)return[{"data-componentid":"".concat(A,"-item-edit-button"),hidden:function(){return!1},icon:function(){var e;return(0,r.Xr)(null==Z?void 0:Z.identityVerificationProviders,null==Z||null===(e=Z.identityVerificationProviders)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,j)?"pencil alternate":"eye"},onClick:function(e,t){k(t.id)},popupText:function(){var e,t=(0,r.Xr)(null==Z?void 0:Z.identityVerificationProviders,null==Z||null===(e=Z.identityVerificationProviders)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,j);return M(t?"common:edit":"common:view")},renderer:"semantic-icon"},{"data-componentid":"".concat(A,"-item-delete-button"),hidden:function(){var e;return!(0,r.Xr)(null==Z?void 0:Z.identityVerificationProviders,null==Z||null===(e=Z.identityVerificationProviders)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.delete,j)},icon:function(){return"trash alternate"},onClick:function(e,t){var n,i;n=t.id,i=v.identityVerificationProviders.find((function(e){return e.id===n})),L(i),w(!0)},popupText:function(){return M("common:delete")},renderer:"semantic-icon"}]}(),columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t=null==y?void 0:y.find((function(t){return t.id===e.Type}));return o.createElement(u.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(A,"-item-heading")},null!=t&&t.image?o.createElement(a.JT,{size:"mini",name:e.Name,image:t.image,spaced:"right","data-testid":"".concat(A,"-item-image")}):o.createElement(a.JT,{image:o.createElement(a.Xo,{name:e.Name,size:"mini","data-testid":"".concat(A,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(A,"-item-image")}),o.createElement(u.Z.Content,null,e.Name,o.createElement(u.Z.Subheader,{"data-testid":"".concat(A,"-item-sub-heading")},e.description)))},title:M("idvp:list.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:M("idvp:list.actions")}],data:null==v?void 0:v.identityVerificationProviders,onRowClick:function(e,t){k(t.id),g&&g(e,t)},placeholders:N(),selectable:E,showHeader:!1,transparent:!n&&null!==N(),"data-testid":A}),D&&o.createElement(a.cV,{primaryActionLoading:V,onClose:function(){return w(!1)},type:"negative",open:C,assertion:null==D?void 0:D.Name,assertionHint:M("idvp:confirmations.deleteIDVP.assertionHint"),assertionType:"checkbox",primaryAction:M("common:confirm"),secondaryAction:M("common:cancel"),onSecondaryActionClick:function(){return w(!1)},onPrimaryActionClick:function(){return e=D.id,O(!0),void(0,m.cV)(e).then(f.Dj).catch((function(e){(0,f.d_)(e)})).finally((function(){O(!1),w(!1),L(void 0),h()}));var e},"data-componentid":"".concat(A,"-delete-confirmation-modal"),closeOnDimmerClick:!1},o.createElement(a.cV.Header,{"data-componentid":"".concat(A,"-delete-confirmation-modal-header")},M("idvp:confirmations.deleteIDVP.header")),o.createElement(a.cV.Message,{attached:!0,negative:!0,"data-componentid":"".concat(A,"-delete-confirmation-modal-message")},M("idvp:confirmations.deleteIDVP.message")),o.createElement(a.cV.Content,{"data-componentid":"".concat(A,"-delete-confirmation-modal-content")},M("idvp:confirmations.deleteIDVP.content"))))};y.defaultProps={"data-componentid":"idvp-list",selection:!0,showListItemActions:!0};var b=n(93129),h=n(3356),g=n(67127),E=n(89141),S=n(62508),A=n(10909),I=n(20812),C=n(19980),w=n(47018),P=n(44661),D=n(40807),L=n(69879);function T(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return l}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Z=function(e){var t=e.attributeList,n=e.alreadyMappedAttributesList,i=e.show,r=e.onClose,c=e.onSave,d=V((0,o.useState)([]),2),u=d[0],s=d[1],m=V((0,o.useState)([]),2),f=m[0],p=m[1],v=V((0,o.useState)(!1),2),y=v[0],b=v[1],h=V((0,o.useState)(),2),g=h[0],A=h[1],I=(0,l.$)().t;(0,o.useEffect)((function(){p(T(t)),A(T(n))}),[]),(0,o.useEffect)((function(){b(0===u.length)}),[u]);return o.createElement(w.Z,{open:i,onClose:r,dimmer:"blurring",size:"small",closeOnDimmerClick:!1},o.createElement(w.Z.Header,null,I("idvp:forms.attributeSettings.attributeSelectionModal.header")),o.createElement(w.Z.Content,{scrolling:!0,className:"edit-attribute-mapping"},o.createElement(E.Z,{className:"ui form"},o.createElement(E.Z.Row,{columns:1},o.createElement(E.Z.Column,{width:16},o.createElement(P.f,{availableAttributeList:f,alreadyMappedAttributesList:g,onSubmit:function(e){var t=[].concat(T(u),[e]),n=t.reduce((function(e,t){return e.add(t.localClaim.id)}),new Set);s(t),p(T(f.filter((function(e){var t=e.id;return!n.has(t)})))),A([].concat(T(g),[e]))}})),o.createElement(E.Z.Column,{width:16},y?(0,L.l)():o.createElement(o.Fragment,null,o.createElement(S.Z,{hidden:!0}),o.createElement(D.Y,{key:"attribute-mapping-working-list",alreadyMappedAttributesList:g,onMappingDeleted:function(e){var t=u.filter((function(t){return t.localClaim.id!==e.localClaim.id}));s(T(t)),p([].concat(T(f),[e.localClaim])),A(T(g.filter((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.id)===(null==e?void 0:e.localClaim.id)}))))},onMappingEdited:function(e,t){s([].concat(T(u.filter((function(t){return t.localClaim.id!==e.localClaim.id}))),[t])),A([].concat(T(g.filter((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.id)===(null==e?void 0:e.localClaim.id)}))),[t]))},attributeMappingsListToShow:u,availableAttributesList:f})))))),o.createElement(w.Z.Actions,null,o.createElement(a.Qj,{onClick:r},I("common:cancel")),o.createElement(a.KM,{disabled:0===(null==u?void 0:u.length),onClick:function(){return c(T(u))}},I("common:save"))))};Z.defaultProps={"data-componentid":"add-attribute-modal"};var j=n(71490);function k(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return l}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var G=function(e){var t=e.initialClaims,n=e.mappedAttributesList,i=e.setMappedAttributes,r=e.hideIdentityClaimAttributes,c=e.isReadOnly,u=e["data-componentid"],m=N((0,o.useState)([]),2),f=m[0],p=m[1],v=N((0,o.useState)(!0),2),y=v[0],b=v[1],h=N((0,o.useState)(!1),2),A=h[0],w=h[1],P=N((0,o.useState)(void 0),2),L=P[0],T=P[1],V=N((0,o.useState)([]),2),O=V[0],M=V[1],_=(0,l.$)().t;(0,o.useEffect)((function(){(0,j.ep)(r,p,b)}),[]),(0,o.useEffect)((function(){var e,t=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=R(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}(n);try{for(i.s();!(e=i.n()).done;){var r=e.value;t.push(r.localClaim.id)}}catch(a){i.e(a)}finally{i.f()}M(t)}),[f]),(0,o.useEffect)((function(){(0,g.Z)(f)||G()}),[f]);var G=function(){t&&(t.forEach((function(e){e.localClaim=f.find((function(t){return t.uri===e.localClaim.uri}))})),i(t))},x=function(){return k(f.filter((function(e){return!O.includes(e.id)})))},U=function(e){i(k(null==n?void 0:n.filter((function(t){var n,i;return(null===(n=t.localClaim)||void 0===n?void 0:n.id)!==(null===(i=e.localClaim)||void 0===i?void 0:i.id)}))))},$=function(e,t){i([].concat(k(n.filter((function(t){var n,i;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.id)!==(null===(i=e.localClaim)||void 0===i?void 0:i.id)}))),[t]))};return y?o.createElement(a.pO,null):o.createElement(E.Z,null,o.createElement(E.Z.Row,{columns:1},o.createElement(E.Z.Column,{computer:16,tablet:16,largeScreen:16,widescreen:16},o.createElement(a.X6,{as:"h4"},_("idvp:forms.attributeSettings.attributeMapping.heading")),o.createElement(a.kW,{compact:!0},_("idvp:forms.attributeSettings.attributeMapping.hint")),o.createElement(S.Z,{hidden:!0}),n&&n.length>0?o.createElement(C.Z,null,o.createElement(E.Z,null,o.createElement(E.Z.Row,{columns:2},o.createElement(E.Z.Column,{width:c?16:7},o.createElement(I.l0,{id:"idvp-attribute-selection-form",onSubmit:function(){return{}},uncontrolledForm:!1},o.createElement(I.gN.Input,{icon:"search",iconPosition:"left",inputType:"default",maxLength:120,minLength:1,width:16,placeholder:"Search mapped attribute",listen:function(e){return T(e)},ariaLabel:"Search Field",name:"searchQuery"}))),o.createElement(E.Z.Column,{width:9,textAlign:"right"},!c&&o.createElement(a.KM,{onClick:function(e){e.preventDefault(),w(!0)},"data-componentid":"".concat(u,"-list-layout-add-button")},o.createElement(d.Z,{name:"add"}),_("idvp:forms.attributeSettings.attributeMapping.addButton")))),o.createElement(E.Z.Row,{columns:1},o.createElement(E.Z.Column,{width:16},o.createElement(D.Y,{alreadyMappedAttributesList:k(n),attributeMappingsListToShow:n.filter((function(e){var t;return!L||e.idvpClaim.startsWith(L)||(null===(t=e.localClaim)||void 0===t?void 0:t.id.startsWith(L))})),noDataPlaceholder:o.createElement(a.$J,{action:o.createElement(a.Qj,{onClick:function(){return T(void 0)}},_("console:manage.placeholders.emptySearchResult.action")),image:(0,s.jF)().emptySearch,imageSize:"tiny",title:_("console:manage.placeholders.emptySearchResult.title"),subtitle:[_("console:manage.placeholders.emptySearchResult.subtitles.0",{query:L}),_("console:manage.placeholders.emptySearchResult.subtitles.1")],"data-componentid":"".concat(u,"-empty-search-placeholder")}),availableAttributesList:x(),onMappingDeleted:U,onMappingEdited:$,readOnly:c}))))):o.createElement(C.Z,{"data-componentid":u},o.createElement(a.$J,{title:_("idvp:forms.attributeSettings.attributeMapping.emptyPlaceholderEdit.title"),subtitle:[o.createElement("p",{key:"no-attributes-configured"},_("idvp:forms.attributeSettings.attributeMapping.emptyPlaceholderEdit.subtitle"))],action:!c&&o.createElement(a.KM,{onClick:function(e){e.preventDefault(),w(!0)}},o.createElement(d.Z,{name:"add"}),_("idvp:forms.attributeSettings.attributeMapping.addButton")),image:(0,s.jF)().emptyList,imageSize:"tiny","data-componentid":"".concat(u,"-empty-placeholder")})))),A&&o.createElement(Z,{attributeList:x(),alreadyMappedAttributesList:k(n),show:A,onClose:function(){w(!1)},onSave:function(e){i([].concat(k(n),k(e))),w(!1)}}))};function x(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return l}}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}G.defaultProps={"data-componentid":"idvp-attributes-selection"};var H=function(e){var t,n=e.idvp,r=e.initialClaims,d=e.isLoading,u=e.onUpdate,s=e.hideIdentityClaimAttributes,m=e.isReadOnly,p=e.loader,v=e["data-componentid"],y=(0,c.I0)(),I=(0,l.$)().t,C=(0,c.v9)((function(e){return e.config.ui.features})),w=U((0,o.useState)([]),2),P=w[0],D=w[1],L=U((0,o.useState)(!1),2),T=L[0],V=L[1];return d?o.createElement(p,null):o.createElement(a.pJ,{padded:"very"},o.createElement(E.Z,{className:"attributes-settings"},o.createElement("div",{className:"form-container with-max-width"},o.createElement(E.Z.Row,{columns:1},o.createElement(E.Z.Column,null,o.createElement(G,{initialClaims:r,setMappedAttributes:D,hideIdentityClaimAttributes:s,mappedAttributesList:x(P),isReadOnly:m}))),o.createElement(S.Z,{hidden:!0}),o.createElement(E.Z.Row,null,o.createElement(E.Z.Column,null,o.createElement(i.di,{when:null==C||null===(t=C.identityVerificationProviders)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update},o.createElement(A.Z,{primary:!0,size:"small",loading:T,disabled:T,onClick:function(){n.claims=P.map((function(e){return{idvpClaim:e.idvpClaim,localClaim:e.localClaim.uri}})),(0,g.Z)(null==P?void 0:P.filter((function(e){return(0,g.Z)(e.idvpClaim)})))?(0,f.i2)(n,V,u):y((0,h.V_)({description:I("idvp:notifications.submitAttributeSettings.error.description"),level:b.QU.WARNING,message:I("idvp:notifications.submitAttributeSettings.error.message")}))},"data-componentid":"".concat(v,"-update-button")},I("common:update"))))))))};H.defaultProps={"data-componentid":"idvp-edit-attribute-settings",hideIdentityClaimAttributes:!0};var z=n(52988),B="idvp-general-settings-form",J=function(e){var t=e.onSubmit,n=e.identityVerificationProvider,i=e.isReadOnly,r=e.isSubmitting,c=e["data-componentid"],d=(0,l.$)().t,u=(0,m.Yy)().data,s=function(e){var n,i;t({Name:null===(n=e.name)||void 0===n?void 0:n.toString(),description:null===(i=e.description)||void 0===i?void 0:i.toString()})};return o.createElement(o.Fragment,null,o.createElement(a.pJ,{padded:"very"},o.createElement(I.l0,{id:B,uncontrolledForm:!1,onSubmit:function(e){s(e)},"data-componentid":c},o.createElement(I.gN.Input,{ariaLabel:"name",inputType:"resource_name",name:"name",label:d("idvp:forms.generalDetails.name.label"),required:!0,message:d("idvp:forms.generalDetails.name.validations.empty"),placeholder:d("idvp:forms.generalDetails.name.placeholder"),validation:function(e){return(0,f.w)(e,u.identityVerificationProviders,n)},value:n.Name,maxLength:z.G.IDVP_NAME_MAX_LENGTH,minLength:z.G.IDVP_NAME_MIN_LENGTH,"data-componentid":"".concat(c,"-idp-name"),hint:d("idvp:forms.generalDetails.name.hint"),readOnly:i}),o.createElement(I.gN.Textarea,{name:"description",ariaLabel:"description",label:d("idvp:forms.generalDetails.description.label"),required:!1,placeholder:d("idvp:forms.generalDetails.description.placeholder"),value:n.description,"data-componentid":"".concat(c,"-idp-description"),maxLength:z.G.IDVP_DESCRIPTION_MAX_LENGTH,minLength:z.G.IDVP_DESCRIPTION_MIN_LENGTH,hint:d("idvp:forms.generalDetails.description.hint"),readOnly:i}),!i&&o.createElement(I.gN.Button,{form:B,ariaLabel:"Update General Details",size:"small",buttonType:"primary_btn",label:d("common:update"),name:"submit",disabled:r,loading:r}))))};J.defaultProps={"data-componentid":"idvp-edit-general-settings-form"};var X=n(73534),Q="idvp-config-settings-form",q=function(e){var t=e.onSubmit,n=e.identityVerificationProvider,i=e.isReadOnly,r=e.isSubmitting,c=e.uiMetaData,d=e["data-componentid"],u=(0,l.$)().t;return o.createElement(o.Fragment,null,o.createElement(a.pJ,{padded:"very"},o.createElement(I.l0,{id:Q,uncontrolledForm:!0,onSubmit:function(e){return t(e)},"data-componentid":d},(0,X.A)(c,n,i,!0),!i&&o.createElement(I.gN.Button,{form:Q,ariaLabel:"Update General Details",size:"small",buttonType:"primary_btn",label:u("common:update"),name:"submit",disabled:r,loading:r}))))};function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}q.defaultProps={"data-componentid":"idvp-edit-config-settings-form"};var Y=function(e){var t=e.idvp,n=e.isLoading,i=e.onUpdate,r=e.isReadOnly,a=e.uiMetaData,l=e.loader,c=e["data-componentid"],d=K((0,o.useState)(!1),2),u=d[0],s=d[1];return n?o.createElement(l,null):o.createElement(o.Fragment,null,o.createElement(q,{identityVerificationProvider:t,onSubmit:function(e){var n=function(n){if(void 0!==e[n]){var i=t.configProperties.find((function(e){return e.key===n}));i?i.value=e[n]:t.configProperties.push({isSecret:!1,key:n,value:e[n]})}};for(var r in e)n(r);(0,f.i2)(t,s,i)},onUpdate:i,"data-componentid":"".concat(c,"-form"),isReadOnly:r,isSubmitting:u,uiMetaData:a}),o.createElement(S.Z,{hidden:!0}))};function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Y.defaultProps={"data-componentid":"idvp-edit-general-settings"};var ne=function(e){var t,n,r=e.idvp,d=e.isLoading,u=e.onDelete,s=e.onUpdate,p=e.isReadOnly,v=e.isDeletePermitted,y=e.loader,b=e["data-componentid"],h=(0,l.$)().t,g=(0,c.v9)((function(e){return e.config.ui.features})),E=ee((0,o.useState)(!1),2),A=E[0],I=E[1],C=ee((0,o.useState)(!1),2),w=C[0],P=C[1],D=ee((0,o.useState)(!1),2),L=D[0],T=D[1],V=function(e){for(var t in e)void 0!==e[t]&&(r[t]=e[t]);(0,f.i2)(r,T,s)};return d?o.createElement(y,null):o.createElement(o.Fragment,null,o.createElement(J,{identityVerificationProvider:r,onSubmit:V,onUpdate:s,"data-componentid":"".concat(b,"-form"),isReadOnly:p,isSubmitting:L}),o.createElement(S.Z,{hidden:!0}),(v||!p)&&o.createElement(a.v9,{sectionHeader:h("idvp:dangerZoneGroup.header")},o.createElement(i.di,{when:null==g||null===(t=g.identityVerificationProviders)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update},o.createElement(a.cN,{actionTitle:h("idvp:dangerZoneGroup.disableIDVP.actionTitle",{state:r.isEnabled?h("common:disable"):h("common:enable")}),header:h("idvp:dangerZoneGroup.disableIDVP.header",{state:r.isEnabled?h("common:disable"):h("common:enable")}),subheader:r.isEnabled?h("idvp:dangerZoneGroup.disableIDVP.subheader"):h("idvp:dangerZoneGroup.disableIDVP.subheader2"),onActionClick:void 0,toggle:{checked:r.isEnabled,onChange:function(e,t){V({isEnabled:t.checked})}},"data-componentid":"".concat(b,"-disable-idvp-danger-zone")})),o.createElement(i.di,{when:null==g||null===(n=g.identityVerificationProviders)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.delete},o.createElement(a.cN,{actionTitle:h("idvp:dangerZoneGroup.deleteIDVP.actionTitle"),header:h("idvp:dangerZoneGroup.deleteIDVP.header"),subheader:h("idvp:dangerZoneGroup.deleteIDVP.subheader"),onActionClick:function(){I(!0)},"data-componentid":"".concat(b,"-delete-idvp-danger-zone")}))),A&&o.createElement(a.cV,{primaryActionLoading:w,onClose:function(){return I(!1)},type:"negative",open:A,assertionHint:h("idvp:confirmations.deleteIDVP.assertionHint"),assertionType:"checkbox",primaryAction:h("common:confirm"),secondaryAction:h("common:cancel"),onSecondaryActionClick:function(){return I(!1)},onPrimaryActionClick:function(){return P(!0),void(0,m.cV)(r.id).then(f.Dj).catch((function(e){(0,f.d_)(e)})).finally((function(){P(!1),I(!1),u()}))},"data-componentid":"".concat(b,"-delete-idvp-confirmation"),closeOnDimmerClick:!1},o.createElement(a.cV.Header,{"data-componentid":"".concat(b,"-delete-idvp-confirmation")},h("idvp:confirmations.deleteIDVP.header")),o.createElement(a.cV.Message,{attached:!0,negative:!0,"data-componentid":"".concat(b,"-delete-idvp-confirmation")},h("idvp:confirmations.deleteIDVP.message")),o.createElement(a.cV.Content,{"data-componentid":"".concat(b,"-delete-idvp-confirmation")},h("idvp:confirmations.deleteIDVP.content"))))};function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(l.push(i.value),l.length!==t);c=!0);}catch(e){d=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw r}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}ne.defaultProps={"data-componentid":"idvp-edit-general-settings"};var ae=function(e){var t=e.identityVerificationProvider,n=e.isLoading,i=e.onDelete,r=e.onUpdate,l=e.isReadOnly,c=e.isDeletePermitted,d=e.isAutomaticTabRedirectionEnabled,u=e.tabIdentifier,s=e.uiMetaData,m=e["data-componentid"],p=ie((0,o.useState)(0),2),v=p[0],y=p[1],b=ie((0,o.useState)(),2),h=b[0],g=b[1];(0,o.useEffect)((function(){var e=t.claims.map((function(e){return{idvpClaim:e.idvpClaim,localClaim:{uri:e.localClaim}}}));g(e)}),[t]);var E,S=function(){return o.createElement(a.M$.Pane,{controlledSegmentation:!0},o.createElement(ne,{idvp:t,isLoading:n,onDelete:i,onUpdate:r,"data-componentid":"".concat(m,"-general-settings"),isReadOnly:l,isDeletePermitted:c,loader:f.mh}))},A=function(){return o.createElement(a.M$.Pane,{controlledSegmentation:!0},o.createElement(Y,{idvp:t,isLoading:n,onUpdate:r,"data-componentid":"".concat(m,"-configuration-settings"),uiMetaData:s.pages.edit.settings,isReadOnly:l,loader:f.mh}))},I=function(){return o.createElement(a.M$.Pane,{controlledSegmentation:!0},o.createElement(H,{idvp:t,initialClaims:h,isLoading:n,onUpdate:r,hideIdentityClaimAttributes:!0,"data-componentid":"".concat(m,"-attribute-settings"),isReadOnly:l,loader:f.mh}))};return!t||n?(0,f.mh)():o.createElement(a.M$,{isLoading:n,"data-testid":"".concat(m,"-resource-tabs"),panes:(E=[],E.push({"data-tabid":z.G.GENERAL_TAB_ID,menuItem:"General",render:S}),E.push({"data-tabid":z.G.SETTINGS_TAB_ID,menuItem:"Settings",render:A}),E.push({"data-tabid":z.G.ATTRIBUTES_TAB_ID,menuItem:"Attributes",render:I}),E),defaultActiveIndex:v,onTabChange:function(e,t){y(t.activeIndex)},isAutomaticTabRedirectionEnabled:d,tabIdentifier:u})};ae.defaultProps={"data-componentid":"idvp-edit"}}}]);