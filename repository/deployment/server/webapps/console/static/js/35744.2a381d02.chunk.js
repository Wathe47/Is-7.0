"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[35744,55449],{35744:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappings:()=>C,default:()=>y});var i=n(93129),a=n(3356),r=n(86727),l=n(76004),c=n.n(l),o=n(44194),s=n(10479),u=n(47245),d=n(93682),m=n(55449),f=n(84870),p=n(35542),g=n(24393),E=(n(16645),n(45481)),h=n(43227);function v(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,l,c=[],o=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(i=r.call(n)).done)&&(c.push(i.value),c.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return c}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var C=function(e){var t,n,l=e["data-testid"],b=e.match.params,A=b.type,C=b.customAttributeMappingID,y=(0,u.I0)(),S=(0,u.v9)((function(e){return e.config.ui.listAllAttributeDialects})),M=(0,s.$)().t,T=(0,r.fQ)().getLink,R=I((0,o.useState)(!0),2),D=R[0],U=R[1],Q=I((0,o.useState)(null),2),_=Q[0],L=Q[1],O=I((0,o.useState)([]),2),w=O[0],Z=O[1],x=I((0,o.useState)(!0),2),P=x[0],j=x[1];(0,o.useEffect)((function(){H()}),[]),(0,o.useEffect)((function(){_&&_.length>0&&P&&(k(_.map((function(e){return e.id}))),j(!1))}),[_,P]);var k=function(e,t,n,r,l){var o=[];e.forEach((function(e){o.push((0,p.gR)(e,{filter:l,limit:t,offset:n,sort:r}))})),c().all(o).then((function(e){var t=[];e.forEach((function(e){var n=f.attributeConfig.attributeMappings.getExternalAttributes(A,e);t.push.apply(t,v(n.map((function(e){return e.mappedLocalClaimURI}))))})),Z(t)})).catch((function(e){var t,n;y((0,a.V_)({description:(null===(t=e[0])||void 0===t||null===(t=t.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||M("claims:dialects.notifications.fetchExternalClaims.genericError.description",{type:(0,h.i)(A)}),level:i.QU.ERROR,message:(null===(n=e[0])||void 0===n||null===(n=n.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||M("claims:dialects.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){return U(!1)}))},B=function(){var e;switch(A){case E.Q.OIDC:return M("claims:attributeMappings.oidc.heading");case E.Q.SCIM:return M("claims:attributeMappings.scim.heading");case E.Q.AXSCHEMA:return M("claims:attributeMappings.axschema.heading");case E.Q.EIDAS:return M("claims:attributeMappings.eidas.heading");case E.Q.OTHERS:return _&&(null===(e=_[0])||void 0===e?void 0:e.dialectURI);default:return M("claims:attributeMappings.custom.heading")}},H=function(e,t,n,r){U(!0),(0,p.jp)({filter:r,limit:e,offset:t,sort:n}).then((function(e){var t=e.filter((function(e){return S?"local"!==e.id&&e.id!==E.Q.ATTRIBUTE_DIALECT_IDS.get("XML_SOAP")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("OPENID_NET"):e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("LOCAL")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("AXSCHEMA")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("EIDAS_LEGAL")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("EIDAS_NATURAL")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("OPENID_NET")&&e.id!=E.Q.ATTRIBUTE_DIALECT_IDS.get("XML_SOAP")&&(f.attributeConfig.attributeMappings.showSCIMCore1||"urn:scim:schemas:core:1.0"!==e.dialectURI)})),n=[];t.forEach((function(e){E.Q.OIDC_MAPPING.includes(e.dialectURI)?A===E.Q.OIDC&&n.push(e):Object.values(E.Q.SCIM_TABS).map((function(e){return e.uri})).includes(e.dialectURI)?A===E.Q.SCIM&&n.push(e):E.Q.AXSCHEMA_MAPPING===e.dialectURI?A===E.Q.AXSCHEMA&&n.push(e):Object.values(E.Q.EIDAS_TABS).map((function(e){return e.uri})).includes(e.dialectURI)?A===E.Q.EIDAS&&n.push(e):A===E.Q.OTHERS&&C===e.id&&n.push(e)})),A===E.Q.SCIM&&f.attributeConfig.showCustomDialectInSCIM&&t.filter((function(e){return e.dialectURI===f.attributeConfig.localAttributes.customDialectURI})).length>0&&n.push(t.filter((function(e){return e.dialectURI===f.attributeConfig.localAttributes.customDialectURI}))[0]),L(n)})).catch((function(e){var t,n;y((0,a.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||M("claims:dialects.notifications.fetchDialects.genericError.description"),level:i.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||M("claims:dialects.notifications.fetchDialects.genericError.message")}))})).finally((function(){U(!1)}))};return o.createElement(r.Xg,{isLoading:D,title:B(),pageTitle:B(),description:function(){switch(A){case E.Q.OIDC:return o.createElement(o.Fragment,null,M("claims:attributeMappings.oidc.description"),o.createElement(r.eb,{link:T("manage.attributes.oidcAttributes.learnMore")},M("common:learnMore")));case E.Q.SCIM:return o.createElement(o.Fragment,null,M("claims:attributeMappings.scim.description"),o.createElement(r.eb,{link:T("manage.attributes.scimAttributes.learnMore")},M("common:learnMore")));case E.Q.AXSCHEMA:return M("claims:attributeMappings.axschema.description");case E.Q.EIDAS:return M("claims:attributeMappings.eidas.description");default:return M("claims:attributeMappings.custom.description")}}(),"data-testid":"".concat(l,"-page-layout"),image:function(){var e;switch(A){case E.Q.OIDC:return o.createElement(r.dn,{verticalAlign:"middle",rounded:!0,icon:(0,g.r2)().oidc,spaced:"right",size:"tiny",floated:"left",transparent:!0});case E.Q.SCIM:return o.createElement(r.dn,{verticalAlign:"middle",rounded:!0,icon:(0,g.r2)().scim,spaced:"right",size:"tiny",floated:"left"});case E.Q.AXSCHEMA:return o.createElement(r.dn,{verticalAlign:"middle",rounded:!0,icon:(0,g.r2)().axschema,spaced:"right",size:"tiny",floated:"left"});case E.Q.EIDAS:return o.createElement(r.dn,{verticalAlign:"middle",rounded:!0,icon:(0,g.r2)().eidas,spaced:"right",size:"tiny",floated:"left"});case E.Q.OTHERS:return o.createElement(d.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"tiny"},o.createElement(r.Xo,null),o.createElement("span",{className:"claims-letter"},_&&(null===(e=_[0])||void 0===e?void 0:e.dialectURI.charAt(0).toUpperCase())));default:return o.createElement(d.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"tiny"},o.createElement(r.Xo,null),o.createElement("span",{className:"claims-letter"},"C"))}}(),backButton:{onClick:function(){g.m8.push(g.$x.getPaths().get("CLAIM_DIALECTS"))},text:M("claims:local.pageLayout.local.back")}},(null==_?void 0:_.length)>1?o.createElement(r.M$,{panes:function(){if(A===E.Q.SCIM){var e=[];if(E.Q.SCIM_TABS.forEach((function(t){if(!f.SCIMConfigs.hideCore1Schema||f.SCIMConfigs.scim.core1Schema!==t.uri){var n=null==_?void 0:_.find((function(e){return e.dialectURI===t.uri}));n&&e.push({menuItem:t.name,render:function(){return o.createElement(r.M$.Pane,{controlledSegmentation:!0,attached:!1},o.createElement(m.default,{id:n.id,attributeUri:t.uri,attributeType:A,mappedLocalClaims:w,updateMappedClaims:j}))}})}})),f.attributeConfig.showCustomDialectInSCIM){var t=null==_?void 0:_.find((function(e){return e.dialectURI===f.attributeConfig.localAttributes.customDialectURI}));t&&e.push({menuItem:"Custom Schema",render:function(){return o.createElement(r.M$.Pane,{controlledSegmentation:!0,attached:!1},o.createElement(m.default,{id:t.id,attributeType:A,attributeUri:t.dialectURI,mappedLocalClaims:w,updateMappedClaims:j}))}})}return e}if(A===E.Q.EIDAS){var n=[];return E.Q.EIDAS_TABS.forEach((function(e){var t=null==_?void 0:_.find((function(t){return t.dialectURI===e.uri}));t&&n.push({menuItem:e.name,render:function(){return o.createElement(r.M$.Pane,{controlledSegmentation:!0,attached:!1},o.createElement(m.default,{id:t.id,attributeUri:e.uri,attributeType:A,mappedLocalClaims:w,updateMappedClaims:j}))}})})),n}return null==_?void 0:_.map((function(e){return{menuItem:e.dialectURI,render:function(){return o.createElement(r.M$.Pane,{controlledSegmentation:!0,attached:!1},o.createElement(m.default,{id:e.id,attributeType:A,attributeUri:e.dialectURI,mappedLocalClaims:w,updateMappedClaims:j}))}}}))}(),"data-testid":"".concat(l,"-tabs")}):o.createElement(m.default,{id:_&&(null===(t=_[0])||void 0===t?void 0:t.id),attributeType:A,attributeUri:_&&(null===(n=_[0])||void 0===n?void 0:n.dialectURI),mappedLocalClaims:w,updateMappedClaims:j}))};C.defaultProps={"data-testid":"edit-attribute-mappings"};const y=C},55449:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var i=n(24184),a=n(93129),r=n(3356),l=n(86727),c=n(44194),o=n(10479),s=n(47245),u=n(89141),d=n(12638),m=n(41193),f=n(62508),p=n(35542),g=n(24393),E=n(84870),h=n(16645),v=n(45481),I=n(43227);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,r,l,c=[],o=!0,s=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(i=r.call(n)).done)&&(c.push(i.value),c.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var C=function(e){var t,n=e.attributeType,v=e.attributeUri,A=e.mappedLocalClaims,C=e.updateMappedClaims,y=e["data-testid"],S=e.id,M=b((0,c.useState)(null),2),T=M[0],R=M[1],D=b((0,c.useState)(void 0),2),U=D[0],Q=D[1],_=b((0,c.useState)(!0),2),L=_[0],O=_[1],w=b((0,c.useState)(!1),2),Z=w[0],x=w[1],P=(0,s.I0)(),j=(0,o.$)().t,k=(0,s.v9)((function(e){return e.config.ui.features})),B=function(e){(0,p.vR)(null!=e?e:S).then((function(e){R(e)})).catch((function(e){P((0,r.V_)({description:(null==e?void 0:e.description)||j("claims:dialects.notifications.fetchADialect.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||j("claims:dialects.notifications.fetchADialect.genericError.message")}))}))};(0,c.useEffect)((function(){S&&B()}),[S]);var H=function(e,t,i,l){S&&O(!0),S&&Q(void 0),S&&(0,p.gR)(S,{filter:l,limit:e,offset:t,sort:i}).then((function(e){var t=E.attributeConfig.attributeMappings.getExternalAttributes(n,e);Q((0,g.fS)(t,"claimURI",!0))})).catch((function(e){var t,i;P((0,r.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||j("claims:dialects.notifications.fetchExternalClaims.genericError.description",{type:(0,I.i)(n)}),level:a.QU.ERROR,message:(null==e||null===(i=e.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.message)||j("claims:dialects.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){O(!1)}))};(0,c.useEffect)((function(){H()}),[S]);var N=function(e){(0,p.Nx)(e).then((function(){g.m8.push(g.$x.getPaths().get("CLAIM_DIALECTS")),P((0,r.V_)({description:j("claims:dialects.notifications.deleteDialect.success.description",{type:(0,I.i)(n,!0)}),level:a.QU.SUCCESS,message:j("claims:dialects.notifications.deleteDialect.success.message")}))})).catch((function(e){P((0,r.V_)({description:(null==e?void 0:e.description)||j("claims:dialects.notifications.deleteDialect.genericError.description",{type:(0,I.i)(n,!0)}),level:a.QU.ERROR,message:(null==e?void 0:e.message)||j("claims:dialects.notifications.deleteDialect.genericError.message")}))}))};return c.createElement(c.Fragment,null,E.attributeConfig.attributeMappings.editAttributeMappingDetails&&c.createElement(c.Fragment,null,c.createElement(u.Z,null,c.createElement(u.Z.Row,{columns:1},c.createElement(u.Z.Column,{width:16},c.createElement(d.Z,{as:"h4"},j("claims:dialects.pageLayout.edit.updateDialectURI",{type:(0,I.i)(n,!0)})),c.createElement(l.pJ,null,L?c.createElement(m.Z,null,c.createElement(m.Z.Line,{length:"short"}),c.createElement(m.Z.Line,{length:"medium"})):c.createElement(h.T8,{dialect:T,"data-testid":"".concat(y,"-edit-dialect-details"),attributeType:n,onUpdate:function(e){B(e)}}))))),c.createElement(f.Z,{hidden:!0}),c.createElement(u.Z,{columns:1},c.createElement(u.Z.Column,{width:16},c.createElement(d.Z,{as:"h4"},j("claims:dialects.pageLayout.edit.updateExternalAttributes",{type:(0,I.i)(n,!0)})))),c.createElement(f.Z,{hidden:!0}),c.createElement(f.Z,{hidden:!0})),c.createElement(h._v,{dialectID:S,isLoading:L,claims:U,update:H,"data-testid":"".concat(y,"-edit-external-claims"),attributeType:n,attributeUri:v,mappedLocalClaims:A,updateMappedClaims:C}),c.createElement(f.Z,{hidden:!0}),E.attributeConfig.attributeMappings.showDangerZone&&c.createElement(u.Z,null,c.createElement(u.Z.Row,{columns:1},c.createElement(u.Z.Column,{width:16},c.createElement(i.di,{when:null==k||null===(t=k.oidcScopes)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.delete},c.createElement(l.v9,{sectionHeader:j("common:dangerZone"),"data-testid":"".concat(y,"-danger-zone-group")},c.createElement(l.cN,{actionTitle:j("claims:dialects.dangerZone.actionTitle",{type:(0,I.i)(n,!0,!0)}),header:j("claims:dialects.dangerZone.header",{type:(0,I.i)(n,!0)}),subheader:j("claims:dialects.dangerZone.subheader",{type:(0,I.i)(n)}),onActionClick:function(){return x(!0)},"data-testid":"".concat(y,"-dialect-delete-danger-zone")})))))),E.attributeConfig.attributeMappings.showDangerZone&&Z&&c.createElement(l.cV,{onClose:function(){return x(!1)},type:"negative",open:Z,assertion:T.dialectURI,assertionHint:c.createElement("p",null,"Please type ",c.createElement("strong",null,T.dialectURI)," to confirm."),assertionType:"input",primaryAction:j("claims:dialects.confirmations.action"),secondaryAction:j("common:cancel"),onSecondaryActionClick:function(){return x(!1)},onPrimaryActionClick:function(){return N(T.id)},"data-testid":"".concat(y,"-delete-confirmation-modal"),closeOnDimmerClick:!1},c.createElement(l.cV.Header,{"data-testid":"".concat(y,"-delete-confirmation-modal-header")},j("claims:dialects.confirmations.header")),c.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(y,"-delete-confirmation-modal-message")},j("claims:dialects.confirmations.message")),c.createElement(l.cV.Content,{"data-testid":"".concat(y,"-delete-confirmation-modal-content")},j("claims:dialects.confirmations.content",{type:(0,I.i)(n)}))))};C.defaultProps={attributeType:v.Q.OTHERS,"data-testid":"external-dialect-edit"};const y=C}}]);