"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[14710,8889,54050,33692],{14710:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappings:()=>h});var r=n(93129),i=n(3356),o=n(66112),a=n(86727),l=n(99759),s=n(44194),u=n(10479),c=n(47245),m=n(62508),d=n(19980),p=n(89141),E=n(12638),f=n(35542),R=n(24393),v=n(28897),y=n(37313),S=n(8889);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],s=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){u=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){var t,n,g,h,U=e.userStore,A=e.userStoreId,_=e["data-testid"],T=(0,u.$)().t,N=(0,c.I0)(),O=(0,a.fQ)().getLink,M=(0,a.kH)().isMobileViewport,I=(0,c.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),w=b((0,s.useState)(null),2),C=w[0],P=w[1],V=b((0,s.useState)(null),2),D=V[0],Z=V[1],L=b((0,s.useState)(null),2),Y=L[0],x=L[1],k=b((0,s.useState)(!1),2),j=k[0],W=k[1];(0,s.useEffect)((function(){X(null,null,null,null,!I)}),[]),(0,s.useEffect)((function(){if(C){var e=[];C.map((function(t){t.properties.map((function(n){"USER_CUSTOM_ATTRIBUTE"===n.key&&"TRUE"===n.value&&e.push(t)}))})),x(e),Z((0,l.Z)(C,e))}}),[C]);var X=function(e,t,n,o,a){W(!0);var l={"exclude-identity-claims":a,filter:o||null,limit:e||null,offset:n||null,sort:t||null};(0,f.WN)(l).then((function(e){P((0,R.fS)(e,S.RemoteUserStoreConstants.DISPLAY_NAME_VALUE,!0))})).catch((function(e){var t,n;N((0,i.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||T("claims:local.notifications.getClaims.genericError.description"),level:r.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||T("claims:local.notifications.getClaims.genericError.message")}))})).finally((function(){W(!1)}))},F=function(e){var t="";return e.attributeMapping.forEach((function(e){(e.userstore===(null==U?void 0:U.name.toUpperCase())||""===t&&e.userstore===S.RemoteUserStoreConstants.PRIMARY_USER_STORE_NAME)&&(t=e.mappedAttribute)})),t},Q=function(e){var t=[];e.forEach((function(e,n){t.push({claimURI:n,mappedAttribute:e})})),function(e){(0,v.TU)(A,e).then((function(){N((0,i.V_)({description:T("userstores:notifications.updateUserstore.success.description"),level:r.QU.SUCCESS,message:T("userstores:notifications.updateUserstore.success.message")})),N((0,i.V_)({description:T("userstores:notifications.updateDelay.description"),level:r.QU.WARNING,message:T("userstores:notifications.updateDelay.message")}))})).catch((function(e){N((0,i.V_)({description:(null==e?void 0:e.description)||T("userstores:notifications.updateUserstore.genericError.description"),level:r.QU.ERROR,message:(null==e?void 0:e.message)||T("userstores:notifications.updateUserstore.genericError.message")}))}))}(t)};return s.createElement(s.Fragment,null,j?s.createElement(a.pO,null):s.createElement(a.pJ,{padded:"very"},s.createElement(a.X6,{as:"h3"},"Update Attribute Mappings",s.createElement(a.X6,{subHeading:!0,as:"h6"},T("extensions:manage.features.userStores.edit.attributeMappings.description"),s.createElement(a.eb,{link:O("manage.userStores.attributeMappings.learnMore")},T("extensions:common.learnMore")))),s.createElement(m.Z,{hidden:!0}),s.createElement(o.Es,{onSubmit:function(e){Q(e)}},s.createElement(a.X6,{as:"h5"},"Custom Attributes"),s.createElement(d.Z,{className:"attribute-mapping-section",padded:"very"},j?s.createElement(a.pO,null):Y&&Y.length>0?s.createElement(p.Z,{width:10},null==Y?void 0:Y.map((function(e,t){return s.createElement(p.Z.Row,{key:t,columns:2,verticalAlign:"middle"},s.createElement(p.Z.Column,{width:6},s.createElement(E.Z.Content,null,null==e?void 0:e.displayName,s.createElement(a.xv,{display:"inline",styles:{color:"red"}},"*"),s.createElement(E.Z.Subheader,null,s.createElement("code",{className:"inline-code compact transparent"},null==e?void 0:e.claimURI)))),s.createElement(p.Z.Column,{width:6},s.createElement(o.gN,{name:null==e?void 0:e.claimURI,requiredErrorMessage:T("extensions:manage.features.userStores.edit.attributeMappings.validations.empty"),type:"text",required:!0,minLength:3,maxLength:50,"data-testid":"".concat(_,"-user-store-name-input"),width:14,hint:"This will appear as the name of the remote user store that you connect.",value:F(e)})))}))):s.createElement(a.$J,{title:"No Custom Attributes",subtitle:["There are no custom attributes created in the system."]})),null!==(t=(null==Y?void 0:Y.length)>0&&"false"===(null==U||null===(n=U.properties)||void 0===n||null===(n=n.find((function(e){return e.name===y.rr})))||void 0===n?void 0:n.value))&&void 0!==t?t:s.createElement(a.KM,{type:"submit"},T("common:update")),s.createElement(m.Z,{hidden:!0}),s.createElement(m.Z,null),s.createElement(a.X6,{as:"h5"},"Local Attributes"),s.createElement(d.Z,{className:"attribute-mapping-section",padded:"very"},j?s.createElement(a.pO,null):D&&D.length>0?s.createElement(p.Z,{width:10},null==D?void 0:D.map((function(e,t){return s.createElement(p.Z.Row,{key:t,columns:2,verticalAlign:"middle"},s.createElement(p.Z.Column,{width:6},s.createElement(E.Z.Content,null,null==e?void 0:e.displayName,s.createElement(a.xv,{display:"inline",styles:{color:"red"}},"*"),s.createElement(E.Z.Subheader,null,s.createElement("code",{className:"inline-code compact transparent"},null==e?void 0:e.claimURI)))),s.createElement(p.Z.Column,{width:6},s.createElement(o.gN,{name:null==e?void 0:e.claimURI,requiredErrorMessage:T("extensions:manage.features.userStores.edit.attributeMappings.validations.empty"),type:"text",required:!0,minLength:3,maxLength:50,"data-testid":"".concat(_,"-user-store-name-input"),width:14,hint:"This will appear as the name of the remote user store that you connect.",value:F(e)})))}))):s.createElement(a.$J,{title:"No Custom Attributes",subtitle:["There are no custom attributes created in the system."]})),s.createElement(a.GI,{trigger:s.createElement("div",{className:M?"mb-1x mt-1x inline-button button-width":"inline-button"},s.createElement(a.KM,{type:"submit",disabled:!("false"===(null==U||null===(g=U.properties)||void 0===g||null===(g=g.find((function(e){return e.name===y.rr})))||void 0===g?void 0:g.value))},T("common:update"))),content:T("extensions:manage.features.userStores.edit.attributeMappings.disable.buttonDisableHint"),size:"mini",wide:!0,disabled:!("false"!==(null==U||null===(h=U.properties)||void 0===h||null===(h=h.find((function(e){return e.name===y.rr})))||void 0===h?void 0:h.value))}))))}},8889:(e,t,n)=>{n.r(t),n.d(t,{RemoteUserStoreAccessTypes:()=>r.RemoteUserStoreAccessTypes,RemoteUserStoreConstants:()=>r.RemoteUserStoreConstants,RemoteUserStoreMeta:()=>i.RemoteUserStoreMeta,RemoteUserStoreTypes:()=>r.RemoteUserStoreTypes});var r=n(33692),i=n(54050)},54050:(e,t,n)=>{n.r(t),n.d(t,{RemoteUserStoreMeta:()=>r});var r={userStoreAgent:{artifact:"agent-v1.1.7.zip"}}},33692:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.r(t),n.d(t,{RemoteUserStoreAccessTypes:()=>u,RemoteUserStoreConstants:()=>l,RemoteUserStoreTypes:()=>s});var l=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"getPaths",value:function(){return(new Map).set("REMOTE_USER_STORE_CREATE","".concat(window.AppUtils.getConfig().adminApp.basePath,"/remote-user-store-create"))}}],(t=null)&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();o(l,"OUTBOUND_USER_STORE_TYPE_ID","V1NPdXRib3VuZFVzZXJTdG9yZU1hbmFnZXI"),o(l,"READONLY_LDAP_USER_STORE_TYPE_ID","VW5pcXVlSURSZWFkT25seUxEQVBVc2VyU3RvcmVNYW5hZ2Vy"),o(l,"READONLY_AD_USER_STORE_TYPE_ID","VW5pcXVlSURBY3RpdmVEaXJlY3RvcnlVc2VyU3RvcmVNYW5hZ2Vy"),o(l,"CUSTOMER_USERSTORE_ID","REVGQVVMVA"),o(l,"PRIMARY_USER_STORE_NAME","PRIMARY"),o(l,"FEDERATION_USER_STORE_NAME","FEDERATION"),o(l,"DEFAULT_USER_STORE_NAME","DEFAULT"),o(l,"INTERNAL_USER_STORE_NAME","INTERNAL"),o(l,"APPLICATION_USER_STORE_NAME","APPLICATION"),o(l,"DISPLAY_NAME_VALUE","displayName"),o(l,"PROPERTY_NAME_CONNECTED_USERSTORE_TYPE","ConnectedUserstoreType"),o(l,"PROPERTY_NAME_READ_ONLY","ReadOnly"),o(l,"FEATURE_DICTIONARY",(new Map).set("USERSTORES_READ_WRITE_USERSTORES","userStores.readWriteUserstores"));var s=function(e){return e.ActiveDirectory="AD",e.LDAP="LDAP",e}({}),u=function(e){return e.ReadOnly="true",e.ReadWrite="false",e}({})}}]);