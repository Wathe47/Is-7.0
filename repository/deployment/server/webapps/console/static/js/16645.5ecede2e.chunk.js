/*! For license information please see 16645.5ecede2e.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[16645],{16645:(e,t,n)=>{n.d(t,{$E:()=>mt,C$:()=>Ke,Sf:()=>xt,ZW:()=>A,A4:()=>H,T8:()=>ie,_v:()=>St,AI:()=>ee,RH:()=>At});var r=n(24184),i=n(54833),a=n(93129),l=n(3356),o=n(66112),c=n(86727),u=n(23587),s=n(44194),d=n(10479),m=n(47245),f=n(26154),p=n(12638),g=n(12099),h=n(89141),v=n(35542);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function b(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){var r;return r=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==y(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t,n=e.claim,u=e.update,f=e["data-testid"],p=I((0,s.useState)(!1),2),g=p[0],y=p[1],E=I((0,o.cC)(),2),S=E[0],w=E[1],R=(0,m.I0)(),A=(0,d.$)().t,x=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),U=(0,m.v9)((function(e){return e.config.ui.features})),O=(0,s.useMemo)((function(){var e;return!(0,i.Xr)(null==U?void 0:U.attributeDialects,null==U||null===(e=U.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,x)}),[U,x]);return s.createElement(c.pJ,null,s.createElement(h.Z,null,s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{tablet:16,computer:12,largeScreen:9,widescreen:6,mobile:16},s.createElement("p",null,A("claims:local.additionalProperties.hint")),s.createElement(o.e9,{data:n.properties,keyType:"text",keyName:A("claims:local.additionalProperties.key"),valueName:A("claims:local.additionalProperties.value"),submit:S,keyRequiredMessage:A("claims:local.additionalProperties.keyRequiredErrorMessage"),valueRequiredErrorMessage:A("claims:local.additionalProperties.valueRequiredErrorMessage"),requiredField:!0,update:function(e){var t=C({},n);delete t.id,delete t.dialectURI;var r=C(C({},t),{},{properties:b(e)});y(!0),(0,v.iC)(n.id,r).then((function(){R((0,l.V_)({description:A("claims:local.notifications.updateClaim.success.description"),level:a.QU.SUCCESS,message:A("claims:local.notifications.updateClaim.success.message")})),u()})).catch((function(e){R((0,l.V_)({description:(null==e?void 0:e.description)||A("claims:local.notifications.updateClaim.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||A("claims:local.notifications.updateClaim.genericError.message")}))})).finally((function(){y(!1)}))},"data-testid":"".concat(f,"-form-properties-dynamic-field"),readOnly:O}))),s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:6},s.createElement(r.di,{when:null==U||null===(t=U.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update},s.createElement(c.KM,{onClick:function(){w()},"data-testid":"".concat(f,"-submit-button"),loading:g,disabled:g},A("common:update")))))))};A.defaultProps={"data-testid":"edit-local-claims-additional-properties"};var x=n(20812),U=n(67127),O=n(77757),L=n(62508),M=n(24393),_=n(84870),T=n(61145),D=n(40518),Z=n(32514),N=n(29269),j=n(72478),P=n(45481);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q="local-claim-basic-details-form",V=[P.Q.GROUPS_CLAIM_URI,P.Q.ROLES_CLAIM_URI,P.Q.APPLICATION_ROLES_CLAIM_URI],H=function(e){var t,n,o=e.claim,u=e.update,p=e["data-testid"],g=(0,m.I0)(),y=Q((0,s.useState)(!1),2),b=y[0],E=y[1],C=Q((0,s.useState)(!1),2),S=C[0],I=C[1],w=Q((0,s.useState)(!1),2),R=w[0],A=w[1],z=Q((0,s.useState)(!1),2),H=z[0],G=z[1],$=Q((0,s.useState)(!1),2),F=$[0],B=$[1],X=Q((0,s.useState)(!1),2),W=X[0],K=X[1],Y=Q((0,s.useState)(!1),2),J=Y[0],ee=Y[1],te=(0,s.useRef)(null),ne=(0,s.useRef)(null),re=(0,s.useRef)(null),ie=(0,s.useRef)(null),ae=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),le=(0,m.v9)((function(e){return e.config.ui.features})),oe=Q((0,s.useState)(!0),2),ce=oe[0],ue=oe[1],se=Q((0,s.useState)(void 0),2),de=se[0],me=se[1],fe=Q((0,s.useState)(void 0),2),pe=fe[0],ge=fe[1],he=Q((0,s.useState)(!1),2),ve=he[0],ye=he[1],be=Q((0,s.useState)(!1),2),Ee=be[0],Ce=be[1],Se=(0,d.$)().t,Ie=(0,j.W)().data;(0,s.useEffect)((function(){Ie&&me((0,N.t)(Ie))}),[Ie]),(0,s.useEffect)((function(){if("true"===(null==de?void 0:de.enableValidator)&&null!==_.attributeConfig&&void 0!==_.attributeConfig&&_.attributeConfig.systemClaims.includes(P.Q.EMAIL_CLAIM_URI)){var e=null===_.attributeConfig||void 0===_.attributeConfig?void 0:_.attributeConfig.systemClaims.indexOf(P.Q.EMAIL_CLAIM_URI);null===_.attributeConfig||void 0===_.attributeConfig||_.attributeConfig.systemClaims.splice(e,1)}else"false"!==(null==de?void 0:de.enableValidator)||null!==_.attributeConfig&&void 0!==_.attributeConfig&&_.attributeConfig.systemClaims.includes(P.Q.EMAIL_CLAIM_URI)||null===_.attributeConfig||void 0===_.attributeConfig||_.attributeConfig.systemClaims.push(P.Q.EMAIL_CLAIM_URI)}),[de,_.attributeConfig]),(0,s.useEffect)((function(){null!=o&&o.supportedByDefault&&I(!0),null!=o&&o.readOnly&&G(!0),o&&((null===_.attributeConfig||void 0===_.attributeConfig?void 0:_.attributeConfig.systemClaims.length)<=0||-1===(null===_.attributeConfig||void 0===_.attributeConfig?void 0:_.attributeConfig.systemClaims.indexOf(null==o?void 0:o.claimURI)))?ue(!1):ue(!0)}),[o,de]),(0,s.useEffect)((function(){var e=we();if(o){var t=[];e.forEach((function(e){t.push((0,v.ne)(e))})),Promise.allSettled(t).then((function(e){e.filter((function(e){if("fulfilled"===e.status)return!0;var t,n=e.reason;return 404!==n.code&&g((0,l.V_)({description:null==n||null===(t=n.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description,level:a.QU.ERROR,message:Se("claims:dialects.notifications.fetchExternalClaims.genericError.message")})),!1})).flatMap((function(e){return"fulfilled"===e.status?e.value:[]})).find((function(e){return e.mappedLocalClaimURI===o.claimURI}))&&K(!0)})).finally((function(){return ee(!0)}))}}),[o]),(0,s.useEffect)((function(){(0,D.PP)(D.vH.USER_ONBOARDING_CONNECTOR_ID,D.vH.SELF_SIGN_UP_CONNECTOR_ID).then((function(e){ge(e)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.detail?g((0,l.V_)({description:Se("governanceConnectors:notifications.getConnector.error.description",{description:e.response.data.description}),level:a.QU.ERROR,message:Se("governanceConnectors:notifications.getConnector.error.message")})):g((0,l.V_)({description:Se("governanceConnectors:notifications.getConnector.genericError.description"),level:a.QU.ERROR,message:Se("governanceConnectors:notifications.getConnector.genericError.message")}))}))}),[]),(0,s.useEffect)((function(){(0,U.Z)(null==pe?void 0:pe.properties)||pe.properties.map((function(e){e.name===D.vH.ACCOUNT_CONFIRMATION&&("false"===e.value?ye(!1):ye(!0)),e.name===D.vH.SELF_REGISTRATION_ENABLE&&("false"===e.value?Ce(!1):Ce(!0))}))}),[pe]);var we=function(){var e,t=[];return t.push(P.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_CORE")),t.push(P.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_CORE_USER")),t.push(P.Q.ATTRIBUTE_DIALECT_IDS.get("SCIM2_SCHEMAS_EXT_ENT_USER")),null!==(e=T.SCIMConfigs.scimDialectID)&&void 0!==e&&e.customEnterpriseSchema&&t.push(T.SCIMConfigs.scimDialectID.customEnterpriseSchema),t},Re=(0,s.useMemo)((function(){return!!ce||!(0,i.Xr)(null==le?void 0:le.attributeDialects,null==le||null===(e=le.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,ae);var e}),[le,ae,ce]),Ae=function(e){(0,v.wf)(e).then((function(){M.m8.push(M.$x.getPaths().get("LOCAL_CLAIMS")),g((0,l.V_)({description:Se("claims:local.notifications.deleteClaim.success.description"),level:a.QU.SUCCESS,message:Se("claims:local.notifications.deleteClaim.success.message")}))})).catch((function(e){g((0,l.V_)({description:(null==e?void 0:e.description)||Se("claims:local.notifications.deleteClaim.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||Se("claims:local.notifications.deleteClaim.genericError.message")}))})).finally((function(){A(!1)}))},xe=function(e){var t,n,r,i,c={attributeMapping:o.attributeMapping,claimURI:o.claimURI,description:void 0!==(null==e?void 0:e.description)?null===(t=e.description)||void 0===t?void 0:t.toString():null==o?void 0:o.description,displayName:void 0!==(null==e?void 0:e.name)?null===(n=e.name)||void 0===n?void 0:n.toString():null==o?void 0:o.displayName,displayOrder:_.attributeConfig.editAttributes.getDisplayOrder(o.displayOrder,null===(r=e.displayOrder)||void 0===r?void 0:r.toString()),properties:o.properties,readOnly:void 0!==(null==e?void 0:e.readOnly)?!!e.readOnly:null==o?void 0:o.readOnly,regEx:void 0!==(null==e?void 0:e.regularExpression)?null===(i=e.regularExpression)||void 0===i?void 0:i.toString():null==o?void 0:o.regEx,required:!(void 0===(null==e?void 0:e.required)||null!=e&&e.readOnly)&&!!e.required,supportedByDefault:void 0!==(null==e?void 0:e.supportedByDefault)?!!e.supportedByDefault:null==o?void 0:o.supportedByDefault};B(!0),(0,v.iC)(o.id,c).then((function(){g((0,l.V_)({description:Se("claims:local.notifications.updateClaim.success.description"),level:a.QU.SUCCESS,message:Se("claims:local.notifications.updateClaim.success.message")})),u(),g((0,l.wu)(!0)),(0,Z.w7)().then((function(e){g((0,l.Um)(e))})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description&&g((0,l.V_)({description:e.response.data.description,level:a.QU.ERROR,message:Se("console:manage.notifications.getProfileSchema.error.message")})),g((0,l.V_)({description:Se("console:manage.notifications.getProfileSchema.genericError.description"),level:a.QU.ERROR,message:Se("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){g((0,l.wu)(!1))}))})).catch((function(e){g((0,l.V_)({description:(null==e?void 0:e.description)||Se("claims:local.notifications.updateClaim.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||Se("claims:local.notifications.updateClaim.genericError.description")}))})).finally((function(){B(!1)}))};return s.createElement(s.Fragment,null,R&&s.createElement(c.cV,{onClose:function(){return A(!1)},type:"negative",open:R,assertionHint:Se("claims:local.confirmation.hint"),assertionType:"checkbox",primaryAction:Se("claims:local.confirmation.primaryAction"),secondaryAction:Se("common:cancel"),onSecondaryActionClick:function(){return A(!1)},onPrimaryActionClick:function(){return Ae(o.id)},"data-testid":"".concat(p,"-delete-confirmation-modal"),closeOnDimmerClick:!1},s.createElement(c.cV.Header,null,Se("claims:local.confirmation.header")),s.createElement(c.cV.Message,{attached:!0,negative:!0},Se("claims:local.confirmation.message")),s.createElement(c.cV.Content,null,Se("claims:local.confirmation.content"))),s.createElement(c.pJ,{padded:"very"},s.createElement(h.Z,null,s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{tablet:16,computer:12,largeScreen:9,widescreen:6,mobile:16},s.createElement(O.Z,null,s.createElement(O.Z.Field,{"data-testid":"".concat(p,"-form-attribute-uri-readonly-input")},s.createElement("label",null,Se("claims:local.attributes.attributeURI")),s.createElement(c.OR,{value:o?o.claimURI:""}),s.createElement(c.kW,null,"Unique identifier of the attribute.")))))),s.createElement(x.l0,{id:q,uncontrolledForm:!0,onSubmit:function(e){xe(e)},"data-testid":p},s.createElement(x.gN.Input,{ariaLabel:"name",inputType:"name",name:"name",label:Se("claims:local.forms.name.label"),required:!0,message:Se("claims:local.forms.name.requiredErrorMessage"),placeholder:Se("claims:local.forms.name.placeholder"),value:null==o?void 0:o.displayName,ref:te,validation:function(e){if(!e.toString().match(/^[A-za-z0-9#+._\-\s]{1,30}$/))return Se("claims:local.forms.name.validationErrorMessages.invalidName")},"data-testid":"".concat(p,"-form-name-input"),maxLength:30,minLength:1,hint:Se("claims:local.forms.nameHint"),readOnly:Re}),s.createElement(x.gN.Textarea,{ariaLabel:"description",inputType:"description",name:"description",label:Se("claims:local.forms.description.label"),required:!1,requiredErrorMessage:"",placeholder:Se("claims:local.forms.description.placeholder"),ref:ie,value:null==o?void 0:o.description,maxLength:255,minLength:3,"data-testid":"".concat(p,"-form-description-input"),hint:Se("claims:local.forms.descriptionHint"),readOnly:Re}),!_.attributeConfig.localAttributes.createWizard.showRegularExpression&&!ce&&s.createElement(x.gN.Input,{ariaLabel:"regularExpression",inputType:"default",name:"regularExpression",label:Se("claims:local.forms.regEx.label"),required:!1,requiredErrorMessage:"",placeholder:Se("claims:local.forms.regEx.placeholder"),value:null==o?void 0:o.regEx,ref:ne,"data-testid":"".concat(p,"-form-regex-input"),maxLength:P.Q.REGEX_FIELD_MAX_LENGTH,minLength:P.Q.REGEX_FIELD_MIN_LENGTH,hint:Se("claims:local.forms.regExHint"),readOnly:Re}),!V.includes(null==o?void 0:o.claimURI)&&J?!ce&&s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{mobile:16,tablet:16,computer:14},s.createElement(c.v0,{type:"info",content:W?Se("claims:local.forms.infoMessages.configApplicabilityInfo"):s.createElement(s.Fragment,null,Se("claims:local.forms.infoMessages.disabledConfigInfo"),s.createElement("div",null,"Add SCIM mapping from",s.createElement(c.rU,{external:!1,onClick:function(){return M.m8.push(M.$x.getPaths().get("SCIM_MAPPING"))}}," here"),"."))}))):null,o&&!V.includes(null==o?void 0:o.claimURI)&&o.claimURI!==P.Q.USER_ID_CLAIM_URI&&o.claimURI!==P.Q.USER_NAME_CLAIM_URI&&o.claimURI!==P.Q.GROUPS_CLAIM_URI&&!ce&&J&&s.createElement(x.gN.Checkbox,k({ariaLabel:"supportedByDefault",name:"supportedByDefault",label:Se("claims:local.forms.supportedByDefault.label"),required:!1,defaultValue:null==o?void 0:o.supportedByDefault,listen:function(e){I(!(null==e||!e.supportedByDefault))},"data-testid":"".concat(p,"-form-supported-by-default-input"),readOnly:Re,disabled:!W||ve&&Ee&&(null==o?void 0:o.claimURI)===P.Q.EMAIL_CLAIM_URI&&"true"===(null==de?void 0:de.enableValidator)},b?{checked:!0}:{defaultValue:null==o?void 0:o.supportedByDefault})),_.attributeConfig.editAttributes.showDisplayOrderInput&&!V.includes(null==o?void 0:o.claimURI)&&S&&!ce&&s.createElement(x.gN.Input,{ariaLabel:"displayOrder",inputType:"default",name:"displayOrder",type:"number",min:"0",label:Se("claims:local.forms.displayOrder.label"),required:!1,placeholder:Se("claims:local.forms.displayOrder.placeholder"),value:(null==o?void 0:o.displayOrder.toString())||0,maxLength:50,minLength:1,ref:re,"data-testid":"".concat(p,"-form-display-order-input"),hint:Se("claims:local.forms.displayOrderHint"),readOnly:Re}),o&&!V.includes(null==o?void 0:o.claimURI)&&_.attributeConfig.editAttributes.showRequiredCheckBox&&o.claimURI!==P.Q.GROUPS_CLAIM_URI&&!ce&&J&&s.createElement(x.gN.Checkbox,k({ariaLabel:"required",name:"required",required:!1,requiredErrorMessage:"",label:Se("claims:local.forms.required.label"),"data-testid":"".concat(p,"-form-required-checkbox"),readOnly:Re,hint:Se("claims:local.forms.requiredHint"),listen:function(e){E(e)},disabled:H||!W||ve&&Ee&&(null==o?void 0:o.claimURI)===P.Q.EMAIL_CLAIM_URI&&"true"===(null==de?void 0:de.enableValidator)},H?{value:!1}:{defaultValue:null==o?void 0:o.required})),ve&&!V.includes(null==o?void 0:o.claimURI)&&Ee&&"true"===(null==de?void 0:de.enableValidator)&&(null==o?void 0:o.claimURI)===P.Q.EMAIL_CLAIM_URI&&s.createElement(c.v0,{info:!0},s.createElement(f.Z,{name:"info circle"}),Se("claims:local.forms.requiredWarning")),o&&!V.includes(null==o?void 0:o.claimURI)&&o.claimURI!==P.Q.USER_ID_CLAIM_URI&&o.claimURI!==P.Q.USER_NAME_CLAIM_URI&&o.claimURI!==P.Q.GROUPS_CLAIM_URI&&o.claimURI!==P.Q.EMAIL_CLAIM_URI&&!ce&&J&&s.createElement(x.gN.Checkbox,{ariaLabel:"readOnly",name:"readOnly",required:!1,label:Se("claims:local.forms.readOnly.label"),requiredErrorMessage:"",defaultValue:null==o?void 0:o.readOnly,"data-testid":"".concat(p,"-form-readonly-checkbox"),readOnly:Re,hint:Se("claims:local.forms.readOnlyHint"),listen:function(e){G(e)},disabled:!W}),!ce&&s.createElement(r.di,{when:null==le||null===(t=le.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update},s.createElement(x.gN.Button,{form:q,ariaLabel:"submit",size:"small",buttonType:"primary_btn",loading:F,disabled:F,label:Se("common:update"),name:"submit"})))),s.createElement(L.Z,{hidden:!0}),_.attributeConfig.editAttributes.showDangerZone&&!V.includes(null==o?void 0:o.claimURI)&&!ce&&o.claimURI!==P.Q.EMAIL_CLAIM_URI&&s.createElement(r.di,{when:null==le||null===(n=le.attributeDialects)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.delete},s.createElement(c.v9,{sectionHeader:Se("common:dangerZone"),"data-testid":"".concat(p,"-danger-zone-group")},s.createElement(c.cN,{actionTitle:Se("claims:local.dangerZone.actionTitle"),header:Se("claims:local.dangerZone.header"),subheader:Se("claims:local.dangerZone.subheader"),onActionClick:function(){return A(!0)},"data-testid":"".concat(p,"-local-claim-delete-danger-zone")}))))};H.defaultProps={"data-testid":"local-claims-basic-details-edit"};var G=n(97474);function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){X(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e,t,n){var r;return r=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==$(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ee=function(e){var t,n=e.claim,u=e.update,f=e["data-testid"],p=(0,m.I0)(),g=K((0,s.useState)([]),2),y=g[0],b=g[1],E=K((0,s.useState)(!1),2),C=E[0],S=E[1],I=K((0,o.cC)(),2),w=I[0],R=I[1],A=(0,d.$)().t,x=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),U=(0,m.v9)((function(e){return e.config.ui.features}));(0,s.useEffect)((function(){var e=[];e.push({id:"PRIMARY",name:"PRIMARY"}),(0,G.ow)().then((function(t){e.push.apply(e,W(t.data)),b(e)})).catch((function(){b(e)}))}),[]);var O=(0,s.useMemo)((function(){var e;return!(0,i.Xr)(null==U?void 0:U.attributeDialects,null==U||null===(e=U.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,x)}),[U,x]);return s.createElement(c.pJ,{padded:"very"},s.createElement(h.Z,{"data-testid":f},s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{tablet:16,computer:12,largeScreen:9,widescreen:6,mobile:16},s.createElement("p",null,A("claims:local.mappedAttributes.hint")),s.createElement(L.Z,{hidden:!0}),s.createElement(o.Es,{submitState:w,onSubmit:function(e){var t=B({},n);delete t.id,delete t.dialectURI;var r=B(B({},t),{},{attributeMapping:Array.from(e).map((function(e){var t=K(e,2),n=t[0];return{mappedAttribute:t[1].toString(),userstore:n.toString()}}))});S(!0),(0,v.iC)(n.id,r).then((function(){p((0,l.V_)({description:A("claims:local.notifications.updateClaim.success.description"),level:a.QU.SUCCESS,message:A("claims:local.notifications.updateClaim.success.message")})),u()})).catch((function(e){p((0,l.V_)({description:(null==e?void 0:e.description)||A("claims:local.notifications.updateClaim.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||A("claims:local.notifications.updateClaim.genericError.message")}))})).finally((function(){S(!1)}))}},s.createElement(h.Z,null,y.map((function(e,t){var r;return s.createElement(h.Z.Row,{columns:2,key:t},s.createElement(h.Z.Column,{width:4},e.name),s.createElement(h.Z.Column,{width:12},s.createElement(o.gN,{type:"text",name:e.name,placeholder:A("claims:local.forms.attribute.placeholder"),required:!0,requiredErrorMessage:A("claims:local.forms.attribute.requiredErrorMessage"),value:null==n||null===(r=n.attributeMapping)||void 0===r||null===(r=r.find((function(t){return t.userstore.toLowerCase()===e.name.toLowerCase()})))||void 0===r?void 0:r.mappedAttribute,"data-testid":"".concat(f,"-form-store-name-input"),readOnly:O})))})))))),s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:8},s.createElement(r.di,{when:null==U||null===(t=U.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update},s.createElement(c.KM,{onClick:function(){R()},"data-testid":"".concat(f,"-form-submit-button"),loading:C,disabled:C},A("common:update")))))))};ee.defaultProps={"data-testid":"edit-local-claims-mapped-attributes"};var te=n(43227);function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=function(e){var t,n,r=e.dialect,i=e.attributeType,u=e.onUpdate,f=e["data-testid"],p=(0,m.I0)(),g=(0,d.$)().t,y=(0,m.v9)((function(e){return e.config})),b=ne((0,s.useState)(!1),2),E=b[0],C=b[1];return s.createElement(h.Z,null,s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:6},s.createElement(o.Es,{onSubmit:function(e){var t=e.get("dialectURI").toString();C(!0),(0,v.sD)(r.id,t).then((function(){p((0,l.V_)({description:g("claims:dialects.notifications.updateDialect.success.description"),level:a.QU.SUCCESS,message:g("claims:dialects.notifications.updateDialect.success.message")})),u(window.btoa(t).replace(/=/g,""))})).catch((function(e){p((0,l.V_)({description:(null==e?void 0:e.description)||g("claims:dialects.notifications.updateDialect.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||g("claims:dialects.notifications.updateDialect.genericError.message")}))})).finally((function(){C(!1)}))}},s.createElement(o.gN,{type:"text",placeholder:g("claims:dialects.forms.dialectURI.placeholder",{type:(0,te.i)(i,!0)}),value:null==r?void 0:r.dialectURI,required:!0,readOnly:!1===(null===(t=y.ui)||void 0===t?void 0:t.isDefaultDialectEditingEnabled)&&P.Q.DEFAULT_DIALECTS.includes(null==r?void 0:r.id),requiredErrorMessage:g("claims:dialects.forms.dialectURI.requiredErrorMessage"),label:g("claims:dialects.forms.dialectURI.label"),name:"dialectURI","data-testid":"".concat(f,"-form-dialect-uri-input")}),!1===(null===(n=y.ui)||void 0===n?void 0:n.isDefaultDialectEditingEnabled)&&P.Q.DEFAULT_DIALECTS.includes(null==r?void 0:r.id)?null:s.createElement(s.Fragment,null,s.createElement(L.Z,{hidden:!0}),s.createElement(c.KM,{type:"submit","data-testid":"".concat(f,"-form-submit-button"),loading:E,disabled:E},g("claims:dialects.forms.submit")))))))};function ae(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ie.defaultProps={attributeType:P.Q.OTHERS,"data-testid":"edit-dialect-details"};var ue=function(e){var t,n=e.claimID,r=e.update,i=e.dialectID,u=e.submit,f=e.claimURI,p=e.wizard,g=e.onSubmit,y=e.addedClaim,b=e.externalClaims,E=e.attributeType,C=e["data-testid"],S=le((0,s.useState)(),2),I=S[0],w=S[1],R=le((0,s.useState)(null),2),A=R[0],x=R[1],U=le((0,s.useState)(),2),O=U[0],L=U[1],_=le((0,s.useState)(!1),2),T=_[0],D=_[1],Z=(0,m.I0)(),N=(0,m.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),j=(0,d.$)().t;(0,s.useEffect)((function(){D(!0);var e={"exclude-identity-claims":!N,filter:null,limit:null,offset:null,sort:null};(0,v.WN)(e).then((function(e){D(!1),w((0,M.fS)(e,"displayName",!0))})).catch((function(e){var t,n;Z((0,l.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||j("claims:local.notifications.getClaims.genericError.description"),level:a.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||j("claims:local.notifications.getClaims.genericError.message")}))})),p||(0,v.g0)(i,n).then((function(e){x(e)})).catch((function(e){var t,n;Z((0,l.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||j("claims:external.notifications.getExternalAttribute.genericError.description",{type:(0,te.i)(E)}),level:a.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||j("claims:external.notifications.getExternalAttribute.genericError.message")}))}))}),[]),(0,s.useEffect)((function(){if(b&&I&&(A||y)){var e=ae(I);b.forEach((function(t){e=ae(k(t.mappedLocalClaimURI,e))})),e.unshift(Q()),L(e)}}),[b,I,A,y]);var P,k=function(e,t){var n=t||I;return null==n?void 0:n.filter((function(t){return t.claimURI!==e}))},Q=function(){return I.find((function(e){return p?(null==e?void 0:e.claimURI)===(null==y?void 0:y.mappedLocalClaimURI):(null==e?void 0:e.claimURI)===(null==A?void 0:A.mappedLocalClaimURI)}))};return s.createElement(o.Es,{onSubmit:function(e){p?(g(function(e){var t=y.claimURI.split(":");if(t.length>1){var n=t.filter((function(e,n){return n<t.length-1})).join(":")+":"+e.get("claimURI");e.set("claimURI",n)}return e}(e)),r()):(0,v.DW)(i,n,{claimURI:f,mappedLocalClaimURI:e.get("localClaim").toString()}).then((function(){Z((0,l.V_)({description:j("claims:external.notifications.updateExternalAttribute.success.description",{type:(0,te.i)(E)}),level:a.QU.SUCCESS,message:j("claims:external.notifications.updateExternalAttribute.success.message",{type:(0,te.i)(E)})})),r()})).catch((function(e){var t,n;Z((0,l.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||j("claims:external.notifications.updateExternalAttribute.genericError.description",{type:(0,te.i)(E)}),level:a.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||j("claims:external.notifications.updateExternalAttribute.genericError.message")}))}))},submitState:u},s.createElement(h.Z,null,s.createElement(h.Z.Row,{columns:p?2:1},p&&s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{name:"claimURI",label:j("claims:external.forms.attributeURI.label",{type:(0,te.i)(E,!0)}),required:!0,requiredErrorMessage:j("claims:external.forms.attributeURI.label",{type:(0,te.i)(E,!0)}),placeholder:j("claims:external.forms.attributeURI.label",{type:(0,te.i)(E)}),type:"text",value:(P=y.claimURI.split(":"),P.length>1?P[P.length-1]:y.claimURI),"data-testid":"".concat(C,"-form-claim-uri-input"),validation:function(e,t){var n,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=oe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw a}}}}(b);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(j("claims:external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,te.i)(E)}));break}}}catch(i){r.e(i)}finally{r.f()}}})),s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{type:"dropdown",name:"localClaim",label:j("claims:external.forms.localAttribute.label"),required:!0,requiredErrorMessage:j("claims:external.forms.localAttribute.requiredErrorMessage"),placeholder:j("claims:external.forms.attributeURI.placeholder"),search:!0,loading:T,value:p?y.mappedLocalClaimURI:null==A?void 0:A.mappedLocalClaimURI,children:null!==(t=null==O?void 0:O.map((function(e,t){return{key:t,text:s.createElement("div",{className:"multiline"},null==e?void 0:e.displayName,s.createElement(c.EK,{className:"description",compact:!0,withBackground:!1},null==e?void 0:e.claimURI)),value:null==e?void 0:e.claimURI}})))&&void 0!==t?t:[],"data-testid":"".concat(C,"-local-claim-dropdown")})))))};ue.defaultProps={attributeType:P.Q.OTHERS,"data-testid":"edit-external-claim"};var se=n(2659),de=n(34936),me=n(47018),fe=n(37077),pe=n(95165);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function he(){he=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,l=Object.create(a.prototype),o=new L(r||[]);return i(l,"_invoke",{value:A(e,n,o)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var m="suspendedStart",f="suspendedYield",p="executing",g="completed",h={};function v(){}function y(){}function b(){}var E={};u(E,l,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(M([])));S&&S!==n&&r.call(S,l)&&(E=S);var I=b.prototype=v.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(i,a,l,o){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==ge(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,o)}))}o(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=m;return function(a,l){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===a)throw l;return{value:e,done:!0}}for(r.method=a,r.arg=l;;){var o=r.delegate;if(o){var c=x(o,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?g:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var l=a.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ge(t)+" is not iterable")}return y.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(R.prototype),u(R.prototype,o,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var l=new R(s(e,n,r,i),a);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(I),u(I,c,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(c&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function ve(e,t,n,r,i,a,l){try{var o=e[a](l),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,i)}function ye(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){ve(a,r,i,l,o,"next",e)}function o(e){ve(a,r,i,l,o,"throw",e)}l(void 0)}))}}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ce=function(e){var t,n,r,i,a,l,u,m,p,g=e.submitState,v=e.onSubmit,y=e.values,b=e.claimURIBase,E=e.validateMapping,C=e.setValidateMapping,S=e["data-testid"],I=be((0,s.useState)(""),2),w=I[0],R=I[1],A=be((0,s.useState)(!1),2),x=A[0],U=A[1],O=be((0,s.useState)(!1),2),L=O[0],T=O[1],D=be((0,s.useState)(!1),2),Z=D[0],N=D[1],j=be((0,s.useState)(!1),2),k=j[0],Q=j[1],z=be((0,s.useState)(!1),2),q=z[0],V=z[1],H=be((0,s.useState)(!1),2),G=H[0],$=H[1],F=be((0,s.useState)(!1),2),B=F[0],X=F[1],W=be((0,s.useState)(!0),2),K=W[0],Y=W[1],J=be((0,s.useState)(!0),2),ee=J[0],te=J[1],ne=be((0,s.useState)(!1),2),re=ne[0],ie=ne[1],ae=be((0,s.useState)(null==y||null===(t=y.get("oidc"))||void 0===t?void 0:t.toString()),2),le=ae[0],oe=ae[1],ce=be((0,s.useState)(null==y||null===(n=y.get("scim"))||void 0===n?void 0:n.toString()),2),ue=ce[0],se=ce[1],de=be((0,s.useState)(!1),2),me=de[0],ge=de[1],ve=(0,s.useRef)(null),Ee=(0,s.useRef)(null),Ce=(0,s.useRef)(null),Se=(0,s.useRef)(null),Ie=(0,s.useRef)(null),we=(0,s.useRef)(null),Re=(0,s.useRef)(null),Ae=(0,s.useRef)(null),xe=(0,d.$)().t;(0,s.useEffect)((function(){var e,t;U((null==y||null===(e=y.get("supportedByDefault"))||void 0===e?void 0:e.length)>0),R(null==y||null===(t=y.get("claimURI"))||void 0===t?void 0:t.toString())}),[y]),(0,s.useEffect)((function(){if(!ee||!K){var e=Ee.current.children[0].children[1].children[0];e.focus(),e.blur(),Y(!0),te(!0)}}),[ee,K]);var Ue=function(e,t){t.current=setTimeout((function(){return e(!0)}),500)},Oe=function(e,t){clearTimeout(t.current),e(!1)};return s.createElement(o.Es,{onSubmit:function(e){var t,n,r,i,a,l,o={claimURI:b+"/"+e.get("claimURI").toString().trim(),description:null===(t=e.get("description"))||void 0===t?void 0:t.toString(),displayName:e.get("name").toString(),displayOrder:e.get("displayOrder")?parseInt(null===(n=e.get("displayOrder"))||void 0===n?void 0:n.toString()):0,readOnly:(null===(r=e.get("readOnly"))||void 0===r?void 0:r.length)>0,regEx:null===(i=e.get("regularExpression"))||void 0===i?void 0:i.toString(),required:(null===(a=e.get("required"))||void 0===a?void 0:a.length)>0,supportedByDefault:(null===(l=e.get("supportedByDefault"))||void 0===l?void 0:l.length)>0};if(_.attributeConfig.localAttributes.createWizard.customWIzard){if(re)return;if(""===le)return;""!==ue&&e.set("scim",ue),e.set("oidc",le)}K&&ee&&!E&&v(o,e)},submitState:g},s.createElement(h.Z,null,_.attributeConfig.localAttributes.createWizard.customWIzard&&s.createElement(s.Fragment,null,s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{type:"text",name:"claimURI",label:xe("claims:local.forms.attributeID.label"),className:"mb-1",required:!0,requiredErrorMessage:xe("claims:local.forms.attributeID.requiredErrorMessage"),placeholder:xe("claims:local.forms.attributeID.placeholder"),value:null==y||null===(r=y.get("claimURI"))||void 0===r?void 0:r.toString(),maxLength:30,loading:E,listen:function(e){R(e.get("claimURI").toString()),oe(e.get("claimURI").toString().replace(/\./g,"")),se(e.get("claimURI").toString().replace(/\./g,"")),ge(!1)},onMouseOver:function(){Ue(N,we)},onMouseOut:function(){Oe(N,we)},validation:function(e,t){if(""===e)return Y(!0),void te(!0);var n=!0;return(!e.match(/^\w+$/)||e.length>30)&&(n=!1),n?K&&ee?(C(!0),void(_.attributeConfig.localAttributes.createWizard.checkOIDCAvailability&&_.attributeConfig.localAttributes.checkAttributeNameAvailability(e,"BOTH").then((function(e){C(!1),e.has("SCIM")&&te(e.get("SCIM")),e.has("OIDC")&&Y(e.get("OIDC"))})))):(t.isValid=!1,void t.errorMessages.push(xe("claims:dialects.forms.fields.attributeName.validation.alreadyExists"))):(t.isValid=!1,void t.errorMessages.push(xe("claims:dialects.forms.fields.attributeName.validation.invalid")))},ref:Ee,"data-testid":"".concat(S,"-form-claim-uri-input")}),s.createElement(c.GI,{content:xe("claims:local.forms.attributeHint"),inverted:!0,open:Z,onClose:function(){Oe(N,we)},position:"bottom left",context:Ee}),s.createElement(fe.Z,{className:"mb-3 ml-0"},s.createElement("em",null,"Attribute URI"),":\xa0","".concat(b,"/").concat(w||""))),s.createElement(h.Z.Column,{width:16},s.createElement(pe.Z,{fluid:!0},s.createElement(pe.Z.Content,null,s.createElement(pe.Z.Header,{className:"mb-2"},xe("extensions:manage.attributes.generatedAttributeMapping.title")),s.createElement(pe.Z.Meta,{className:"mb-5"},xe("extensions:manage.attributes.generatedAttributeMapping.description")),s.createElement(pe.Z.Description,{className:"mt-1 mb-1"},B&&s.createElement(c.v0,{className:"mb-4",size:"tiny",type:"error",content:"The SCIM mapping value entered contains illegal characters. Only alphabets, numbers, `_` are allowed."}),G&&s.createElement(c.v0,{className:"mb-4",size:"tiny",type:"error",content:"The OpenID Connect mapping value entered contains illegal characters. Only alphabets, numbers, `#`, and `_` are allowed."}),s.createElement(h.Z,{verticalAlign:"middle"},s.createElement(h.Z.Row,{columns:2},s.createElement(h.Z.Column,{width:5},s.createElement(c.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,M.r2)().oidc,spaced:"right",size:"micro",floated:"left"}),s.createElement("span",null,xe("extensions:manage.attributes.generatedAttributeMapping.OIDCProtocol"))),s.createElement(h.Z.Column,{width:11},s.createElement(c._D,{maxLength:30,text:le,validation:"^[A-za-z0-9#_]+$",errorHandler:function(e){$(e)},onEdit:function(e){ie(e)},onChangesSaved:function(){var e=ye(he().mark((function e(t){return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return oe(t),e.next=4,_.attributeConfig.localAttributes.checkAttributeNameAvailability(t,"OIDC").then((function(e){Y(e.get("OIDC"))}));case 4:$(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))),!me&&s.createElement(h.Z.Row,{columns:3},s.createElement(h.Z.Column,{width:3},s.createElement(c.dn,{transparent:!0,verticalAlign:"middle",rounded:!0,icon:(0,M.r2)().scim,spaced:"right",size:"micro",floated:"left"}),s.createElement("span",null,xe("extensions:manage.attributes.generatedAttributeMapping.SCIMProtocol"))),s.createElement(h.Z.Column,{width:11},s.createElement(c._D,{maxLength:30,textPrefix:"urn:scim:wso2:schema:",validation:"^[a-zA-Z0-9_.-]*$",errorHandler:function(e){X(e)},onEdit:function(e){ie(e)},onChangesSaved:function(){var e=ye(he().mark((function e(t){return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return se(t),e.next=4,_.attributeConfig.localAttributes.checkAttributeNameAvailability(t,"SCIM").then((function(e){te(e.get("SCIM"))}));case 4:X(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),text:ue})),s.createElement(h.Z.Column,{width:2},ue?s.createElement(c.GI,{trigger:s.createElement(f.Z,{name:"trash alternate",link:!0,onClick:function(){se(""),ge(!0)}}),content:"Remove Mapping",position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}):null))))))))),s.createElement(h.Z.Row,{columns:_.attributeConfig.localAttributes.createWizard.customWIzard?1:2},s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{onMouseOver:function(){Ue(T,Ie)},onMouseOut:function(){Oe(T,Ie)},type:"text",name:"name",label:xe("claims:local.forms.name.label"),required:!0,requiredErrorMessage:xe("claims:local.forms.name.requiredErrorMessage"),placeholder:xe("claims:local.forms.name.placeholder"),value:null==y||null===(i=y.get("name"))||void 0===i?void 0:i.toString(),maxLength:30,ref:ve,"data-testid":"".concat(S,"-form-name-input")}),s.createElement(c.GI,{content:xe("claims:local.forms.nameHint"),inverted:!0,open:L,trigger:s.createElement("span",null),onClose:function(){Oe(T,Ie)},position:"bottom left",context:ve}),_.attributeConfig.localAttributes.createWizard.customWIzard&&s.createElement(c.kW,null,xe("extensions:manage.attributes.displayNameHint"))),!_.attributeConfig.localAttributes.createWizard.customWIzard&&s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{type:"text",name:"claimURI",label:xe("claims:local.forms.attributeID.label"),required:!0,requiredErrorMessage:xe("claims:local.forms.attributeID.requiredErrorMessage"),placeholder:xe("claims:local.forms.attributeID.placeholder"),value:null==y||null===(a=y.get("claimURI"))||void 0===a?void 0:a.toString(),maxLength:30,listen:function(e){R(e.get("claimURI").toString())},onMouseOver:function(){Ue(N,we)},onMouseOut:function(){Oe(N,we)},ref:Ee,"data-testid":"".concat(S,"-form-claim-uri-input")}),s.createElement(c.GI,{content:xe("claims:local.forms.attributeHint"),inverted:!0,open:Z,trigger:s.createElement("p",null),onClose:function(){Oe(N,we)},position:"bottom left",context:Ee}),w?s.createElement(fe.Z,null,s.createElement("em",null,"Attribute URI"),":\xa0",b+"/"+w):null)),s.createElement(h.Z.Row,{columns:2},!_.attributeConfig.localAttributes.createWizard.showOnlyMandatory&&s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{type:"textarea",name:"description",label:xe("claims:local.forms.description.label"),required:!1,requiredErrorMessage:"",placeholder:xe("claims:local.forms.description.placeholder"),value:null==y||null===(l=y.get("description"))||void 0===l?void 0:l.toString(),"data-testid":"".concat(S,"-form-description-input")})),!_.attributeConfig.localAttributes.createWizard.showOnlyMandatory||!_.attributeConfig.localAttributes.createWizard.showRegularExpression&&s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{type:"text",name:"regularExpression",label:xe("claims:local.forms.regEx.label"),required:!1,requiredErrorMessage:"",placeholder:xe("claims:local.forms.regEx.placeholder"),value:null==y||null===(u=y.get("regularExpression"))||void 0===u?void 0:u.toString(),onMouseOver:function(){Ue(Q,Re)},onMouseOut:function(){Oe(Q,Re)},ref:Ce,"data-testid":"".concat(S,"-form-regex-input"),maxLength:P.Q.REGEX_FIELD_MAX_LENGTH,minLength:P.Q.REGEX_FIELD_MIN_LENGTH}),s.createElement(c.GI,{content:xe("claims:local.forms.regExHint"),inverted:!0,open:k,trigger:s.createElement("span",null),onClose:function(){Oe(Q,Re)},position:"bottom left",context:Ce}))),!_.attributeConfig.localAttributes.createWizard.showOnlyMandatory&&s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:16},s.createElement(o.gN,{type:"checkbox",name:"supportedByDefault",required:!1,requiredErrorMessage:"",children:[{label:xe("claims:local.forms.supportedByDefault.label"),value:"Support"}],value:null==y?void 0:y.get("supportedByDefault"),listen:function(e){U((null==e?void 0:e.get("supportedByDefault").length)>0)},"data-testid":"".concat(S,"-form-supported-by-default-checkbox")}))),x&&_.attributeConfig.localAttributes.createWizard.showDisplayOrder&&s.createElement(h.Z.Row,{columns:16},s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{type:"number",min:"0",name:"displayOrder",label:xe("claims:local.forms.displayOrder.label"),required:!1,requiredErrorMessage:"",placeholder:xe("claims:local.forms.displayOrder.placeholder"),value:null!==(m=null==y||null===(p=y.get("displayOrder"))||void 0===p?void 0:p.toString())&&void 0!==m?m:"0",onMouseOver:function(){Ue(V,Ae)},onMouseOut:function(){Oe(V,Ae)},ref:Se,"data-testid":"".concat(S,"-form-display-order-input")}),s.createElement(c.GI,{content:xe("claims:local.forms.displayOrderHint"),inverted:!0,open:q,trigger:s.createElement("span",null),onClose:function(){Oe(V,Ae)},position:"bottom left",context:Se}))),!_.attributeConfig.localAttributes.createWizard.showOnlyMandatory&&s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:16},s.createElement(o.gN,{type:"checkbox",name:"required",required:!1,requiredErrorMessage:"",children:[{label:xe("claims:local.forms.required.label"),value:"Required"}],value:null==y?void 0:y.get("required"),"data-testid":"".concat(S,"-form-required-checkbox")}))),!_.attributeConfig.localAttributes.createWizard.showOnlyMandatory||_.attributeConfig.localAttributes.createWizard.showReadOnlyAttribute&&s.createElement(h.Z.Row,{column:1},s.createElement(h.Z.Column,null,s.createElement(o.gN,{type:"checkbox",name:"readOnly",required:!1,requiredErrorMessage:"",children:[{label:xe("claims:local.forms.readOnly.label"),value:"ReadOnly"}],value:null==y?void 0:y.get("readOnly"),"data-testid":"".concat(S,"-form-readonly-checkbox")})))))};function Se(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||we(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||we(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){if(e){if("string"==typeof e)return Re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Re(e,t):void 0}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ce.defaultProps={currentStep:0,"data-testid":"local-claim-basic-details-form"};var Ae=function(e){var t=e.onSubmit,n=e.submitState,r=e.values,i=e["data-testid"],a=Ie((0,s.useState)([]),2),l=a[0],c=a[1],u=(0,m.v9)((function(e){return e.config.ui.hiddenUserStores})),f=(0,d.$)().t;return(0,s.useEffect)((function(){var e=[];_.attributeConfig.localAttributes.createWizard.showPrimaryUserStore&&e.push({description:"",enabled:!0,id:"PRIMARY",name:"PRIMARY",self:""}),(0,G.ow)().then((function(t){u&&u.length>0?t.data.map((function(t){u.length>0&&!u.includes(t.name)&&e.push(t)})):e.push.apply(e,Se(t.data)),c(e)})).catch((function(){c(e)}))}),[]),s.createElement(h.Z,{"data-testid":i},s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:14},s.createElement("h4",null,f("claims:local.wizard.steps.mapAttributes")),s.createElement("p",null,f("claims:local.mappedAttributes.hint")),s.createElement(L.Z,{hidden:!0}),s.createElement(L.Z,{hidden:!0}),s.createElement(o.Es,{submitState:n,onSubmit:function(e){var n={attributeMapping:Array.from(e).map((function(e){var t=Ie(e,2),n=t[0];return{mappedAttribute:t[1],userstore:n}}))};t(n,e)}},s.createElement(h.Z,null,l.map((function(e,t){var n;return s.createElement(s.Fragment,null,(null==e?void 0:e.enabled)&&s.createElement(h.Z.Row,{columns:2,key:t},s.createElement(h.Z.Column,{className:"centered-text",width:4},e.name),s.createElement(h.Z.Column,{width:12},s.createElement(o.gN,{type:"text",name:e.name,placeholder:f("claims:local.forms.attribute.placeholder"),required:!0,requiredErrorMessage:f("claims:local.forms.attribute.requiredErrorMessage"),value:null==r||null===(n=r.get(e.name))||void 0===n?void 0:n.toString(),"data-testid":"".concat(i,"-form-store-name-input")}))))})))))))};Ae.defaultProps={"data-testid":"mapped-attributes"};var xe=n(73432),Ue=n(66528),Oe=function(e){var t,n=e.data,r=e["data-testid"],i=(0,d.$)().t,a=function(e,t){return s.createElement(h.Z.Row,{className:"summary-field",columns:2},s.createElement(h.Z.Column,{mobile:16,tablet:8,computer:7,textAlign:"right"},s.createElement("div",{className:"label"},e)),s.createElement(h.Z.Column,{mobile:16,tablet:8,computer:8,textAlign:"left"},s.createElement("div",{className:"value"},t)))},l=function(e){return s.createElement(xe.Z.Item,null,s.createElement(fe.Z,{basic:!0,circular:!0},e))};return s.createElement(h.Z,{className:"wizard-summary","data-testid":r},s.createElement(h.Z.Row,null,s.createElement(h.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},s.createElement("div",{className:"general-details"},s.createElement("h3",null,n.displayName),s.createElement("div",{className:"description"},n.description)))),s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{textAlign:"center"},s.createElement(xe.Z,null,n.supportedByDefault&&l(i("claims:local.wizard.summary.supportedByDefault")),n.required&&l(i("claims:local.wizard.summary.required")),n.readOnly&&l(i("claims:local.wizard.summary.readOnly"))))),n.claimURI?a(i("claims:local.wizard.summary.attributeURI"),s.createElement(O.Z.Field,null,s.createElement(c.OR,{value:n?null==n?void 0:n.claimURI:""}))):null,n.displayOrder?a(i("claims:local.wizard.summary.displayOrder"),n.displayOrder):null,n.regEx?a(i("claims:local.wizard.summary.regEx"),n.regEx):null,(null===(t=n.attributeMapping)||void 0===t?void 0:t.length)>0?a("Mapped attributes",s.createElement(Ue.Z,null,s.createElement(Ue.Z.Header,null,s.createElement(Ue.Z.Row,null,s.createElement(Ue.Z.HeaderCell,null,i("claims:local.wizard.summary.userstore")),s.createElement(Ue.Z.HeaderCell,null,i("claims:local.wizard.summary.attribute")))),s.createElement(Ue.Z.Body,null,n.attributeMapping.map((function(e,t){return s.createElement(Ue.Z.Row,{key:t,columns:2},s.createElement(Ue.Z.Cell,null,e.userstore),s.createElement(Ue.Z.Cell,null,e.mappedAttribute))}))))):null)};Oe.defaultProps={"data-testid":"local-claims-summary"};var Le=n(71827),Me=function(e){var t,n=e.submitState,r=e.onSubmit,i=e.values,a=e["data-testid"],l=(0,d.$)().t;return s.createElement(o.Es,{onSubmit:function(e){r(e)},submitState:n},s.createElement(o.gN,{type:"text",name:"dialectURI",label:l("claims:dialects.forms.dialectURI.label",{type:(0,Le.i)(P.Q.OTHERS,!0)}),required:!0,requiredErrorMessage:l("claims:dialects.forms.dialectURI.requiredErrorMessage"),placeholder:l("claims:dialects.forms.dialectURI.placeholder"),value:null==i||null===(t=i.get("dialectURI"))||void 0===t?void 0:t.toString(),"data-testid":"".concat(a,"-form-dialect-uri-input")}))};Me.defaultProps={"data-testid":"dialect-details"};var _e=n(20803),Te=n(3148),De=n(93092),Ze=n(45408),Ne=n(7683);const je=(0,De.Z)((function(e,t){var n=(0,Ne.Z)(t);return(0,Ze.Z)(n)&&(n=void 0),(0,Ze.Z)(e)?(0,_e.Z)(e,(0,Te.Z)(t,1,Ze.Z,!0),void 0,n):[]}));var Pe=n(74343),ke=n(12647),Qe=n(86769),ze=function(){return{general:Qe.r}},qe=function(){return{general:Qe.r}};function Ve(e){return Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ve(e)}function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){$e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e,t,n){var r;return r=function(e,t){if("object"!=Ve(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ve(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ve(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(){Fe=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,l=Object.create(a.prototype),o=new L(r||[]);return i(l,"_invoke",{value:A(e,n,o)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var m="suspendedStart",f="suspendedYield",p="executing",g="completed",h={};function v(){}function y(){}function b(){}var E={};u(E,l,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(M([])));S&&S!==n&&r.call(S,l)&&(E=S);var I=b.prototype=v.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(i,a,l,o){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Ve(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,o)}))}o(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=m;return function(a,l){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===a)throw l;return{value:e,done:!0}}for(r.method=a,r.arg=l;;){var o=r.delegate;if(o){var c=x(o,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?g:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var l=a.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ve(t)+" is not iterable")}return y.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(R.prototype),u(R.prototype,o,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var l=new R(s(e,n,r,i),a);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(I),u(I,c,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(c&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Be(e,t,n,r,i,a,l){try{var o=e[a](l),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,i)}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ke=function(e){var t=e.open,n=e.onClose,r=e.update,i=e.claimURIBase,u=e["data-testid"],p=Xe((0,s.useState)(0),2),g=p[0],y=p[1],b=Xe((0,s.useState)(null),2),E=b[0],C=b[1],S=Xe((0,s.useState)(null),2),I=S[0],w=S[1],R=Xe((0,s.useState)(null),2),A=R[0],x=R[1],O=Xe((0,s.useState)(null),2),L=O[0],T=O[1],D=Xe((0,s.useState)(!1),2),N=D[0],j=D[1],k=Xe((0,s.useState)(!1),2),Q=k[0],z=k[1],q=Xe((0,s.useState)(!1),2),V=q[0],H=q[1],$=Xe((0,s.useState)(!1),2),F=$[0],B=$[1],X=Xe((0,s.useState)(!1),2),W=X[0],K=X[1],Y=Xe((0,s.useState)(null),2),J=Y[0],ee=Y[1],te=(0,s.useRef)(!1),ne=(0,m.v9)((function(e){return e.config.ui.hiddenUserStores})),re=Xe((0,o.cC)(),2),ie=re[0],ae=re[1],le=Xe((0,o.cC)(),2),oe=le[0],ce=le[1],ue=(0,m.I0)(),se=(0,d.$)().t,de=Xe((0,c.IK)(),3),fe=de[0],pe=de[1],ge=de[2],he=M.lD.getInstance(),ve=(0,G.zU)(null).data;(0,s.useEffect)((function(){var e=!1;ne&&ne.length>0?_.attributeConfig.localAttributes.isUserStoresHidden(ne).then((function(t){t.map((function(t){t.enabled&&(e=!0)})),j(t.length>0&&e)})):(null==ve?void 0:ve.length)>0?j(!0):j(!1)}),[ne,ve]),(0,s.useEffect)((function(){W&&F&&J&&(ke.m.push({pathname:Pe.$x.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",J),search:P.Q.NEW_LOCAL_CLAIM_URL_SEARCH_PARAM}),z(!1),n(),r())}),[W,F,J]);var ye=function(){var e,t=(e=Fe().mark((function e(t,i,o){return Fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.attributeConfig.localAttributes.createCustomDialect){e.next=3;break}return e.next=3,_.attributeConfig.localAttributes.isSCIMCustomDialectAvailable().then((function(e){""===e&&(0,v.CM)(_.attributeConfig.localAttributes.customDialectURI)}));case 3:z(!0),(0,v.ij)(t).then((function(e){if(he.publish("manage-attribute-add-new-attribute"),ue((0,l.V_)({description:se("claims:local.notifications.addLocalClaim.success.description"),level:a.QU.SUCCESS,message:se("claims:local.notifications.addLocalClaim.success.message")})),_.attributeConfig.localAttributes.mapClaimToCustomDialect&&i?(o?B(!0):_.attributeConfig.localAttributes.isSCIMCustomDialectAvailable().then((function(e){(0,v.wg)(e,{claimURI:"".concat(_.attributeConfig.localAttributes.customDialectURI,":").concat(i.get("scim")),mappedLocalClaimURI:t.claimURI}).then((function(){be()})).finally((function(){return B(!0)}))})),_.attributeConfig.localAttributes.getDialect(P.Q.OIDC_MAPPING[0]).then((function(e){(0,v.wg)(e.id,{claimURI:"".concat(i.get("oidc")),mappedLocalClaimURI:t.claimURI}).finally((function(){return K(!0)}))}))):(K(!0),B(!0)),(0,U.Z)(e.headers.location))n(),r(),z(!1);else{var c=e.headers.location,u=c.substring(c.lastIndexOf("/")+1);ee(u)}})).catch((function(e){z(!1),pe({description:(null==e?void 0:e.description)||se("claims:local.notifications.addLocalClaim.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||se("claims:local.notifications.addLocalClaim.genericError.message")})}));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){Be(a,r,i,l,o,"next",e)}function o(e){Be(a,r,i,l,o,"throw",e)}l(void 0)}))});return function(e,n,r){return t.apply(this,arguments)}}(),be=function(){ue((0,l.wu)(!0)),(0,Z.w7)().then((function(e){ue((0,l.Um)(e))})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description&&ue((0,l.V_)({description:e.response.data.description,level:a.QU.ERROR,message:se("console:manage.notifications.getProfileSchema.error.message")})),ue((0,l.V_)({description:se("console:manage.notifications.getProfileSchema.genericError.description"),level:a.QU.ERROR,message:se("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){ue((0,l.wu)(!1))}))},Ee=[{content:s.createElement(Ce,{submitState:ie,validateMapping:V,setValidateMapping:H,onSubmit:function(e,t){var n=Ge(Ge({},E),e),r=new Map;C(n),w(t),t.has("scim")?r.set("scim",t.get("scim").toString()):te.current=!0,t.has("oidc")&&r.set("oidc",t.get("oidc").toString()),T(r),_.attributeConfig.localAttributes.createWizard.identifyAsCustomAttrib&&(n.properties&&n.properties.length>0?n.properties.push({key:"USER_CUSTOM_ATTRIBUTE",value:"TRUE"}):n.properties=[{key:"USER_CUSTOM_ATTRIBUTE",value:"TRUE"}]),N?y(1):(n.attributeMapping=[{mappedAttribute:n.claimURI.split("/").pop(),userstore:"PRIMARY"}],ye(n,r,!(null==te||!te.current)))},values:I,claimURIBase:i,"data-testid":"".concat(u,"-local-claims-basic-details")}),icon:qe().general,title:se("claims:local.wizard.steps.general")},N?{content:s.createElement(Ae,{submitState:oe,onSubmit:function(e,t){var n=Ge(Ge({},E),e);C(n),x(t),_.attributeConfig.localAttributes.createWizard.showPrimaryUserStore||n.attributeMapping.push({mappedAttribute:n.claimURI.split("/").pop(),userstore:"PRIMARY"}),_.attributeConfig.localAttributes.createWizard.showSummary?y(2):ye(n,L,!(null==te||!te.current))},values:A,"data-testid":"".concat(u,"-mapped-attributes")}),icon:qe().general,title:se("claims:local.wizard.steps.mapAttributes")}:void 0,_.attributeConfig.localAttributes.createWizard.showSummary?{content:s.createElement(Oe,{data:E,"data-testid":"".concat(u,"-local-claims-summary")}),icon:qe().general,title:se("claims:local.wizard.steps.summary")}:void 0].filter((function(e){return void 0!==e})),Se=function(){if(1===Ee.length&&ae(),2===Ee.length)switch(g){case 0:ae();break;case 1:ce()}switch(g){case 0:ae();break;case 1:ce();break;case 2:ye(E,L,!(null==te||!te.current))}};return s.createElement(me.Z,{dimmer:"blurring",size:"small",className:"wizard application-create-wizard",open:t,onClose:n,"data-testid":u,closeOnDimmerClick:!1},s.createElement(me.Z.Header,{className:"wizard-header"},se("claims:local.wizard.header"),I&&I.get("name")?" - "+I.get("name"):""),Ee.length>1&&s.createElement(me.Z.Content,{className:"steps-container","data-testid":"".concat(u,"-steps")},s.createElement(c.Rg.Group,{current:g},Ee.map((function(e,t){return s.createElement(c.Rg.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(u,"-step-").concat(t)})})))),s.createElement(me.Z.Content,{className:"content-container",scrolling:!0},fe&&ge,Ee[g].content),s.createElement(me.Z.Actions,null,s.createElement(h.Z,null,s.createElement(h.Z.Row,{column:1},s.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},s.createElement(c.Qj,{floated:"left",onClick:function(){return n()}},"Cancel")),s.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},g<Ee.length-1&&s.createElement(c.KM,{floated:"right",onClick:Se,loading:V,"data-testid":"".concat(u,"-next-button")},se("common:next")," ",s.createElement(f.Z,{name:"arrow right"})),g===Ee.length-1&&s.createElement(c.KM,{floated:"right",onClick:Se,"data-testid":"".concat(u,"-finish-button"),loading:Q||V,disabled:Q},se("common:finish")),g>0&&s.createElement(c.Qj,{floated:"right",onClick:function(){y(g-1)},"data-testid":"".concat(u,"-previous-button")},s.createElement(f.Z,{name:"arrow left"})," ",se("common:previous")))))))};Ke.defaultProps={"data-testid":"add-local-claims-wizard"};var Ye=n(59673);function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function et(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=at(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw a}}}}function tt(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||at(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(){nt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},l=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,l=Object.create(a.prototype),o=new L(r||[]);return i(l,"_invoke",{value:A(e,n,o)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var m="suspendedStart",f="suspendedYield",p="executing",g="completed",h={};function v(){}function y(){}function b(){}var E={};u(E,l,(function(){return this}));var C=Object.getPrototypeOf,S=C&&C(C(M([])));S&&S!==n&&r.call(S,l)&&(E=S);var I=b.prototype=v.prototype=Object.create(E);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function R(e,t){function n(i,a,l,o){var c=d(e[i],e,a);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Je(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,o)}),(function(e){n("throw",e,l,o)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,o)}))}o(c.arg)}var a;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=m;return function(a,l){if(i===p)throw Error("Generator is already running");if(i===g){if("throw"===a)throw l;return{value:e,done:!0}}for(r.method=a,r.arg=l;;){var o=r.delegate;if(o){var c=x(o,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===m)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?g:f,u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=g,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var l=a.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function U(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(U,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Je(t)+" is not iterable")}return y.prototype=b,i(I,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},w(R.prototype),u(R.prototype,o,(function(){return this})),t.AsyncIterator=R,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var l=new R(s(e,n,r,i),a);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(I),u(I,c,"Generator"),u(I,l,(function(){return this})),u(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return o.type="throw",o.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var l=this.tryEntries[a],o=l.completion;if("root"===l.tryLoc)return i("end");if(l.tryLoc<=this.prev){var c=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(c&&u){if(this.prev<l.catchLoc)return i(l.catchLoc,!0);if(this.prev<l.finallyLoc)return i(l.finallyLoc)}else if(c){if(this.prev<l.catchLoc)return i(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return i(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var l=a?a.completion:{};return l.type=e,l.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function rt(e,t,n,r,i,a,l){try{var o=e[a](l),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,i)}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||at(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ot=function(e){var t,n,r=e.dialectId,i=e.update,u=e.wizard,f=e.onSubmit,p=e.externalClaims,g=e.triggerSubmit,y=e.attributeType,b=e.claimDialectUri,E=e.mappedLocalClaims,C=e.cancel,S=e["data-testid"],I=it((0,s.useState)(),2),w=I[0],R=I[1],A=it((0,s.useState)(),2),x=A[0],U=A[1],O=it((0,s.useState)(),2),L=O[0],T=O[1],D=it((0,s.useState)([]),2),Z=D[0],N=D[1],j=it((0,s.useState)(!1),2),k=j[0],Q=j[1],z=it((0,s.useState)(""),2),q=z[0],V=z[1],H=it((0,s.useState)(!0),2),G=H[0],$=H[1],F=it((0,s.useState)(!1),2),B=F[0],X=F[1],W=it((0,s.useState)(!1),2),K=W[0],Y=W[1],J=it((0,s.useState)(!0),2),ee=J[0],ne=J[1],re=it((0,s.useState)(!1),2),ie=re[0],ae=re[1],le=it((0,o.cC)(),2),oe=le[0],ce=le[1],ue=(0,m.I0)(),se=(0,m.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),de=(0,d.$)().t;(0,s.useEffect)((function(){"oidc"!==y&&b!==_.attributeConfig.localAttributes.customDialectURI&&(Z&&x&&0!==Z.length&&0!==x.length?Y(!1):Y(!0))}),[Z,x]),(0,s.useEffect)((function(){_.SCIMConfigs.serverSupportedClaimsAvailable.includes(b)&&0===(null==Z?void 0:Z.length)?ae(!0):ae(!1),"oidc"!==y&&b!==_.attributeConfig.localAttributes.customDialectURI?Z&&0!==Z.length?x&&0!==x.length?Y(!1):Y(!0):Y(!1):"oidc"===y||b!==_.attributeConfig.localAttributes.customDialectURI||x&&0!==x.length?Y(!1):Y(!0)}),[Z,x]),(0,s.useEffect)((function(){_.SCIMConfigs.serverSupportedClaimsAvailable.includes(b)?me().finally():ne(!1)}),[]);var me=function(){var e,t=(e=nt().mark((function e(){var t,n,i;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne(!0),e.prev=1,e.next=4,(0,v.jb)(r);case 4:t=e.sent,N(t.attributes),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),ue((0,l.V_)({description:(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)||de("claims:local.notifications.getClaims.genericError.description"),level:a.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(i=e.t0.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.message)||de("claims:local.notifications.getClaims.genericError.message")}));case 11:return e.prev=11,ne(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function l(e){rt(a,r,i,l,o,"next",e)}function o(e){rt(a,r,i,l,o,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();(0,s.useEffect)((function(){if(p&&p.length&&!ee){var e=new Set(p.map((function(e){return e.claimURI})));N(tt((null!=Z?Z:[]).filter((function(t){return!e.has(t)}))))}}),[p,ee]),(0,s.useEffect)((function(){var e={"exclude-identity-claims":!se,filter:null,limit:null,offset:null,sort:null};$(!0),(0,v.WN)(e).then((function(e){var t=e.sort((function(e,t){return e.displayName>t.displayName?1:-1}));R(t),T(t),$(!1)})).catch((function(e){var t,n;ue((0,l.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||de("claims:local.notifications.getClaims.genericError.description"),level:a.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||de("claims:local.notifications.getClaims.genericError.message")})),$(!1)}))}),[]),(0,s.useEffect)((function(){if(p&&w){var e=tt(w);null==E||E.forEach((function(t){e=tt(pe(t,e))})),T(e),U(e)}}),[p,k]),(0,s.useEffect)((function(){w&&Q(!0)}),[w]);var pe=function(e,t){var n=t||w;return null==n?void 0:n.filter((function(t){return t.claimURI!==e}))};return G&&ee?s.createElement(c.pO,null):s.createElement(o.Es,{onSubmit:function(e){u?(f(e),V(""),ce()):(X(!0),(0,v.wg)(r,{claimURI:e.get("claimURI").toString(),mappedLocalClaimURI:e.get("localClaim").toString()}).then((function(){ue((0,l.V_)({description:de("claims:external.notifications.addExternalAttribute.success.description",{type:(0,te.i)(y)}),level:a.QU.SUCCESS,message:de("claims:external.notifications.addExternalAttribute.success.message",{type:(0,te.i)(y,!0)})})),ce(),i(),!u&&C&&C()})).catch((function(e){ue((0,l.V_)({description:(null==e?void 0:e.description)||de("claims:external.notifications.addExternalAttribute.genericError.description",{type:(0,te.i)(y)}),level:a.QU.ERROR,message:(null==e?void 0:e.message)||de("claims:external.notifications.addExternalAttribute.genericError.message")}))})).finally((function(){X(!1)})))},resetState:oe,submitState:g},s.createElement(h.Z,null,s.createElement(h.Z.Row,{columns:2},s.createElement(h.Z.Column,{width:8},_.SCIMConfigs.serverSupportedClaimsAvailable.includes(b)?s.createElement(o.gN,{name:"claimURI",label:de("claims:external.forms.attributeURI.label",{type:(0,te.i)(y,!0)}),required:!0,requiredErrorMessage:de("claims:external.forms.attributeURI.requiredErrorMessage",{type:(0,te.i)(y,!0)}),placeholder:de("claims:external.forms.attributeURI.placeholder",{type:(0,te.i)(y)}),type:"dropdown","data-testid":"".concat(S,"-form-claim-uri-input"),listen:function(e){V(e.get("claimURI").toString())},validation:function(e,t){var n,r=et(p);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(de("claims:external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,te.i)(y)}));break}}}catch(i){r.e(i)}finally{r.f()}y===P.Q.OIDC&&(e.toString().match(/^[A-za-z0-9#_]+$/)||(t.isValid=!1,t.errorMessages.push(de("claims:external.forms.attributeURI.validationErrorMessages.invalidName",{type:(0,te.i)(y)}))))},children:null!==(t=null==Z?void 0:Z.map((function(e,t){return{key:t,text:e.split(":").pop(),value:e.split(":").pop()}})))&&void 0!==t?t:[]}):s.createElement(o.gN,{name:"claimURI",label:de("claims:external.forms.attributeURI.label",{type:(0,te.i)(y,!0)}),required:!0,requiredErrorMessage:de("claims:external.forms.attributeURI.requiredErrorMessage",{type:(0,te.i)(y,!0)}),placeholder:de("claims:external.forms.attributeURI.placeholder",{type:(0,te.i)(y)}),type:"text",listen:function(e){V(e.get("claimURI").toString())},maxLength:30,"data-testid":"".concat(S,"-form-claim-uri-input"),validation:function(e,t){var n,r=et(p);try{for(r.s();!(n=r.n()).done;){if(n.value.claimURI===e){t.isValid=!1,t.errorMessages.push(de("claims:external.forms.attributeURI.validationErrorMessages.duplicateName",{type:(0,te.i)(y)}));break}}}catch(i){r.e(i)}finally{r.f()}y===P.Q.OIDC&&(e.toString().match(/^[A-za-z0-9#_]+$/)||(t.isValid=!1,t.errorMessages.push(de("claims:external.forms.attributeURI.validationErrorMessages.invalidName",{type:(0,te.i)(y)}))))}})),s.createElement(h.Z.Column,{width:8},s.createElement(o.gN,{loading:G,type:"dropdown",name:"localClaim",label:de("claims:external.forms.localAttribute.label"),required:!0,requiredErrorMessage:de("claims:external.forms.localAttribute.requiredErrorMessage"),placeholder:de("claims:external.forms.localAttribute.placeholder"),search:function(e){return e},onSearchChange:function(e,t){var n=t.searchQuery,r=x.filter((function(e){return e.displayName.toLowerCase().includes(n.toLowerCase())}));T(r)},onClose:function(){T(x)},children:null!==(n=null==L?void 0:L.map((function(e,t){return{key:t,text:s.createElement("div",{className:"multiline"},null==e?void 0:e.displayName,s.createElement(c.EK,{className:"description",compact:!0,withBackground:!1},e.claimURI)),value:e.claimURI}})))&&void 0!==n?n:[],"data-testid":"".concat(S,"-form-local-claim-dropdown")})),s.createElement(h.Z.Column,{width:16},y!==P.Q.OIDC&&y!==P.Q.OTHERS&&s.createElement(fe.Z,{className:"mb-3 mt-2 ml-0"},s.createElement("em",null,"Attribute URI"),":\xa0",q?"".concat(b).concat(y==P.Q.SCIM?":":"/").concat(q||""):""))),!G&&!ee&&(ie||K)&&s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:16,textAlign:"left",verticalAlign:"top"},s.createElement(c.v0,{visible:!0,type:"warning",content:s.createElement(s.Fragment,null,ie?s.createElement(Ye.c,{i18nKey:"claims:external.forms.emptyMessage"},"All the SCIM attributes are mapped to local claims."):s.createElement(s.Fragment,null,s.createElement(Ye.c,{i18nKey:"claims:external.forms.warningMessage"},"There are no local attributes available for mapping. Add new local attributes from"),s.createElement(c.rU,{external:!1,onClick:function(){return M.m8.push(M.$x.getPaths().get("LOCAL_CLAIMS"))}}," here"),"."))}))),u&&s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:16,textAlign:"right",verticalAlign:"top"},s.createElement(c.KM,{type:"submit","data-testid":"".concat(S,"-form-submit-button"),loading:B,disabled:B||K||ie},de("claims:external.forms.submit"))))))};function ct(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||st(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||st(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ot.defaultProps={attributeType:P.Q.OTHERS,claimDialectUri:P.Q.CUSTOM_MAPPING,"data-testid":"add-external-claims"};var mt=function(e){var t=e.open,n=e.onClose,r=e.update,i=e.attributeType,u=e["data-testid"],p=ut((0,s.useState)(0),2),g=p[0],y=p[1],b=ut((0,s.useState)(null),2),E=b[0],C=b[1],S=ut((0,s.useState)([]),2),I=S[0],w=S[1],R=ut((0,s.useState)(!1),2),A=R[0],x=R[1],U=ut((0,o.cC)(),2),O=U[0],L=U[1],M=ut((0,o.cC)(),2),_=M[0],T=M[1],D=(0,m.I0)(),Z=(0,d.$)().t,N=ut((0,c.IK)(),3),j=N[0],P=N[1],k=N[2],Q=[{content:s.createElement(Me,{submitState:O,onSubmit:function(e){y(1),C(e)},values:E,"data-testid":"".concat(u,"-dialect-details")}),icon:ze().general,title:Z("claims:dialects.wizard.steps.dialectURI")},{content:s.createElement(vt,{submitState:_,onSubmit:function(e){y(2),w(e)},values:I,onExternalClaimsChanged:function(e){w(ct(e))},"data-testid":"".concat(u,"-external-claims"),attributeType:i}),icon:ze().general,title:Z("claims:dialects.wizard.steps.externalAttribute",{type:(0,Le.i)(i,!0)})},{content:s.createElement(bt,{dialectURI:null==E?void 0:E.get("dialectURI").toString(),claims:I,"data-testid":"".concat(u,"-summary"),attributeType:i}),icon:ze().general,title:Z("claims:dialects.wizard.steps.summary")}],z=function(){switch(g){case 0:L();break;case 1:T();break;case 2:x(!0),(0,v.CM)(null==E?void 0:E.get("dialectURI").toString()).then((function(){var e=window.btoa(null==E?void 0:E.get("dialectURI").toString()).replace(/=/g,""),t=[];I.forEach((function(n){t.push((0,v.wg)(e,n))})),Promise.all(t).then((function(){D((0,l.V_)({description:Z("claims:dialects.notifications.addDialect.success.description"),level:a.QU.SUCCESS,message:Z("claims:dialects.notifications.addDialect.success.message")}))})).catch((function(){D((0,l.V_)({description:Z("claims:dialects.notifications.addDialect.genericError.description"),level:a.QU.WARNING,message:Z("claims:dialects.notifications.addDialect.genericError.message")}))})).finally((function(){n(),r()}))})).catch((function(e){P({description:(null==e?void 0:e.description)||Z("claims:dialects.notifications.addDialect.error.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||Z("claims:dialects.notifications.addDialect.error.message")})})).finally((function(){x(!1)}))}};return s.createElement(me.Z,{dimmer:"blurring",size:"small",className:"wizard application-create-wizard",open:t,onClose:n,"data-testid":u,closeOnDimmerClick:!1},s.createElement(me.Z.Header,{className:"wizard-header"},Z("claims:dialects.wizard.header"),E&&E.get("dialectURI")?" - "+E.get("dialectURI"):""),s.createElement(me.Z.Content,{className:"steps-container","data-testid":"".concat(u,"-steps")},s.createElement(c.Rg.Group,{current:g},Q.map((function(e,t){return s.createElement(c.Rg.Step,{key:t,icon:e.icon,title:e.title,"data-testid":"".concat(u,"-step-").concat(t)})})))),s.createElement(me.Z.Content,{className:"content-container",scrolling:!0},j&&k,Q[g].content),s.createElement(me.Z.Actions,null,s.createElement(h.Z,null,s.createElement(h.Z.Row,{column:1},s.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},s.createElement(c.Qj,{floated:"left",onClick:function(){return n()},"data-testid":"".concat(u,"-cancel-button")},Z("common:cancel"))),s.createElement(h.Z.Column,{mobile:8,tablet:8,computer:8},g<Q.length-1&&s.createElement(c.KM,{floated:"right",onClick:z,"data-testid":"".concat(u,"-next-button")},Z("common:next")," ",s.createElement(f.Z,{name:"arrow right"})),g===Q.length-1&&s.createElement(c.KM,{floated:"right",onClick:z,"data-testid":"".concat(u,"-finish-button"),loading:A,disabled:A},Z("common:finish")),g>0&&s.createElement(c.Qj,{floated:"right",onClick:function(){y(g-1)},"data-testid":"".concat(u,"-previous-button")},s.createElement(f.Z,{name:"arrow left"})," ",Z("common:previous")))))))};function ft(e){return function(e){if(Array.isArray(e))return ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||gt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){if(e){if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}mt.defaultProps={attributeType:P.Q.OTHERS,"data-testid":"add-dialect-wizard"};var vt=function(e){var t=e.onSubmit,n=e.submitState,r=e.values,i=e.onExternalClaimsChanged,a=e.shouldShowInitialValues,l=e.attributeType,o=e.claimDialectUri,m=e.wizard,f=e.dialectId,p=e.mappedLocalClaims,g=e.onClaimListChange,v=e["data-testid"],y=pt((0,s.useState)([]),2),b=y[0],E=y[1],C=pt((0,s.useState)([]),2),S=C[0],I=C[1],w=pt((0,s.useState)([]),2),R=w[0],A=w[1],x=(0,s.useRef)(!0),U=(0,s.useRef)(!0),O=(0,d.$)().t;(0,s.useEffect)((function(){A(p)}),[p]),(0,s.useEffect)((function(){x.current?x.current=!1:t(T())}),[n]),(0,s.useEffect)((function(){r&&(E(r),U.current&&(I(r),U.current=!1))}),[r]),(0,s.useEffect)((function(){"function"==typeof g&&(b.length===S.length?g(!0):g(!1))}),[b]);var _=function(e,t,n){switch(e){case P.Q.SCIM:return"".concat(t,":").concat(n);case P.Q.OIDC:case P.Q.OTHERS:return n;default:return"".concat(t,"/").concat(n)}},T=function(){return a?b:je(b,S,u.Z)};return s.createElement(h.Z,null,s.createElement(h.Z.Row,{columns:2},s.createElement(h.Z.Column,{width:16},s.createElement(ot,{wizard:!0,onSubmit:function(e){var t={claimURI:_(l,o,e.get("claimURI").toString()),mappedLocalClaimURI:e.get("localClaim").toString()},n=[].concat(ft(b),[t]);A((function(e){return[].concat(ft(e),[t.mappedLocalClaimURI])})),E(n),i&&i(n)},externalClaims:b,"data-testid":"".concat(v,"-add-external-claims"),attributeType:l,claimDialectUri:o,dialectId:f,mappedLocalClaims:R}),s.createElement(L.Z,{hidden:!0}),T().length>0?s.createElement(xt,{isLoading:!1,list:T(),localClaim:At.ADD_EXTERNAL,onEdit:function(e,t){var n,r=ft(b),a=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=gt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw a}}}}(r);try{for(a.s();!(n=a.n()).done;){var l=n.value;(0,u.Z)(e,l)&&(P.Q.CLAIM_URI_ATTRIBUTE_KEY in e&&(l.claimURI=t.get("claimURI").toString(),l.mappedLocalClaimURI=t.get("localClaim").toString()))}}catch(o){a.e(o)}finally{a.f()}E(r),i&&i(r)},onDelete:function(e){var t=e,n=b.filter((function(t){return!(0,u.Z)(e,t)}));E(n),A(R.filter((function(e){return e!==t.mappedLocalClaimURI}))),i&&i(n)},"data-testid":"".concat(v,"-list"),attributeType:l,isEditable:!1}):m&&s.createElement(c.$J,{title:O("claims:external.placeholders.empty.title",{type:(0,te.i)(l,!0)}),subtitle:[O("claims:external.placeholders.empty.subtitle",{type:(0,te.i)(l)})],image:(0,M.jF)().emptyList,imageSize:"tiny","data-testid":"".concat(v,"-empty-placeholder")}))))};vt.defaultProps={attributeType:P.Q.OTHERS,"data-testid":"external-claims",mappedLocalClaims:[],shouldShowInitialValues:!0,wizard:!0};var yt=n(93682),bt=function(e){var t=e.dialectURI,n=e.claims,r=e.attributeType,i=e["data-testid"],a=(0,d.$)().t;return s.createElement(h.Z,{className:"wizard-summary","data-testid":i},s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{mobile:16,tablet:16,computer:16,textAlign:"center"},s.createElement("div",{className:"general-details"},s.createElement("h3",null,t)))),s.createElement(h.Z.Row,{columns:1},s.createElement(h.Z.Column,{width:16},s.createElement(Ue.Z,null,s.createElement(Ue.Z.Header,null,s.createElement(Ue.Z.Row,null,s.createElement(Ue.Z.HeaderCell,null),s.createElement(Ue.Z.HeaderCell,null,a("claims:dialects.wizard.summary.externalAttribute",{type:(0,te.i)(r,!0)})),s.createElement(Ue.Z.HeaderCell,null,a("claims:dialects.wizard.summary.mappedAttribute")))),s.createElement(Ue.Z.Body,null,n.map((function(e,t){return s.createElement(Ue.Z.Row,{key:t,columns:2},s.createElement(Ue.Z.Cell,null,s.createElement(yt.Z,{floated:"left",verticalAlign:"middle",rounded:!0,centered:!0,size:"mini"},s.createElement(c.Xo,null),s.createElement("span",{className:"claims-letter"},(n=e.claimURI,(r=n.replace("http://","").split("/"))[r.length-1][0].toLocaleUpperCase())))),s.createElement(Ue.Z.Cell,null,e.claimURI),s.createElement(Ue.Z.Cell,null,e.mappedLocalClaimURI));var n,r})),0===n.length&&s.createElement(Ue.Z.Row,null,s.createElement(Ue.Z.Cell,{colSpan:3,textAlign:"center"},s.createElement(c.v0,{type:"warning",content:a("claims:dialects.wizard.summary.notFound",{type:(0,te.i)(r,!0)})}))))))))};function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}bt.defaultProps={attributeType:P.Q.OTHERS,"data-testid":"add-dialect-summary"};var St=function(e){var t,n,r,u,p,g,y=e.attributeType,b=e.attributeUri,E=e.mappedLocalClaims,C=e.updateMappedClaims,S=e["data-testid"],I=(0,d.$)().t,w=[{key:0,text:I("claims:external.attributes.attributeURI",{type:(0,te.i)(y,!0,!0)}),value:"claimURI"},{key:1,text:I("claims:external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],R=(0,m.v9)((function(e){return e.config.ui.features})),A=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),x=Et((0,s.useState)(0),2),U=x[0],O=x[1],T=Et((0,s.useState)(M.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),D=T[0],Z=T[1],N=Et((0,s.useState)([]),2),j=N[0],k=N[1],Q=Et((0,s.useState)(w[0]),2),z=Q[0],q=Q[1],V=Et((0,s.useState)(!0),2),H=V[0],G=V[1],$=Et((0,s.useState)(!1),2),F=$[0],B=$[1],X=Et((0,s.useState)(""),2),W=X[0],K=X[1],Y=Et((0,s.useState)(!1),2),J=Y[0],ee=Y[1],ne=Et((0,s.useState)(!0),2),re=ne[0],ie=ne[1],ae=Et((0,s.useState)(!1),2),le=ae[0],oe=ae[1],ce=Et((0,o.cC)(),2),ue=ce[0],fe=ce[1],pe=Et((0,o.cC)(),2),ge=pe[0],he=pe[1],ve=(0,m.I0)(),ye=e.dialectID,be=e.claims,Ee=e.update,Ce=e.isLoading,Se=M.lD.getInstance();(0,s.useEffect)((function(){be&&(k(be),we())}),[be]),(0,s.useEffect)((function(){k((0,M.fS)(j,z.value,H))}),[z,H]);var Ie=function(e){try{var t=(0,M.gQ)(be,e,z.value,H);k(t),K(e),O(0),he()}catch(n){ve((0,l.V_)({description:null==n?void 0:n.message,level:a.QU.ERROR,message:I("claims:external.advancedSearch.error")}))}},we=function(){ee(!J),K(""),k(be)};return s.createElement(c.PS,{advancedSearch:s.createElement(M.nC,{onFilter:Ie,filterAttributeOptions:[{key:0,text:I("claims:external.attributes.attributeURI",{type:(0,te.i)(y,!0,!0)}),value:"claimURI"},{key:1,text:I("claims:external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],filterAttributePlaceholder:I("claims:external.advancedSearch.form.inputs.filterAttribute.placeholder",{type:(0,te.i)(y,!0,!0)}),filterConditionsPlaceholder:I("claims:external.advancedSearch.form.inputs.filterCondition.placeholder",{type:(0,te.i)(y,!0,!0)}),filterValuePlaceholder:I("claims:external.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:I("claims:external.advancedSearch.placeholder",{type:(0,te.i)(y,!0,!0)}),defaultSearchAttribute:"claimURI",defaultSearchOperator:"co",triggerClearQuery:J,"data-testid":"".concat(S,"-list-advanced-search")}),currentListSize:D,listItemLimit:D,onItemsPerPageDropdownChange:function(e,t){Z(t.value)},onPageChange:function(e,t){O((t.activePage-1)*D)},onSortStrategyChange:function(e,t){q(w.filter((function(e){return e.value===t.value}))[0])},onSortOrderChange:function(e){G(e)},resetPagination:ge,showPagination:!0,sortOptions:w,sortStrategy:z,showTopActionPanel:Ce||!(!W&&(null==j?void 0:j.length)<=0),totalPages:Math.ceil((null==j?void 0:j.length)/D),totalListSize:null==j?void 0:j.length,rightActionPanel:s.createElement(s.Fragment,null,(null===_.attributeConfig||void 0===_.attributeConfig||null===(t=_.attributeConfig.editAttributeMappings)||void 0===t?void 0:t.showAddExternalAttributeButton(ye))&&(0,i.Xr)(null==R?void 0:R.attributeDialects,null==R||null===(n=R.attributeDialects)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.create,A)&&s.createElement(c.KM,{loading:be&&b!==(null===(r=be[0])||void 0===r?void 0:r.claimDialectURI),onClick:function(){var e;b===(null===(e=be[0])||void 0===e?void 0:e.claimDialectURI)&&B(!0)},disabled:F||be&&b!==(null===(u=be[0])||void 0===u?void 0:u.claimDialectURI),"data-testid":"".concat(S,"-list-layout-add-button")},s.createElement(f.Z,{name:"add"}),I("claims:external.pageLayout.edit.primaryAction",{type:(0,te.i)(y,!0)})),y===P.Q.OIDC&&(null==R||null===(p=R.oidcScopes)||void 0===p?void 0:p.enabled)&&(0,i.Xr)(null==R?void 0:R.oidcScopes,null==R||null===(g=R.oidcScopes)||void 0===g||null===(g=g.scopes)||void 0===g?void 0:g.feature,A)&&s.createElement(c.kq,{onClick:function(){M.m8.push(M.$x.getPaths().get("OIDC_SCOPES"))},"data-componentid":"".concat(S,"-oidc-scopes-button")},s.createElement(se.NX,{fill:"black",className:"icon"}),I("console:develop.features.sidePanel.oidcScopes"))),"data-testid":"".concat(S,"-list-layout")},F&&s.createElement(me.Z,{open:F,onClose:function(){B(!1)},dimmer:"blurring",size:"small","data-testid":"".concat(S,"-add-external-claim-modal"),closeOnDimmerClick:!1},s.createElement(me.Z.Header,null,I("claims:external.pageLayout.edit.header",{type:(0,te.i)(y,!0)})),s.createElement(me.Z.Content,{scrolling:!0,className:"edit-attribute-mapping"},s.createElement(vt,{"data-testid":"".concat(S,"-add-external-claims"),onSubmit:function(e){!function(e){var t=e.map((function(e){return(0,v.wg)(ye,{claimURI:e.claimURI,mappedLocalClaimURI:e.mappedLocalClaimURI})}));oe(!0),Promise.all(t).then((function(){ve((0,l.V_)({description:I("claims:external.notifications.addExternalAttribute.success.description",{type:(0,te.i)(y)}),level:a.QU.SUCCESS,message:I("claims:external.notifications.addExternalAttribute.success.message")})),Ee(),C(!0)})).catch((function(e){ve((0,l.V_)({description:(null==e?void 0:e.description)||I("claims:external.notifications.addExternalAttribute.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||I("claims:external.notifications.addExternalAttribute.genericError.message")}))})).finally((function(){oe(!1),B(!1)}))}(e)},submitState:ue,values:be,shouldShowInitialValues:!1,attributeType:y,claimDialectUri:b,dialectId:ye,wizard:!1,mappedLocalClaims:E,onClaimListChange:function(e){ie(e)}})),s.createElement(me.Z.Actions,null,s.createElement(c.Qj,{onClick:function(){B(!1)},"data-testid":"".concat(S,"-add-external-claim-modal-cancel-button")},I("common:cancel")),s.createElement(c.KM,{disabled:re||le,loading:le,onClick:function(){Se.publish("manage-attribute-mappings-add-new-attribute",{type:(0,de.Z)(y)}),fe()},"data-testid":"".concat(S,"-add-external-claim-modal-save-button")},I("common:save")))),s.createElement(h.Z,{columns:1},s.createElement(h.Z.Column,{width:16},s.createElement(L.Z,{hidden:!0}),s.createElement(xt,{advancedSearch:s.createElement(M.nC,{onFilter:Ie,filterAttributeOptions:[{key:0,text:I("claims:external.attributes.attributeURI",{type:(0,te.i)(y,!0,!0)}),value:"claimURI"},{key:1,text:I("claims:external.attributes.mappedClaim"),value:"mappedLocalClaimURI"}],filterAttributePlaceholder:I("claims:external.advancedSearch.form.inputs.filterAttribute.placeholder",{type:(0,te.i)(y,!0,!0)}),filterConditionsPlaceholder:I("claims:external.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:I("claims:external.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:I("claims:external.advancedSearch.placeholder",{type:(0,te.i)(y,!0,!0)}),defaultSearchAttribute:"claimURI",defaultSearchOperator:"co",triggerClearQuery:J,"data-testid":"".concat(S,"-list-advanced-search")}),showTableHeaders:!0,isLoading:Ce,list:function(e,t,n){return null==e?void 0:e.slice(n,n+t)}(j,D,U),localClaim:At.EXTERNAL,update:function(){return Ee()},dialectID:ye,onEmptyListPlaceholderActionClick:function(){return B(!0)},onSearchQueryClear:we,searchQuery:W,"data-testid":"".concat(S,"-list"),attributeType:y,featureConfig:R,updateMappedClaims:C}))))};St.defaultProps={attributeType:P.Q.OTHERS,"data-testid":"edit-external-claims",isLoading:!0};var It=n(28897);function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var At=function(e){return e[e.LOCAL=0]="LOCAL",e[e.EXTERNAL=1]="EXTERNAL",e[e.DIALECT=2]="DIALECT",e[e.ADD_EXTERNAL=3]="ADD_EXTERNAL",e}({}),xt=function(e){var t=e.showTableHeaders,n=e.advancedSearch,h=e.defaultListItemLimit,y=e.featureConfig,b=e.list,E=e.localClaim,C=e.update,S=e.dialectID,I=e.onEdit,w=e.onDelete,R=e.isLoading,A=e.onEmptyListPlaceholderActionClick,x=e.onListItemClick,U=e.onSearchQueryClear,O=e.selection,L=e.searchQuery,T=e.attributeType,D=e.showListItemActions,N=e.isEditable,j=e.updateMappedClaims,k=e["data-testid"],Q=wt((0,s.useState)(!1),2),z=Q[0],q=Q[1],V=wt((0,s.useState)(null),2),H=V[0],G=V[1],$=wt((0,s.useState)(null),2),F=$[0],B=$[1],X=wt((0,s.useState)([]),2),W=X[0],K=X[1],Y=wt((0,s.useState)(""),2),J=Y[0],ee=Y[1],ne=wt((0,s.useState)(void 0),2),re=ne[0],ie=ne[1],ae=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),le=(0,m.I0)(),oe=wt((0,o.cC)(),2),ce=oe[0],se=oe[1],de=(0,s.useRef)([]),me=(0,s.useRef)([]),fe=(0,d.$)().t,pe=wt((0,c.ZK)(),3),ge=pe[0],he=pe[1],ve=pe[2],ye="oidc";null==b||b.forEach((function(e,t){de.current.push(de.current[t]||s.createRef()),me.current.push(me.current[t]||s.createRef())})),(0,s.useEffect)((function(){Ee(b)&&(0,It.GN)(null).then((function(e){K(e)})).catch((function(e){var t,n;le((0,l.V_)({description:null!==(t=null==e?void 0:e.description)&&void 0!==t?t:fe("userstores:notifications.fetchUserstores.genericError.description"),level:a.QU.ERROR,message:null!==(n=null==e?void 0:e.message)&&void 0!==n?n:fe("userstores:notifications.fetchUserstores.genericError.message")}))}))}),[JSON.stringify(b)]);var be,Ee=function(e){return E===At.LOCAL},Ce=function(e){return E===At.DIALECT},Se=function(e){return E===At.EXTERNAL},Ie=function(){q(!1),B(null),G(null)},we=function(e){(0,v.wf)(e).then((function(){C(),Ie(),j(!0),le((0,l.V_)({description:fe("claims:local.notifications.deleteClaim.success.description"),level:a.QU.SUCCESS,message:fe("claims:local.notifications.deleteClaim.success.message")}))})).catch((function(e){le(he({description:(null==e?void 0:e.description)||fe("claims:local.notifications.deleteClaim.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||fe("claims:local.notifications.deleteClaim.genericError.message")}))}))},Re=function(e,t){(0,v.q)(e,t.id).then((function(){C(),_.attributeConfig.localAttributes.isSCIMCustomDialectAvailable().then((function(){Ae()})),j(!0),Ie(),le((0,l.V_)({description:fe("claims:external.notifications.deleteExternalClaim.success.description",{type:t.claimURI}),level:a.QU.SUCCESS,message:fe("claims:external.notifications.deleteExternalClaim.success.message")}))})).catch((function(e){le((0,l.V_)({description:(null==e?void 0:e.description)||fe("claims:external.notifications.deleteExternalClaim.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||fe("claims:external.notifications.deleteExternalClaim.genericError.message")}))}))},Ae=function(){le((0,l.wu)(!0)),(0,Z.w7)().then((function(e){le((0,l.Um)(e))})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description&&le((0,l.V_)({description:e.response.data.description,level:a.QU.ERROR,message:fe("console:manage.notifications.getProfileSchema.error.message")})),le((0,l.V_)({description:fe("console:manage.notifications.getProfileSchema.genericError.description"),level:a.QU.ERROR,message:fe("console:manage.notifications.getProfileSchema.genericError.message")}))})).finally((function(){le((0,l.wu)(!1))}))},xe=function(e){(0,v.Nx)(e).then((function(){C(),Ie(),le((0,l.V_)({description:fe("claims:dialects.notifications.deleteDialect.success.description"),level:a.QU.SUCCESS,message:fe("claims:dialects.notifications.deleteDialect.success.message")}))})).catch((function(e){le((0,l.V_)({description:(null==e?void 0:e.description)||fe("claims:dialects.notifications.deleteDialect.genericError.description"),level:a.QU.ERROR,message:(null==e?void 0:e.message)||fe("claims:dialects.notifications.deleteDialect.genericError.message")}))}))},Ue=function(e,t){G(e),B(t),q(!0)},Oe=function(){return L?s.createElement(c.$J,{action:s.createElement(c.Qj,{onClick:U},fe("console:manage.placeholders.emptySearchResult.action")),image:(0,M.jF)().emptySearch,imageSize:"tiny",title:fe("console:manage.placeholders.emptySearchResult.title"),subtitle:[fe("console:manage.placeholders.emptySearchResult.subtitles.0",{query:L}),fe("console:manage.placeholders.emptySearchResult.subtitles.1")],"data-testid":"".concat(k,"-empty-search-placeholder")}):0===(null==b?void 0:b.length)?s.createElement(c.$J,{action:_.attributeConfig.attributesPlaceholderAddButton(T)&&s.createElement(r.di,{when:null==y||null===(e=y.oidcScopes)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create},s.createElement(c.KM,{onClick:A},s.createElement(f.Z,{name:"add"}),Ee(b)?fe("claims:list.placeholders.emptyList.action.local"):Ce()?fe("claims:list.placeholders.emptyList.action.dialect",{type:(0,te.i)(T,!0)}):fe("claims:list.placeholders.emptyList.action.external",{type:(0,te.i)(T,!0)}))),image:(0,M.jF)().newList,imageSize:"tiny",title:Ee(b)?fe("claims:list.placeholders.emptyList.title.local"):Ce()?fe("claims:list.placeholders.emptyList.title.dialect"):fe("claims:list.placeholders.emptyList.title.external",{type:(0,te.i)(T,!0)}),subtitle:[],"data-testid":"".concat(k,"-empty-placeholder")}):null;var e},Le=function(e){var t=e.claimURI.split("/");return t[t.length-1]};return s.createElement(s.Fragment,null,z?(be=Ee(F)?{assertion:F.displayName,delete:we,message:fe("claims:list.confirmation.local.message"),name:fe("claims:list.confirmation.local.name")}:Ce()?{assertion:F.dialectURI,delete:xe,message:fe("claims:list.confirmation.dialect.message"),name:fe("claims:list.confirmation.dialect.name")}:{assertion:F.claimURI,delete:Re,message:fe("claims:list.confirmation.external.message",{type:F.claimURI})+(T&&T===ye?"If this attribute is attached to any scope, this action will also remove the attribute from the relevant scope.":P.Q.EMPTY_STRING),name:fe("claims:list.confirmation.external.name",{type:F.claimURI})},s.createElement(c.cV,{onClose:Ie,type:"negative",open:z,assertionHint:fe("claims:list.confirmation.hint"),assertionType:"checkbox",primaryAction:fe("claims:list.confirmation.action"),secondaryAction:fe("common:cancel"),onSecondaryActionClick:function(){q(!1),he(null)},onPrimaryActionClick:function(){H===At.EXTERNAL?be.delete(S,F):be.delete(F.id)},"data-testid":"".concat(k,"-delete-confirmation-modal"),closeOnDimmerClick:!1},s.createElement(c.cV.Header,{"data-testid":"".concat(k,"-delete-confirmation-modal-header")},fe("claims:list.confirmation.header")),s.createElement(c.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(k,"-delete-confirmation-modal-message")},fe("claims:list.confirmation.message",{name:be.name})),s.createElement(c.cV.Content,{"data-testid":"".concat(k,"-delete-confirmation-modal-content")},s.createElement("div",{className:"modal-alert-wrapper"}," ",ge&&ve),fe("claims:list.confirmation.content",{message:be.message})))):null,s.createElement(c.wQ,{className:"external-dialects-list",externalSearch:n,isLoading:R,loadingStateOptions:{count:null!=h?h:M.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:function(){if(D)return Ee(b)?[{icon:function(){var e;return(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,ae)?"pencil alternate":"eye"},onClick:function(e,t){M.m8.push(M.$x.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",null==t?void 0:t.id))},popupText:function(){var e;return(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,ae)?fe("common:edit"):fe("common:view")},renderer:"semantic-icon"},_.attributeConfig.attributes.deleteAction&&{hidden:function(){var e;return!(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.delete,ae)},icon:function(){return"trash alternate"},onClick:function(e,t){return Ue(At.LOCAL,t)},popupText:function(){return fe("common:delete")},renderer:"semantic-icon"}]:Ce()?[{hidden:function(){var e;return!(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create,ae)},icon:function(){return"pencil alternate"},onClick:function(e,t){M.m8.push(M.$x.getPaths().get("EXTERNAL_DIALECT_EDIT").replace(":id",t.id))},popupText:function(){return fe("common:edit")},renderer:"semantic-icon"},_.attributeConfig.attributeMappings.deleteAction&&{hidden:function(){var e;return!(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.delete,ae)},icon:function(){return"trash alternate"},onClick:function(e,t){return Ue(At.DIALECT,t)},popupText:function(){return fe("common:delete")},renderer:"semantic-icon"}]:Se()?[{hidden:function(e){return J!==(null==e?void 0:e.id)},icon:function(){return"check"},onClick:function(){return se()},popupText:function(){return fe("common:update")},renderer:"semantic-icon"},_.attributeConfig.externalAttributes.showActions(S)&&{hidden:function(){var e;return _.attributeConfig.externalAttributes.isAttributeEditable?!(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create,ae):!_.attributeConfig.externalAttributes.isAttributeEditable},icon:function(e){return _.attributeConfig.externalAttributes.getEditIcon(e,J)},link:function(e){return _.attributeConfig.externalAttributes.isEditActionClickable(e)},onClick:function(e,t){return _.attributeConfig.externalAttributes.editAttribute(t,J,ee)},popupText:function(e){return _.attributeConfig.externalAttributes.getEditPopupText(e,J)},renderer:"semantic-icon"},_.attributeConfig.externalAttributes.showDeleteIcon(S,b)&&{hidden:function(e){var t;if(!(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(t=y.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.delete,ae)||_.attributeConfig.externalAttributes.hideDeleteIcon(e))return!0;if(_.attributeConfig.defaultScimMapping&&Object.keys(_.attributeConfig.defaultScimMapping).length>0){var n=_.attributeConfig.defaultScimMapping[e.claimDialectURI];return!(!n||!n.get(e.claimURI))}},icon:function(){return"trash alternate"},onClick:function(e,t){return Ue(At.EXTERNAL,t)},popupText:function(){return fe("common:delete")},renderer:"semantic-icon"}]:[{hidden:function(e){return!(0,u.Z)(re,e)},icon:function(){return"check"},onClick:function(){return se()},popupText:function(){return fe("common:update")},renderer:"semantic-icon"},{hidden:function(){return!N},icon:function(e){return(0,u.Z)(re,e)?"times":"pencil alternate"},onClick:function(e,t){ie(re?void 0:t)},popupText:function(){return fe("common:edit")},renderer:"semantic-icon"},{icon:function(){return"trash alternate"},onClick:function(e,t){return w(t)},popupText:function(){return fe("common:delete")},renderer:"semantic-icon"}]}(),columns:function(){if(Ee(b))return[{allowToggleVisibility:!1,dataIndex:"displayName",id:"displayName",key:"displayName",render:function(e){var t=function(e){var t,n,r=[];return null==W||W.forEach((function(t){var n,i;null!==(n=null==e||null===(i=e.attributeMapping)||void 0===i?void 0:i.find((function(e){return e.userstore.toLowerCase()===t.name.toLowerCase()})))&&void 0!==n||r.push(t.name)})),null!==(t=null==e||null===(n=e.attributeMapping)||void 0===n?void 0:n.find((function(e){return"PRIMARY"===e.userstore})))&&void 0!==t||r.push("Primary"),r}(e),n=t.length>0;return s.createElement(p.Z,{as:"h6",image:!0},s.createElement(s.Fragment,null,_.attributeConfig.attributes.showUserstoreMappingWarningIcon&&n&&s.createElement(c.GI,{trigger:s.createElement(f.Z,{className:"notification-icon",name:"warning circle",size:"small",color:"red"}),content:s.createElement("div",null,fe("claims:list.warning"),s.createElement("ul",null,t.map((function(e,t){return s.createElement("li",{key:t},e)})))),inverted:!0}),s.createElement(c.JT,{image:s.createElement(c.Xo,{name:Le(e),size:"mini","data-testid":"".concat(k,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(k,"-item-image")})),s.createElement(p.Z.Content,null,e.displayName,s.createElement(p.Z.Subheader,null,s.createElement("code",{className:"inline-code compact transparent"},e.claimURI))))},title:fe("claims:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:P.Q.EMPTY_STRING}];if(Ce())return[{allowToggleVisibility:!1,dataIndex:"dialectURI",id:"dialectURI",key:"dialectURI",render:function(e){return s.createElement(p.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(k,"-item-heading")},s.createElement(c.JT,{image:s.createElement(c.Xo,{name:e.dialectURI,size:"mini","data-testid":"".concat(k,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(k,"-item-image")}),s.createElement(p.Z.Content,null,e.dialectURI))},title:fe("claims:list.columns.dialectURI")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:P.Q.EMPTY_STRING}];if(Se()){return[{allowToggleVisibility:!1,dataIndex:"claimURI",id:"claimURI",key:"claimURI",render:function(e){return s.createElement(p.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(k,"-item-heading")},s.createElement(c.JT,{image:s.createElement(c.Xo,{name:e.claimURI,size:"mini","data-testid":"".concat(k,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(k,"-item-image")}),s.createElement(c.GI,{inverted:!0,position:"top center",key:"".concat(e.claimURI,"-popup"),content:e.claimURI,trigger:s.createElement(p.Z.Content,{className:"ellipsis"},e.claimURI)}))},title:T&&T===P.Q.SCIM?fe("claims:list.columns.claimURI"):fe("claims:list.columns.name"),width:8},{allowToggleVisibility:!1,dataIndex:"dialectURI",id:"dialectURI",key:"dialectURI",render:function(e){return J===(null==e?void 0:e.id)?s.createElement(ue,{claimID:e.id,dialectID:S,update:function(){ee(""),C()},submit:ce,claimURI:e.claimURI,externalClaims:b,"data-testid":"".concat(k,"-edit-external-claim"),attributeType:T}):s.createElement(c.GI,{inverted:!0,position:"top center",key:"".concat(e.mappedLocalClaimURI,"-popup"),content:e.mappedLocalClaimURI,trigger:s.createElement("code",null,e.mappedLocalClaimURI)})},title:fe("claims:list.columns.dialectURI"),width:6},(n=_.attributeConfig.externalAttributes.showActions(S)&&_.attributeConfig.externalAttributes.isAttributeEditable&&(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(e=y.attributeDialects)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.create,ae),r=_.attributeConfig.externalAttributes.showDeleteIcon(S,b)&&(0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(t=y.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.delete,ae),n||r?{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:P.Q.EMPTY_STRING}:null)].filter(Boolean)}var e,t,n,r;return[{allowToggleVisibility:!1,dataIndex:"claimURI",id:"claimURI",key:"claimURI",render:function(e){return e?(0,u.Z)(re,e)?s.createElement(ue,{dialectID:S,update:function(){ie(void 0)},submit:ce,claimURI:e.claimURI,onSubmit:function(t){I(e,t)},wizard:!0,addedClaim:e,externalClaims:b}):s.createElement(p.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(k,"-item-heading")},s.createElement(c.JT,{name:e.claimURI,image:s.createElement(c.Xo,{name:e.claimURI,size:"mini","data-testid":"".concat(k,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(k,"-item-image")}),s.createElement(p.Z.Content,null,e.claimURI,s.createElement(p.Z.Subheader,null,e.mappedLocalClaimURI))):null},title:fe("claims:list.columns.dialectURI")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:P.Q.EMPTY_STRING}]}(),data:b,onRowClick:function(e,t){var n;if((0,i.Xr)(null==y?void 0:y.attributeDialects,null==y||null===(n=y.attributeDialects)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.create,ae)){if(Ee(b))M.m8.push(M.$x.getPaths().get("LOCAL_CLAIMS_EDIT").replace(":id",t.id));else if(Ce())M.m8.push(M.$x.getPaths().get("EXTERNAL_DIALECT_EDIT").replace(":id",t.id));else if(Se()&&_.attributeConfig.externalAttributes.isRowClickable(S,g.Z))_.attributeConfig.externalAttributes.isAttributeEditable&&ee(J?"":t.id);else{if(!N)return;ie(t)}x&&x(e,t)}},placeholders:Oe(),selectable:O,showHeader:t,transparent:!R&&null!==Oe(),"data-testid":k,isRowSelectable:function(e){return _.attributeConfig.isRowSelectable(e)},fixed:T!==ye}))};xt.defaultProps={attributeType:P.Q.OTHERS,"data-testid":"claims-list",selection:!0,showListItemActions:!0,showTableHeaders:!1}},43227:(e,t,n)=>{n.d(t,{i:()=>r.i});var r=n(71827)},71827:(e,t,n)=>{n.d(t,{i:()=>i});var r=n(45481),i=function(e,t,n){switch(e){case r.Q.OIDC:return n?"OIDC":"OpenID Connect";case r.Q.SCIM:return"SCIM";case r.Q.AXSCHEMA:return"Axschema";case r.Q.EIDAS:return"eIDAS";default:return t?"Custom":"custom"}}}}]);