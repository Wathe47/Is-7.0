(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[22902],{17217:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ye});var r=n(95817),o=n(20849),a=n(93129),l=n(3356),i=n(86727),c=n(44194),u=n(10479),s=n(47245),d=n(37077),p=n(69772),m=n(8272),f=n(66116),v=n(39594),y=n(88996),b=n(24393),g=n(71015),h=n(54833),E=n(120),I=n(99472),O=n(46440),R=n(67127),A=n(94585),S=n(3536),N=n(79532),L=n(45030),C=n(33655);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_.apply(this,arguments)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t,n,r=e.isReadOnly,o=e.role,d=e.onRoleUpdate,p=e.tabIndex,m=e.isSubOrganization,f=e["data-componentid"],b=(0,s.I0)(),g=(0,u.$)().t,h=(0,S.Z)(!m,"type eq tenant","apiResources").data,T=(0,S.Z)(!m,"type eq organization","apiResources").data,w=(0,s.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.legacyMode})),Z=j((0,c.useState)(void 0),2),U=Z[0],x=Z[1],M=(0,c.useMemo)((function(){var e;if(!h)return null;var t=(0,O.Z)(h),n=[];return null!=w&&w.rolesV1?n.push(N.S.ROLE_API_RESOURCES_COLLECTION_NAME):n.push(N.S.ROLE_V1_API_RESOURCES_COLLECTION_NAME),t.apiResourceCollections=null==t||null===(e=t.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!n.includes(null==e?void 0:e.name)})),t}),[h]),P=(0,c.useMemo)((function(){var e;if(!T)return null;var t=(0,O.Z)(T),n=[];return null!=w&&w.rolesV1?n.push(N.S.ORG_ROLE_API_RESOURCES_COLLECTION_NAME):n.push(N.S.ORG_ROLE_V1_API_RESOURCES_COLLECTION_NAME),t.apiResourceCollections=null==t||null===(e=t.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!n.includes(null==e?void 0:e.name)})),t}),[T]),z=function(e,t){var n=e.apiResources.read.flatMap((function(e){return e.scopes.map((function(e){return e.name}))})),r=e.apiResources.write.flatMap((function(e){return e.scopes.map((function(e){return e.name}))})),o=n.every((function(e){return t.includes(e)})),a=r.every((function(e){return t.includes(e)}));return o||a?{permissions:(0,L.Z)(e.apiResources[a?"write":"read"]),read:!a&&o,write:a}:null},G=(0,c.useMemo)((function(){var e,t,n,r=null==o||null===(e=o.permissions)||void 0===e?void 0:e.map((function(e){return e.value})),a={organization:{},tenant:{}};return null==M||null===(t=M.apiResourceCollections)||void 0===t||t.forEach((function(e){var t=z(e,r);t&&(a.tenant[e.id]=t)})),null==P||null===(n=P.apiResourceCollections)||void 0===n||n.forEach((function(e){var t=z(e,r);t&&(a.organization[e.id]=t)})),a}),[o,M,P]);return c.createElement(i.pJ,{padded:"very",className:"console-role-permissions"},c.createElement("div",{className:"section-heading"},c.createElement(i.X6,{as:"h4"},g("roles:edit.permissions.heading")),c.createElement(i.X6,{as:"h6",color:"grey",subHeading:!0},g(r?"roles:edit.permissions.readOnlySubHeading":"roles:edit.permissions.subHeading"))),m?c.createElement(E.Z,{readOnly:!0,multiple:!0,options:null!==(t=null==o?void 0:o.permissions)&&void 0!==t?t:[],defaultValue:null!==(n=null==o?void 0:o.permissions)&&void 0!==n?n:[],getOptionLabel:function(e){return e.display},renderInput:function(e){return c.createElement(I.Z,_({},e,{"data-componentid":"".concat(f,"-textfield")}))},renderTags:function(e,t){return e.map((function(e,n){return c.createElement(A.w,_({},t({index:n}),{key:n,primaryText:e.display,secondaryText:e.value,option:e,activeOption:null,setActiveOption:function(){return null},variant:"solid"}))}))}}):c.createElement(C.Z,{defaultExpandedIfPermissionsAreSelected:!0,isReadOnly:r,initialValues:G,onPermissionsChange:x}),!r&&c.createElement(i.KM,{className:"submit-button",variant:"contained",size:"small",loading:!1,disabled:(0,R.Z)(null==o?void 0:o.permissions)||U&&(0,R.Z)(U),onClick:function(){!function(e){var t=null!=e?e:null==o?void 0:o.permissions,n={Operations:[{op:"replace",value:{permissions:null==t?void 0:t.map((function(e){return{value:e.value}}))}}],schemas:[y.lg.PATCH_OP]};(0,v.dB)(o.id,n).then((function(){d(p),b((0,l.V_)({description:g("roles:notifications.updateRole.success.description"),level:a.QU.SUCCESS,message:g("roles:notifications.updateRole.success.message")}))})).catch((function(){b((0,l.V_)({description:g("roles:notifications.updateRole.genericError.description"),level:a.QU.ERROR,message:g("roles:notifications.updateRole.genericError.message")}))}))}(U)},"data-componentid":"".concat(f,"-update-button")},g("common:update")))};w.defaultProps={"data-componentid":"console-roles-table"};const Z=w;var U=n(84902),x=n(61025),M=n(12638),P=n(62508),z=n(12950),G=n(26154),J=n(72418),X=n(6776);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.role,n=e.isLoading,r=e["data-componentid"],o=(0,u.$)().t,a=(0,s.v9)((function(e){return e.config.ui.features})),l=$((0,c.useState)([]),2),d=l[0],p=l[1],m=$((0,c.useState)(""),2),f=m[0],v=m[1],y=null==t?void 0:t.associatedApplications;(0,c.useEffect)((function(){y&&p(y)}),[y]);var g=function(e,n){b.m8.push({pathname:b.$x.getPaths().get("APPLICATION_SIGN_IN_METHOD_EDIT").replace(":id",e).replace(":tabName",n),state:{id:t.id,name:t.displayName,redirectTo:X.jo.ROLE_CALLBACK_REDIRECT}})},E=function(){return f&&0===(null==d?void 0:d.length)?c.createElement(i.$J,{image:(0,b.jF)().emptySearch,imageSize:"tiny",title:o("console:develop.placeholders.emptySearchResult.title"),subtitle:[o("console:develop.placeholders.emptySearchResult.subtitles.0",{query:f}),o("console:develop.placeholders.emptySearchResult.subtitles.1")],"data-componentid":"".concat(r,"-empty-search-placeholder")}):0===(null==d?void 0:d.length)?c.createElement(i.$J,{image:(0,b.jF)().newList,imageSize:"tiny",subtitle:[o("idp:connectedApps.placeholders.emptyList",{idpName:null==t?void 0:t.displayName})],"data-componentid":"".concat(r,"-empty-placeholder")}):null},I=function(e){var t=null==y?void 0:y.filter((function(t){var n;return-1!==(null==t||null===(n=t.display)||void 0===n||null===(n=n.toLowerCase())||void 0===n?void 0:n.indexOf(e.toLowerCase()))}));p(t)};return c.createElement(i.pJ,{padded:"very"},c.createElement(i.X6,{as:"h4"},o("idp:connectedApps.header",{idpName:null==t?void 0:t.displayName})),c.createElement(P.Z,{hidden:!0}),y&&c.createElement(z.Z,{icon:c.createElement(G.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var t=e.target.value.trim();v(t),t.length>0?I(t):p(y)},placeholder:o("idp:connectedApps.placeholders.search"),floated:"left",size:"small",style:{width:"250px"},"data-componentid":"".concat(r,"-searched")}),c.createElement(i.wQ,{className:"connected-applications-table",isLoading:n,loadingStateOptions:{count:b.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"square"},actions:[{"data-componentid":"".concat(r,"-item-edit-button"),hidden:function(){return!(0,h.cr)(null==a?void 0:a.applications,X.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))},icon:function(){return"caret right"},onClick:function(e,t){return g(t.value,"#tab="+X.jo.ROLES_TAB_URL_FRAG)},popupText:function(){return o("idp:connectedApps.action")},renderer:"semantic-icon"}],columns:[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){return c.createElement(M.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(r,"-item-heading")},c.createElement(i.JT,{image:c.createElement(i.Xo,{name:null==e?void 0:e.display,size:"mini","data-componentid":"".concat(r,"-item-image-inner")}),size:"mini",spaced:"right","data-componentid":"".concat(r,"-item-image")}),c.createElement(M.Z.Content,null,null==e?void 0:e.display))},title:o("applications:list.columns.name")},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:o("applications:list.columns.actions")}],data:d,onRowClick:function(e,t){g(t.value,"#tab="+X.jo.ROLES_TAB_URL_FRAG)},placeholders:E(),showHeader:J.applicationListConfig.enableTableHeaders,transparent:!n&&null!==E(),"data-componentid":"".concat(r,"-data-table")}))};k.defaultProps={"data-componentid":"role-edit-connected-apps"};var B=n(71099),W=n(24523),D=n(51835),F=n.n(D),Q=n(27975),H=n.n(Q),Y=n(55900),q=n.n(Y),K=n(21555),ee=n.n(K),te=n(3621),ne=n.n(te),re=n(5062),oe=n.n(re),ae=n(33467),le=n.n(ae),ie={};ie.styleTagTransform=oe(),ie.setAttributes=ee(),ie.insert=q().bind(null,"head"),ie.domAPI=H(),ie.insertStyleElement=ne();F()(le(),ie);le()&&le().locals&&le().locals;function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var se=function(e){var t=e.isLoading,n=e.roleObject,r=e.onRoleUpdate,o=e.defaultActiveIndex,a=(0,u.$)().t,l=(0,U.z)().organizationType,d=(0,s.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t||null===(t=t.features)||void 0===t?void 0:t.userRoles})),p=(0,s.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),m=(0,s.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.administratorRoleDisplayName})),f=ce((0,c.useState)(!1),2),v=f[0],E=f[1],I=l===b.$B.SUBORGANIZATION;(0,c.useEffect)((function(){n&&E(n.displayName===g.nL.ADMIN_ROLE||(null==n?void 0:n.displayName)===g.nL.ADMIN_GROUP||(null==n?void 0:n.displayName)===m)}),[n]);var O;return c.createElement(i.M$,{isLoading:t,defaultActiveIndex:o,panes:[{menuItem:a("roles:edit.menuItems.basic"),render:function(){var e;return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(x.Q,{isReadOnly:I||v||!(0,h.Xr)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:n,onRoleUpdate:r,tabIndex:0,enableDeleteErrorConnetedAppsModal:!1}))}},{menuItem:a("roles:edit.menuItems.permissions"),render:function(){var e;return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(Z,{isReadOnly:I||v||!(0,h.Xr)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:n,onRoleUpdate:r,tabIndex:1,isSubOrganization:I}))}},{menuItem:a("roles:edit.menuItems.groups"),render:function(){var e;return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(B.q,{isReadOnly:!(0,h.Xr)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:n,onRoleUpdate:r,tabIndex:2}))}},{menuItem:a("roles:edit.menuItems.users"),render:function(){var e;return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(W.G,{isReadOnly:!(0,h.Xr)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:n,onRoleUpdate:r,tabIndex:3}))}},(null==n||null===(O=n.audience)||void 0===O?void 0:O.type)===y.cv.ORGANIZATION.toLocaleLowerCase()?{menuItem:a("roles:edit.menuItems.connectedApps"),render:function(){var e;return c.createElement(i.M$.Pane,{controlledSegmentation:!0,attached:!1},c.createElement(k,{isReadOnly:!(0,h.Xr)(d,null==d||null===(e=d.scopes)||void 0===e?void 0:e.update,p),role:n,onRoleUpdate:r,tabIndex:4}))}}:null]})};se.defaultProps={defaultActiveIndex:0};const de=se;var pe=n(80259);function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,l,i=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(i.push(r.value),i.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=function(e){var t,n,b,g=e["data-componentid"],h=(0,u.$)().t,E=(0,s.I0)(),I=me((0,c.useState)(void 0),2),O=I[0],R=I[1],A=me((0,c.useState)(0),2),S=A[0],N=A[1];(0,c.useEffect)((function(){var e=f.m.location.pathname.split("/"),t=e[e.length-1];R(t)}),[]);var L=(0,v.tE)(O),C=L.data,_=L.isLoading,j=L.error,T=L.mutate;(0,c.useEffect)((function(){j&&E((0,l.V_)({description:h("roles:notifications.fetchRole.genericError.description"),level:a.QU.ERROR,message:h("roles:notifications.fetchRole.genericError.message")}))}),[j]);var w=function(){f.m.push(m.$.getPaths().get("CONSOLE_SETTINGS")+"#tab=".concat(pe.w.ROLES))};return j?function(){if(j)return c.createElement(i.$J,{subtitle:[h("roles:edit.placeholders.errorPlaceHolder.subtitles.0"),h("roles:edit.placeholders.errorPlaceHolder.subtitles.1")],title:h("roles:edit.placeholders.errorPlaceHolder.title"),image:(0,p.jF)().emptySearch,action:c.createElement(r.Z,{onClick:w},h("roles:edit.placeholders.errorPlaceHolder.action")),imageSize:"tiny"})}():c.createElement(i.O9,{"data-componentid":g,isLoading:_,title:C&&null!=C&&C.displayName?null==C?void 0:C.displayName:h("pages:rolesEdit.title"),description:c.createElement(o.Z,{container:!0,alignItems:"center"},c.createElement(o.Z,null,y.cv.ORGANIZATION===(null==C||null===(t=C.audience)||void 0===t?void 0:t.type.toUpperCase())?h("roles:list.columns.managedByOrg.label"):h("roles:list.columns.managedByApp.label")),c.createElement(o.Z,null,c.createElement(d.Z,{className:y.cv.ORGANIZATION===(null==C||null===(n=C.audience)||void 0===n?void 0:n.type.toUpperCase())?"issuer-label":"client-id-label"},null==C||null===(b=C.audience)||void 0===b?void 0:b.display))),pageTitle:h("pages:rolesEdit.title"),backButton:{onClick:w,text:h("pages:rolesEdit.backButton",{type:"roles"})},titleTextAlign:"left",bottomMargin:!1},c.createElement(de,{isLoading:_,roleObject:C,onRoleUpdate:function(e){T(),N(e)},defaultActiveIndex:S}))};ve.defaultProps={"data-componentid":"console-roles-edit-page"};const ye=ve},33467:e=>{e.exports=[[e.id,".console-role-permissions .section-heading{margin-bottom:2rem}.console-role-permissions .submit-button{margin-top:2rem}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnNvbGUtcm9sZXMtZWRpdC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJDQUEyQyxrQkFBa0IsQ0FBQyx5Q0FBeUMsZUFBZSIsImZpbGUiOiJjb25zb2xlLXJvbGVzLWVkaXQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jb25zb2xlLXJvbGUtcGVybWlzc2lvbnMgLnNlY3Rpb24taGVhZGluZ3ttYXJnaW4tYm90dG9tOjJyZW19LmNvbnNvbGUtcm9sZS1wZXJtaXNzaW9ucyAuc3VibWl0LWJ1dHRvbnttYXJnaW4tdG9wOjJyZW19Il19 */","",""]]},93591:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(43112),o=n(31549),a=n(65925),l=n(14517),i=n(44194),c=n(17273);const u="Paper",s=(0,i.forwardRef)(((e,t)=>{const{className:n}=e,i=(0,r.__rest)(e,["className"]),c=(0,l.Z)("oxygen-paper",n);return(0,o.jsx)(a.Z,Object.assign({className:c},i,{ref:t}))}));s.displayName=(0,c.I)(u),s.muiName=u,s.defaultProps={};const d=s}}]);