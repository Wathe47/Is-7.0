"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[53346],{53346:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var n=r(86727),s=r(44194),a=r(10479),i=r(47245),l=r(33040),u=r(90984),o=r(79250),c=r(24393),d=r(37313),f=r(117),m=r(17507);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,i,l=[],u=!0,o=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){o=!0,s=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(o)throw s}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=function(e){var t=e.guestUsersList,r=e.getGuestUsersList,C=e.isGuestUsersRequestLoading,h=e.isOnboardedGuestUsersListRequestLoading,E=e.onboardedGuestUserList,v=e.invitationStatusOption,S=e.handleInvitationStatusOptionChange,g=e.onEmptyListPlaceholderActionClick,A=e.getUsersList,P=e.isNextPage,y=e.isDescriptionShown,b=e.setDescriptionShown,U=(0,a.$)().t,L=(0,n.fQ)().getLink,T=p((0,s.useState)(""),2),D=T[0],O=T[1],I=p((0,s.useState)(0),2),w=I[0],X=I[1],_=p((0,s.useState)(c.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),N=_[0],k=_[1],x=p((0,s.useState)(!1),2),R=x[0],G=x[1],Q=p((0,s.useState)([]),2),M=Q[0],F=Q[1],q=p((0,s.useState)([]),2),H=q[0],j=q[1],V=p((0,s.useState)([]),2),W=V[0],z=V[1],B=p((0,s.useState)(!1),2),K=B[0],Y=B[1],$=p((0,s.useState)(!1),2),Z=$[0],J=$[1],ee=p((0,s.useState)(!1),2),te=ee[0],re=ee[1],ne=(0,i.v9)((function(e){return e.config.ui.features}));(0,s.useEffect)((function(){y(m.AdministratorConstants.QUEST_DESCRIPTION_SHOWN_STATUS_KEY)&&J(!0)}),[]),(0,s.useEffect)((function(){if(v!==f.XC.ACCEPTED){if(X(0),"email co "===D||""===D||null===D)return F(t),void z([]);if(D){var e=t;if(W.length>0&&(e=W),D.includes("email sw ")){var r=D.split("sw ")[1];e=e.filter((function(e){return e.email.startsWith(r)}))}else if(D.includes("email ew ")){var n=D.split("ew ")[1];e=e.filter((function(e){return e.email.endsWith(n)}))}else if(D.includes("email eq ")){var s=D.split("eq ")[1];e=e.filter((function(e){return e.email===s}))}else if(D.includes("email co ")){var a=D.split("co ")[1];e=e.filter((function(e){return e.email.includes(a)}))}F(e),z(e)}}}),[D]),(0,s.useEffect)((function(){if(v!==f.XC.ACCEPTED){var e=null==M?void 0:M.filter((function(e){return e.status===v.toUpperCase()}));e.length>N?(e=e.slice(w,w+N),j(e),Y(e.length===N)):(j(e),Y(!1))}}),[M,w,N]),(0,s.useEffect)((function(){F(t)}),[t]),(0,s.useEffect)((function(){te&&(X(0),k(c.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),ae(),re(!1))}),[te]),(0,s.useEffect)((function(){v===f.XC.ACCEPTED&&A(N,w+1,null==D||""==D?null:D,null,d.pH)}),[w,N]),(0,s.useEffect)((function(){return r(),f.XC.ACCEPTED.toUpperCase()===v.toUpperCase()&&(E&&0!=E.totalResults||(t.filter((function(e){return e.status===f.XC.PENDING.toUpperCase()})).length>0?(S(f.XC.PENDING),re(!0)):t.filter((function(e){return e.status===f.XC.EXPIRED.toUpperCase()})).length>0&&(S(f.XC.EXPIRED),re(!0)))),function(){S(f.XC.ACCEPTED),re(!0)}}),[]);var se=[{key:1,text:"Accepted",value:"Accepted"},{key:2,text:"Pending",value:"Pending"},{key:3,text:"Expired",value:"Expired"}],ae=function(){G(!R),O("")},ie=function(e){if(O(e),v===f.XC.ACCEPTED){if("userName sw "===e)return void A(N,w,null,null,d.pH);A(N,w,e,null,d.pH)}},le=function(){J(!1),b(m.AdministratorConstants.QUEST_DESCRIPTION_SHOWN_STATUS_KEY)};return s.createElement(s.Fragment,null,Z&&s.createElement("div",{className:"mt-3 mb-6"},Z&&s.createElement(n.v0,{onDismiss:le,content:s.createElement(s.Fragment,null,s.createElement(n.xv,{className:"message-info-text"},s.createElement(s.Fragment,null,U("extensions:manage.users.descriptions.guestUser"),s.createElement(n.eb,{link:L("manage.users.collaboratorAccounts.learnMore")},U("extensions:common.learnMore")))))})),s.createElement(n.PS,{advancedSearch:s.createElement(c.nC,{onFilter:ie,filterAttributeOptions:v===f.XC.ACCEPTED?[{key:0,text:U("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:U("users:advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}]:[{key:0,text:U("users:advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"email"}],filterAttributePlaceholder:U("users:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:U("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:U("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:U("users:advancedSearch.placeholder"),defaultSearchAttribute:v===f.XC.ACCEPTED?"userName":"email",defaultSearchOperator:"co",triggerClearQuery:R}),currentListSize:v===f.XC.ACCEPTED?null==E?void 0:E.totalResults:null==H?void 0:H.length,listItemLimit:N,onItemsPerPageDropdownChange:function(e,t){k(t.value)},"data-testid":"user-mgt-user-list-layout",onPageChange:function(e,t){X((t.activePage-1)*N)},showPagination:!0,showTopActionPanel:!0,totalPages:v===f.XC.ACCEPTED?Math.ceil((null==E?void 0:E.totalResults)/N):Math.ceil((null==M?void 0:M.length)/N),totalListSize:v===f.XC.ACCEPTED?null==E?void 0:E.totalResults:null==M?void 0:M.length,onSearchQueryClear:ae,paginationOptions:{disableNextButton:v===f.XC.ACCEPTED?!P:!K,disablePreviousButton:w<1},leftActionPanel:s.createElement(l.Z,{"data-testid":"user-mgt-user-list-userstore-dropdown",selection:!0,options:se&&se,onChange:function(e,t){S(t.value),re(!0)},text:"Filter by: ".concat(v)})},v===f.XC.ACCEPTED&&s.createElement(o.OnboardedGuestUsersList,{advancedSearch:s.createElement(c.nC,{onFilter:ie,filterAttributeOptions:[{key:0,text:U("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:U("users:advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],filterAttributePlaceholder:U("users:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:U("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:U("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:U("users:advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:R}),onboardedGuestUsersList:E,userMetaListContent:null,isLoading:h,realmConfigs:null,onEmptyListPlaceholderActionClick:g,onSearchQueryClear:ae,searchQuery:D,"data-testid":"user-mgt-user-list",readOnlyUserStores:null,featureConfig:ne,onUserDelete:function(){return A(N,w,null,null,d.pH)}}),v===f.XC.PENDING&&s.createElement(u.GuestUsersList,{invitationStatusOption:v,onEmptyListPlaceholderActionClick:g,onboardedGuestUserList:E,onSearchQueryClear:ae,guestUsersList:H,getGuestUsersList:function(){return r()},isGuestUsersRequestLoading:C,searchQuery:D}),v===f.XC.EXPIRED&&s.createElement(u.GuestUsersList,{invitationStatusOption:v,onEmptyListPlaceholderActionClick:g,onboardedGuestUserList:E,onSearchQueryClear:ae,guestUsersList:null==H?void 0:H.filter((function(e){return e.status===f.XC.EXPIRED.toUpperCase()})),getGuestUsersList:function(){return r()},isGuestUsersRequestLoading:C,searchQuery:D})))};h.defaultProps={"data-testid":"asgardeo-guest-users"};const E=h}}]);