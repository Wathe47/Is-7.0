"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[79250,17507,65230,13090,49789,17510],{79250:(e,n,t)=>{t.r(n),t.d(n,{OnboardedGuestUsersList:()=>U});var i=t(24184),s=t(71015),o=t(54833),r=t(93129),a=t(3356),l=t(86727),c=t(44194),u=t(10479),d=t(47245),m=t(12638),p=t(26154),v=t(37077),E=t(24393),g=t(39594),A=t(32514),f=t(18867),h=t(31659),T=t(61145),S=t(94854),y=t(17507);function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,s,o,r,a=[],l=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;l=!1}else for(;!(l=(i=o.call(t)).done)&&(a.push(i.value),a.length!==n);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=t.return&&(r=t.return(),Object(r)!==r))return}finally{if(c)throw s}}return a}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return C(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return C(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var U=function(e){var n=e.adminType,t=e.adminRoleId,C=e.advancedSearch,U=e.defaultListItemLimit,I=e.onUserDelete,_=e.isLoading,N=e.readOnlyUserStores,O=e.featureConfig,L=e.onColumnSelectionChange,M=e.onListItemClick,b=e.onSearchQueryClear,w=e.realmConfigs,D=e.searchQuery,k=e.selection,P=e.showListItemActions,V=e.onboardedGuestUsersList,x=e.associationType,F=e["data-componentid"],Y=(0,u.$)().t,j=(0,d.I0)(),Q=R((0,c.useState)(!1),2),X=Q[0],G=Q[1],Z=R((0,c.useState)(void 0),2),z=Z[0],B=Z[1],H=R((0,l.ZK)(),3),W=H[0],$=H[1],q=H[2],K=R((0,c.useState)({}),2),J=K[0],ee=K[1],ne=R((0,c.useState)(!1),2),te=ne[0],ie=ne[1],se=(0,d.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.username})),oe=(0,d.v9)((function(e){var n;return null==e||null===(n=e.auth)||void 0===n?void 0:n.allowedScopes})),re=(0,d.v9)((function(e){return e.auth.isPrivilegedUser})),ae=(0,i.Ac)(S.FeatureGateConstants.SAAS_FEATURES_IDENTIFIER);(0,c.useEffect)((function(){ee(V||{})}),[V]);var le=function(e){"id"in e&&E.m8.push(y.AdministratorConstants.getPaths().get("COLLABORATOR_USER_EDIT_PATH").replace(":id",e.id)),"value"in e&&E.m8.push(y.AdministratorConstants.getPaths().get("COLLABORATOR_USER_EDIT_PATH").replace(":id",e.value))},ce=function(e){var t;return n===y.AdminAccountTypes.EXTERNAL&&(null===(t=e[T.SCIMConfigs.scim.enterpriseSchema])||void 0===t?void 0:t.userAccountType)===y.UserAccountTypes.OWNER?c.createElement(v.Z,{size:"small"},"Owner"):null},ue=function(e){return n===y.AdminAccountTypes.INTERNAL||(null==se?void 0:se.split("@").length)<3?null:(null==se?void 0:se.split("@").slice(0,2).join("@"))===(0,o.WX)(null==e?void 0:e.userName)?c.createElement(v.Z,{size:"small"},"Me"):null},de=function(){return D&&0===(null==J?void 0:J.totalResults)?c.createElement(l.$J,{action:c.createElement(l.Qj,{onClick:b},Y("users:usersList.search.emptyResultPlaceholder.clearButton")),image:(0,E.jF)().emptySearch,imageSize:"tiny",title:Y("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[Y("users:usersList.search.emptyResultPlaceholder.subTitle.0",{query:D}),Y("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}):0===(null==J?void 0:J.totalResults)?c.createElement(l.$J,{"data-componentid":"".concat(F,"-empty-placeholder"),image:(0,E.jF)().newList,imageSize:"tiny",subtitle:["There are no collaborator users associated with your organization at the moment."]}):null};return c.createElement(c.Fragment,null,c.createElement(l.wQ,{className:"users-table",externalSearch:C,isLoading:_,loadingStateOptions:{count:null!=U?U:E.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},actions:function(){if(P){var e=[{"data-componentid":"administrators-list-item-edit-button",hidden:function(){return!(0,o.cr)(null==O?void 0:O.users,f._F.FEATURE_DICTIONARY.get("USER_READ"))},icon:function(e){var t,i,s,r=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(i=e.userName)||void 0===i?void 0:i.split("/")[0]:"PRIMARY";return!(0,o.Xr)(null==O?void 0:O.users,null==O||null===(s=O.users)||void 0===s||null===(s=s.scopes)||void 0===s?void 0:s.update,oe)||!(0,o.cr)(null==O?void 0:O.users,f._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=N&&N.includes(r.toString())||n===y.AdminAccountTypes.EXTERNAL?"eye":"pencil alternate"},onClick:function(e,n){return le(n)},popupText:function(e){var t,i,s,r=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(i=e.userName)||void 0===i?void 0:i.split("/")[0]:"PRIMARY";return!(0,o.Xr)(null==O?void 0:O.users,null==O||null===(s=O.users)||void 0===s||null===(s=s.scopes)||void 0===s?void 0:s.update,oe)||!(0,o.cr)(null==O?void 0:O.users,f._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=N&&N.includes(r.toString())||n===y.AdminAccountTypes.EXTERNAL?Y("common:view"):Y("common:edit")},renderer:"semantic-icon"}];return e.push({"data-componentid":"administrators-list-item-delete-button",hidden:function(e){var t,i,r,a=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(i=e.userName)||void 0===i?void 0:i.split("/")[0]:s.ss.PRIMARY_USER_STORE;return!(0,o.cr)(null==O?void 0:O.users,f._F.FEATURE_DICTIONARY.get("USER_DELETE"))||re||!(0,o.Xr)(null==O?void 0:O.users,null==O||null===(r=O.users)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.delete,oe)||(null==N?void 0:N.includes(a.toString()))||n===y.AdminAccountTypes.EXTERNAL&&((0,o.WX)(null==e?void 0:e.userName)===(null==w?void 0:w.adminUser)||(null==se?void 0:se.includes((0,o.WX)(null==e?void 0:e.userName))))||x===y.GUEST_ADMIN_ASSOCIATION_TYPE},icon:function(){return"trash alternate"},onClick:function(e,n){G(!0),B(n)},popupText:function(){return Y("users:usersList.list.iconPopups.delete")},renderer:"semantic-icon"}),e}}(),columns:function(){var e=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var n,t,i,s=(0,o.WX)(null==e?void 0:e.userName),r=h.QH.resolveUserListSubheader(e),a=void 0!==(null===(n=e.name)||void 0===n?void 0:n.familyName)||void 0!==(null===(t=e.name)||void 0===t?void 0:t.givenName);return c.createElement(m.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(F,"-item-heading")},c.createElement(l.Yt,{"data-componentid":"users-list-item-image",name:(null===(i=e.userName.split("/"))||void 0===i?void 0:i.length)>1?e.userName.split("/")[1]:e.userName.split("/")[0],size:"mini",image:e.profileUrl,spaced:"right","data-hj-suppress":""}),c.createElement(m.Z.Content,null,s,ce(e),ue(e),a&&c.createElement(m.Z.Subheader,{"data-componentid":"".concat(F,"-item-sub-heading")},r)))},title:"User"}];if(ae===i.iK.ENABLED){var t={allowToggleVisibility:!1,dataIndex:"idpType",id:"idpType",key:"idpType",render:function(e){var n,t,i,s;return null!==(n=e[T.SCIMConfigs.scim.enterpriseSchema])&&void 0!==n&&n.idpType?(null===(t=e[T.SCIMConfigs.scim.enterpriseSchema])||void 0===t?void 0:t.idpType.split("/").length)>1?null===(s=e[T.SCIMConfigs.scim.enterpriseSchema])||void 0===s?void 0:s.idpType.split("/")[1]:null===(i=e[T.SCIMConfigs.scim.enterpriseSchema])||void 0===i?void 0:i.idpType:"N/A"},title:c.createElement(c.Fragment,null,c.createElement("div",{className:"header-with-popup"},c.createElement("span",null,Y("extensions:manage.users.list.columns.idpType")),c.createElement(l.GI,{trigger:c.createElement("div",{className:"inline"},c.createElement(p.Z,{disabled:!0,name:"info circle",className:"link pointing pl-1"})),content:Y("extensions:manage.users.list.popups.content.idpTypeContent"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0})))};e.push(t)}e.push({allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""});var s=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var n,t=(null===(n=e.display.split("/"))||void 0===n?void 0:n.length)>1?e.display.split("/")[1]:e.display.split("/")[0];return c.createElement(m.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(F,"-item-heading")},c.createElement(l.Yt,{"data-componentid":"users-list-item-image",name:t,size:"mini",spaced:"right","data-hj-suppress":""}),c.createElement(m.Z.Content,null,t))},title:"User"},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""}];return n===y.AdminAccountTypes.INTERNAL?s:e}(),data:J.Resources,onColumnSelectionChange:L,onRowClick:function(e,n){le(n),M&&M(e,n)},placeholders:de(),selectable:k,showHeader:ae===i.iK.ENABLED,transparent:!_&&null!==de(),"data-componentid":F}),z&&c.createElement(l.cV,{primaryActionLoading:te,"data-componentid":"".concat(F,"-confirmation-modal"),onClose:function(){return G(!1)},type:"negative",open:X,assertionHint:Y("user:deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){G(!1),$(null)},onPrimaryActionClick:function(){ie(!0),function(e){var n,i,s=null!==(n=e[T.SCIMConfigs.scim.enterpriseSchema])&&void 0!==n&&n.userAccountType?null===(i=e[T.SCIMConfigs.scim.enterpriseSchema])||void 0===i?void 0:i.userAccountType:y.UserAccountTypes.CUSTOMER;if(s===y.UserAccountTypes.COLLABORATOR&&"id"in e)return(0,A.e8)(e.id).then((function(){j((0,a.V_)({description:Y("invite:notifications.deleteInvite.success.description"),level:r.QU.SUCCESS,message:Y("users:notifications.deleteUser.success.message")})),I()})).catch((function(e){e.response&&e.response.data&&e.response.data.description?j((0,a.V_)({description:e.response.data.description,level:r.QU.ERROR,message:Y("users:notifications.deleteUser.error.message")})):j((0,a.V_)({description:Y("users:notifications.deleteUser.genericError.description"),level:r.QU.ERROR,message:Y("users:notifications.deleteUser.genericError.message")}))})).finally((function(){ie(!1),G(!1),B(void 0)}));if(s===y.UserAccountTypes.CUSTOMER){var o;"value"in e?o="users[value eq ".concat(null==e?void 0:e.value,"]"):"id"in e&&(o="users[value eq ".concat(null==e?void 0:e.id,"]"));var l={Operations:[{op:"remove",path:o,value:{}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};(0,g.dB)(t,l).then((function(){j((0,a.V_)({description:Y("users:notifications.revokeAdmin.success.description"),level:r.QU.SUCCESS,message:Y("users:notifications.revokeAdmin.success.message")})),I()})).catch((function(e){var n,t;null!=e&&null!==(n=e.response)&&void 0!==n&&null!==(n=n.data)&&void 0!==n&&n.description?j((0,a.V_)({description:null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description,level:r.QU.ERROR,message:Y("users:notifications.revokeAdmin.error.message")})):j((0,a.V_)({description:Y("users:notifications.revokeAdmin.genericError.description"),level:r.QU.ERROR,message:Y("users:notifications.revokeAdmin.genericError.message")}))})).finally((function(){ie(!1),G(!1),B(void 0)}))}}(z)},closeOnDimmerClick:!1},c.createElement(l.cV.Header,{"data-componentid":"".concat(F,"-confirmation-modal-header")},Y("user:deleteUser.confirmationModal.header")),c.createElement(l.cV.Message,{"data-componentid":"".concat(F,"-confirmation-modal-message"),attached:!0,negative:!0},Y("extensions:manage.guest.deleteUser.confirmationModal.message")),c.createElement(l.cV.Content,{"data-componentid":"".concat(F,"-confirmation-modal-content")},c.createElement("div",{className:"modal-alert-wrapper"}," ",W&&q),Y("extensions:manage.guest.deleteUser.confirmationModal.content"))))};U.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0}},17507:(e,n,t)=>{t.r(n),t.d(n,{ADMIN_USER_NAME:()=>i.ADMIN_USER_NAME,ADVANCED_USER_MGT:()=>i.ADVANCED_USER_MGT,AdminAccountTypes:()=>i.AdminAccountTypes,AdministratorConstants:()=>i.AdministratorConstants,CONSUMER_USERSTORE:()=>i.CONSUMER_USERSTORE,GUEST_ADMIN_ASSOCIATION_TYPE:()=>i.GUEST_ADMIN_ASSOCIATION_TYPE,PRIMARY_USERSTORE:()=>i.PRIMARY_USERSTORE,UserAccountTypes:()=>i.UserAccountTypes});var i=t(7404)}}]);