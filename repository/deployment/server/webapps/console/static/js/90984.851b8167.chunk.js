"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[90984,93180],{90984:(e,t,n)=>{n.r(t),n.d(t,{GuestUsersList:()=>h});var i=n(54833),o=n(93129),r=n(3356),l=n(86727),a=n(44194),s=n(10479),c=n(47245),u=n(12638),d=n(93180),m=n(24393),v=n(117),f=n(32514);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,l,a=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=r.call(n)).done)&&(a.push(i.value),a.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var h=function(e){var t,n=e.guestUsersList,g=e.getGuestUsersList,h=e.isGuestUsersRequestLoading,y=e.invitationStatusOption,S=e.searchQuery,b=e.onSearchQueryClear,E=e["data-testid"],I=(0,s.$)().t,C=(0,c.I0)(),w=p((0,a.useState)(!1),2),R=w[0],A=w[1],k=p((0,a.useState)(void 0),2),U=k[0],M=k[1],O=p((0,a.useState)(!1),2),V=O[0],j=O[1],T=p((0,a.useState)(void 0),2),Q=T[0],Z=T[1],x=p((0,a.useState)(void 0),2),_=x[0],L=x[1],H=p((0,a.useState)(!1),2),N=H[0],P=H[1],X=p((0,a.useState)(!1),2),$=X[0],z=X[1],F=p((0,a.useState)(!0),1)[0],J=p((0,a.useState)(!1),2),D=J[0],G=J[1],q=(0,c.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),B=(0,c.v9)((function(e){return e.config.ui.features})),K=function(e){G(!0),function(e){return(0,f.UF)(e).then((function(){C((0,r.V_)({description:I("invite:notifications.deleteInvite.success.description"),level:o.QU.SUCCESS,message:I("invite:notifications.deleteInvite.success.message")})),g()})).catch((function(e){var t,n,i,l,a,s,c;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?C((0,r.V_)({description:null!==(n=null!==(i=null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.description)&&void 0!==i?i:null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.detail)&&void 0!==n?n:I("invite:notifications.deleteInvite.error.description"),level:o.QU.ERROR,message:null!==(s=null==e||null===(c=e.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)&&void 0!==s?s:I("invite:notifications.deleteInvite.error.message")})):C((0,r.V_)({description:I("invite:notifications.deleteInvite.genericError.description"),level:o.QU.ERROR,message:I("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){G(!1),A(!1),g()}))},W=function(e){G(!0),function(e){return(0,f.c_)(e).then((function(){C((0,r.V_)({description:I("invite:notifications.resendInvite.success.description"),level:o.QU.SUCCESS,message:I("invite:notifications.resendInvite.success.message")}))})).catch((function(e){var t,n,i,l,a,s,c;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?C((0,r.V_)({description:null!==(n=null!==(i=null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.description)&&void 0!==i?i:null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.detail)&&void 0!==n?n:I("invite:notifications.resendInvite.error.description"),level:o.QU.ERROR,message:null!==(s=null==e||null===(c=e.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)&&void 0!==s?s:I("invite:notifications.resendInvite.error.message")})):C((0,r.V_)({description:I("invite:notifications.resendInvite.genericError.description"),level:o.QU.ERROR,message:I("invite:notifications.resendInvite.genericError.message")}))}))}(e).finally((function(){G(!1),j(!1),g()}))},Y=function(){return S&&0===(null==n?void 0:n.length)?a.createElement(l.$J,{action:a.createElement(l.Qj,{onClick:b},I("invite:placeholder.emptySearchResultPlaceholder.clearButton")),image:(0,m.jF)().emptySearch,imageSize:"tiny",title:I("invite:placeholder.emptySearchResultPlaceholder.title"),subtitle:[I("invite:placeholder.emptySearchResultPlaceholder.subTitle.0",{query:S}),I("invite:placeholder.emptySearchResultPlaceholder.subTitle.1")]}):0===(null==n?void 0:n.length)?y===v.XC.EXPIRED?a.createElement(l.$J,{image:(0,m.jF)().newList,imageSize:"tiny",subtitle:["There are no collaborator users with expired invitations at the moment."]}):a.createElement(l.$J,{image:(0,m.jF)().newList,imageSize:"tiny",subtitle:["There are no collaborator users with pending invitations at the moment."]}):null},ee=function(e,t){var n={roles:t};z(!0),(0,f.Dy)(e,n).then((function(){C((0,r.V_)({description:I("invite:notifications.updateInvite.success.description"),level:o.QU.SUCCESS,message:I("invite:notifications.updateInvite.success.message")})),g()})).catch((function(e){var t,n,i,l,a,s,c;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?C((0,r.V_)({description:null!==(n=null!==(i=null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.description)&&void 0!==i?i:null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.detail)&&void 0!==n?n:I("invite:notifications.updateInvite.error.description"),level:o.QU.ERROR,message:null!==(s=null==e||null===(c=e.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)&&void 0!==s?s:I("invite:notifications.updateInvite.error.message")})):C((0,r.V_)({description:I("invite:notifications.updateInvite.genericError.description"),level:o.QU.ERROR,message:I("invite:notifications.updateInvite.genericError.message")}))})).finally((function(){z(!1)})),P(!1)};return a.createElement(a.Fragment,null,a.createElement(l.wQ,{showSearch:!0,padded:!0,isLoading:h,loadingStateOptions:{count:5,imageType:"square"},placeholders:Y(),actions:[{hidden:function(){return F},icon:function(){return"briefcase"},onClick:function(e,t){L(t),P(!0)},popupText:function(){return"roles"},renderer:"semantic-icon"},{hidden:function(){var e;return!(0,i.Xr)(null==B?void 0:B.users,null==B||null===(e=B.users)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,q)},icon:function(){return"redo alternate"},onClick:function(e,t){Z(t),j(!0)},popupText:function(){return"resend"},renderer:"semantic-icon"},{hidden:function(){var e;return!(0,i.Xr)(null==B?void 0:B.users,null==B||null===(e=B.users)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,q)},icon:function(){return"trash alternate"},onClick:function(e,t){M(t),A(!0)},popupText:function(){return"delete"},renderer:"semantic-icon"}],data:n,columns:[{allowToggleVisibility:!1,dataIndex:"email",id:"email",key:0,render:function(e){return a.createElement(u.Z,{as:"h6",image:!0},a.createElement(l.JT,{image:a.createElement(l.Xo,{name:e.email,size:"mini","data-testid":"".concat(E,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(E,"-item-image"),"data-hj-suppress":""}),a.createElement(u.Z.Content,null,e.email,a.createElement(u.Z.Subheader,null,e.roles.toString())))},title:"User"},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:1,render:function(e){var t=e.status;return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()},textAlign:"left",title:"Invitation Status"},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:3,textAlign:"right",title:""}],onRowClick:null,showHeader:!0,transparent:!h&&null!==Y()}),a.createElement(d.InviteeRoleSelection,{invitee:_,showSelectionModal:N,handleSelectionModalClose:function(){return P(!1)},handleInviteeRolesUpdate:ee,readOnly:!(0,i.Xr)(null==B?void 0:B.users,null==B||null===(t=B.users)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update,q),isSubmitting:$}),R&&a.createElement(l.cV,{primaryActionLoading:D,"data-testid":"".concat(E,"-confirmation-modal"),onClose:function(){return A(!1)},type:"negative",open:R,assertion:U.email,assertionHint:I("invite:confirmationModal.deleteInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return A(!1)},onPrimaryActionClick:function(){return K(U.id)},closeOnDimmerClick:!1},a.createElement(l.cV.Header,{"data-testid":"".concat(E,"-confirmation-modal-header")},I("invite:confirmationModal.deleteInvite.header")),a.createElement(l.cV.Message,{"data-testid":"".concat(E,"-confirmation-modal-message"),attached:!0,negative:!0},I("invite:confirmationModal.deleteInvite.message")),a.createElement(l.cV.Content,{"data-testid":"".concat(E,"-confirmation-modal-content")},I("invite:confirmationModal.deleteInvite.content"))),V&&a.createElement(l.cV,{primaryActionLoading:D,"data-testid":"".concat(E,"-confirmation-modal"),onClose:function(){return j(!1)},type:"warning",open:V,assertion:Q.email,assertionHint:I("invite:confirmationModal.resendInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return j(!1)},onPrimaryActionClick:function(){return W(Q.id)},closeOnDimmerClick:!1},a.createElement(l.cV.Header,{"data-testid":"".concat(E,"-confirmation-modal-header")},I("invite:confirmationModal.resendInvite.header")),a.createElement(l.cV.Message,{"data-testid":"".concat(E,"-confirmation-modal-message"),attached:!0,warning:!0},I("invite:confirmationModal.resendInvite.message")),a.createElement(l.cV.Content,{"data-testid":"".concat(E,"-confirmation-modal-content")},I("invite:confirmationModal.resendInvite.content"))))}},93180:(e,t,n)=>{n.r(t),n.d(t,{InviteeRoleSelection:()=>p});var i=n(86727),o=n(44194),r=n(10479),l=n(47018),a=n(77757),s=n(62508),c=n(89141),u=n(12742);function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r,l,a=[],s=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(i=r.call(n)).done)&&(a.push(i.value),a.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw o}}return a}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var p=function(e){var t=e.invitee,n=e.showSelectionModal,v=e.handleSelectionModalClose,f=e.handleInviteeRolesUpdate,p=e.readOnly,g=e.isSubmitting,h=(0,r.$)().t,y=(0,i.fQ)().getLink,S=m((0,o.useState)(void 0),2),b=S[0],E=S[1],I=m((0,o.useState)(void 0),2)[1],C=m((0,o.useState)(void 0),2),w=C[0],R=C[1],A=m((0,o.useState)(!1),2)[1],k=m((0,o.useState)(!1),1)[0];(0,o.useEffect)((function(){var e=[];A(!0),(0,u.Sd)(null).then((function(t){t.data.Resources.map((function(t){"system"!==t.displayName&&"everyone"!==t.displayName&&"selfsignup"!==t.displayName&&e.push(t)})),E(e),I(e)})).finally((function(){A(!1)}))}),[]),(0,o.useEffect)((function(){null!=t&&t.roles&&R(t.roles)}),[null==t?void 0:t.roles]),(0,o.useEffect)((function(){if(k){var e=d(null==t?void 0:t.roles);b.map((function(t){e.push(t.displayName)})),R(e)}else R([])}),[k]);return o.createElement(l.Z,{open:n,size:"small",className:"user-roles attribute-modal",dimmer:"blurring"},o.createElement(l.Z.Header,null,h("invite:rolesUpdateModal.header"),o.createElement(i.X6,{subHeading:!0,ellipsis:!0,as:"h6"},h("invite:rolesUpdateModal.subHeader"),o.createElement(i.eb,{link:y("manage.users.collaboratorAccounts.roles.learnMore")},h("extensions:common.learnMore")))),o.createElement(l.Z.Content,null,o.createElement(i.pJ,null,o.createElement(a.Z.Group,null,o.createElement(s.Z,{hidden:!0}),null==b?void 0:b.map((function(e,t){var n,i=null==e||null===(n=e.displayName)||void 0===n?void 0:n.split("/");if((null==i?void 0:i.length)>=1&&!i.includes("everyone")&&!i.includes("system")&&!i.includes("selfsignup"))return o.createElement(o.Fragment,null,o.createElement(a.Z.Radio,{onChange:function(){return function(e){var t=[];t.push(e),R(t)}(null==e?void 0:e.displayName)},key:t,label:(null==i?void 0:i.length)>1?i[1]:i[0],checked:w.includes(null==e?void 0:e.displayName),"data-testid":"user-mgt-update-roles-modal-unselected-roles",readOnly:p}),o.createElement(s.Z,{hidden:!0}))}))))),o.createElement(l.Z.Actions,null,o.createElement(c.Z,null,o.createElement(c.Z.Row,{column:2},o.createElement(c.Z.Column,{mobile:8,tablet:8,computer:8},o.createElement(i.Qj,{"data-testid":"group-mgt-update-roles-modal-cancel-button",floated:"left",onClick:v},h("common:cancel"))),o.createElement(c.Z.Column,{mobile:8,tablet:8,computer:8},!p&&o.createElement(i.KM,{"data-testid":"group-mgt-update-roles-modal-save-button",floated:"right",onClick:function(){return f(null==t?void 0:t.id,w)},loading:g,disabled:g},h("common:save")))))))}}}]);