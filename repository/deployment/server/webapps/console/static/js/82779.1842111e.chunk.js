"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[82779],{82779:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var o=n(95817),a=n(54833),r=n(93129),i=n(3356),s=n(14045),l=n(86727),c=n(44194),d=n(10479),u=n(59673),m=n(47245),p=n(26154),f=n(37077),v=n(61145),g=n(58561),h=n(24393),A=n(8449),S=n(57550),E=n(86375),b=n(32514),I=n(83179),C=n(86898),O=n(31659);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,a,r,i,s=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=r.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}const R=function(){var e,t,n,N,R,M,U,_,T=(0,d.$)().t,k=(0,m.I0)(),w=(0,m.v9)((function(e){return e.config.ui.features})),P=(0,m.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),G=(0,m.v9)((function(e){return e.profile.profileInfo})),D=y((0,c.useState)(void 0),2),L=D[0],x=D[1],B=y((0,c.useState)(!1),2),Z=B[0],z=B[1],Q=y((0,c.useState)(void 0),2),X=Q[0],$=Q[1],j=y((0,c.useState)(!1),2),F=j[0],V=j[1],W=y((0,c.useState)(!1),2),J=W[0],q=W[1],H=h.m8.location.pathname.split("/"),K=H[H.length-1],Y=(0,b.vU)(K),ee=Y.data,te=Y.isLoading,ne=Y.isValidating,oe=Y.mutate,ae=Y.error,re=(0,S.XJ)(E.v.ACCOUNT_MANAGEMENT_CATEGORY_ID).data,ie=(0,S.XJ)(E.v.USER_ONBOARDING_CONNECTOR_ID).data,se=(0,c.useMemo)((function(){return ee||(0,r.I)()}),[ee]),le=void 0===(null==se||null===(e=se.name)||void 0===e?void 0:e.familyName)&&void 0===(null==se||null===(t=se.name)||void 0===t?void 0:t.givenName);(0,c.useEffect)((function(){var e=[];re&&re.map((function(t){t.id!==E.v.ACCOUNT_DISABLING_CONNECTOR_ID&&t.id!==E.v.ADMIN_FORCE_PASSWORD_RESET_CONNECTOR_ID||t.properties.map((function(t){e.push(t)}))})),ie&&ie.map((function(t){t.id===E.v.SELF_SIGN_UP_CONNECTOR_ID&&t.properties.map((function(t){t.name===E.v.ACCOUNT_LOCK_ON_CREATION&&e.push(t)}))})),$(e)}),[re,ie]),(0,c.useEffect)((function(){V(!0),h.w3.getReadOnlyUserStores().then((function(e){x(e)})).finally((function(){V(!1)}))}),[]),(0,c.useEffect)((function(){ae&&(ae.response&&ae.response.data&&ae.response.data.description?k((0,i.V_)({description:ae.response.data.description,level:r.QU.ERROR,message:T("console:manage.notifications.getProfileInfo.error.message")})):k((0,i.V_)({description:T("console:manage.notifications.getProfileSchema.genericError.description"),level:r.QU.ERROR,message:T("console:manage.notifications.getProfileSchema.genericError.message")})))}),[ae]);var ce=function(){oe(),O.QH.isAuthenticatedUser(null==G?void 0:G.userName,null==se?void 0:se.userName)&&k((0,g.G)())},de=function(){return!le&&O.QH.resolveUserListSubheaderName(se)};return ae?c.createElement(l.$J,{action:c.createElement(o.Z,{variant:"text",onClick:s.CommonUtils.refreshPage},T("console:common.placeholders.brokenPage.action")),image:(0,h.jF)().brokenPage,imageSize:"tiny",subtitle:[T("console:common.placeholders.brokenPage.subtitles.0"),T("console:common.placeholders.brokenPage.subtitles.1")],title:T("console:common.placeholders.brokenPage.title")}):c.createElement(C.Z,null,c.createElement(l.O9,{isLoading:te||ne,loadingStateOptions:{count:5,imageType:"circular"},title:c.createElement(c.Fragment,null,void 0!==(null==se?void 0:se.active)?c.createElement(c.Fragment,null,null!=se&&se.active?c.createElement(l.GI,{trigger:c.createElement(p.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"green"}),content:T("common:enabled"),inverted:!0}):c.createElement(l.GI,{trigger:c.createElement(p.Z,{className:"mr-2 ml-0 vertical-aligned-baseline",size:"small",name:"circle",color:"orange"}),content:T("common:disabled"),inverted:!0}),(0,a.WX)(null==se?void 0:se.userName)):c.createElement(c.Fragment,null,(0,a.WX)(null==se?void 0:se.userName))),pageTitle:"Edit User",description:c.createElement("div",null,de(),(null===(n=se[v.SCIMConfigs.scim.enterpriseSchema])||void 0===n?void 0:n.userSourceId)&&c.createElement(f.Z,{className:"profile-user-source-label"},c.createElement(l.dn,{className:"mt-1 mb-0",square:!0,inline:!0,size:"default",transparent:!0,icon:function(e){switch(e){case"Google":return(0,A.nI)().google;case"facebook":return(0,A.nI)().facebook;case"Github":return(0,A.nI)().github;case"Microsoft":return(0,A.nI)().microsoft;case"Apple":return(0,A.nI)().apple;default:return(0,A.nI)().enterprise}}(null===(N=se[v.SCIMConfigs.scim.enterpriseSchema])||void 0===N?void 0:N.idpType),verticalAlign:"middle"}),c.createElement(f.Z.Detail,{className:"mt-1 ml-0 mb-1"},null===(R=se[v.SCIMConfigs.scim.enterpriseSchema])||void 0===R?void 0:R.userSourceId)),(null===(M=se[v.SCIMConfigs.scim.enterpriseSchema])||void 0===M?void 0:M.userSource)&&c.createElement(f.Z,{className:de()?"profile-user-source-label":"profile-user-source-label ml-0"},c.createElement(l.dn,{className:"mt-1 mb-0",square:!0,inline:!0,size:"default",transparent:!0,icon:(0,h.Uz)().userStore,verticalAlign:"middle"}),c.createElement(f.Z.Detail,{className:"mt-1 ml-0 mb-1"},null===(U=se[v.SCIMConfigs.scim.enterpriseSchema])||void 0===U?void 0:U.userSource))),image:c.createElement(l.Yt,{editable:(0,a.Xr)(null==w?void 0:w.users,null==w||null===(_=w.users)||void 0===_||null===(_=_.scopes)||void 0===_?void 0:_.update,P),name:(0,a.nk)(se),size:"tiny",image:null==se?void 0:se.profileUrl,onClick:function(){var e;return(0,a.Xr)(null==w?void 0:w.users,null==w||null===(e=w.users)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,P)&&z(!0)}}),backButton:{"data-testid":"user-mgt-edit-user-back-button",onClick:function(){window.location.href.includes(h.$x.getPaths().get("ADMINISTRATORS"))?h.m8.push(h.$x.getPaths().get("ADMINISTRATORS")):h.m8.push(h.$x.getPaths().get("USERS"))},text:window.location.href.includes(h.$x.getPaths().get("ADMINISTRATORS"))?T("pages:usersEdit.backButton",{type:"Administrators"}):T("pages:usersEdit.backButton",{type:"Users"})},titleTextAlign:"left",bottomMargin:!1},c.createElement(I.X,{featureConfig:w,user:se,handleUserUpdate:ce,readOnlyUserStores:L,connectorProperties:X,isLoading:te||ne,isReadOnlyUserStoresLoading:F}),Z&&c.createElement(l.Oi,{open:Z,name:(0,a.nk)(se),emails:(0,a.r1)(null==se?void 0:se.emails),onClose:function(){return z(!1)},closeOnDimmerClick:!1,onCancel:function(){return z(!1)},onSubmit:function(e,t){var n={Operations:[{op:"replace",value:{profileUrl:t}}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};q(!0),(0,b.gS)(null==se?void 0:se.id,n).then((function(){k((0,i.V_)({description:T("user:profile.notifications.updateProfileInfo.success.description"),level:r.QU.SUCCESS,message:T("user:profile.notifications.updateProfileInfo.success.message")})),ce()})).catch((function(e){e.response&&e.response.data&&(e.response.data.description||e.response.data.detail)?k((0,i.V_)({description:e.response.data.description||e.response.data.detail,level:r.QU.ERROR,message:T("user:profile.notifications.updateProfileInfo.error.message")})):k((0,i.V_)({description:T("user:profile.notifications.updateProfileInfo.genericError.description"),level:r.QU.ERROR,message:T("user:profile.notifications.updateProfileInfo.genericError.message")}))})).finally((function(){z(!1),q(!1)}))},imageUrl:null==G?void 0:G.profileUrl,isSubmitting:J,heading:T("console:common.modals.editAvatarModal.heading"),submitButtonText:T("console:common.modals.editAvatarModal.primaryButton"),cancelButtonText:T("console:common.modals.editAvatarModal.secondaryButton"),translations:{gravatar:{errors:{noAssociation:{content:c.createElement(u.c,{i18nKey:"console:common.modals.editAvatarModal.content.gravatarerrors.noAssociation.content"},"It seems like the selected email is not registered on Gravatar. Sign up for a Gravatar account by visiting",c.createElement("a",{href:"https://www.gravatar.com"},"Gravatar Official Website"),"or use one of the following."),header:T("console:common.modals.editAvatarModal.content.gravatar.errors.noAssociation.header")}},heading:T("console:common.modals.editAvatarModal.content.gravatar.heading")},hostedAvatar:{heading:T("console:common.modals.editAvatarModal.content.hostedAvatar.heading"),input:{errors:{http:{content:T("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.content"),header:T("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.http.header")},invalid:{content:T("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.content"),pointing:T("console:common.modals.editAvatarModal.content.hostedAvatar.input.errors.invalid.pointing")}},hint:T("console:common.modals.editAvatarModal.content.hostedAvatar.input.hint"),placeholder:T("console:common.modals.editAvatarModal.content.hostedAvatar.input.placeholder"),warnings:{dataURL:{content:T("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.content"),header:T("console:common.modals.editAvatarModal.content.hostedAvatar.input.warnings.dataURL.header")}}}},systemGenAvatars:{heading:T("console:common.modals.editAvatarModal.content.systemGenAvatars.heading"),types:{initials:T("console:common.modals.editAvatarModal.content.systemGenAvatars.types.initials")}}}})))}}}]);