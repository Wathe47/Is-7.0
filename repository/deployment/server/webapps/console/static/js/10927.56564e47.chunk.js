/*! For license information please see 10927.56564e47.chunk.js.LICENSE.txt */
(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[10927],{31640:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(62632),a=n(3442),i=n(44194),o=n(14517),s=n(45895),l=n(88197),u=n(81081),c=n(36993),d=n(76989),m=n(43315);function p(e){return(0,m.ZP)("MuiAlertTitle",e)}(0,d.Z)("MuiAlertTitle",["root"]);var f=n(31549);const v=["className"],g=(0,l.ZP)(c.Z,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({fontWeight:e.typography.fontWeightMedium,marginTop:-2}))),h=i.forwardRef((function(e,t){const n=(0,u.Z)({props:e,name:"MuiAlertTitle"}),{className:i}=n,l=(0,a.Z)(n,v),c=n,d=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"]},p,t)})(c);return(0,f.jsx)(g,(0,r.Z)({gutterBottom:!0,component:"div",ownerState:c,ref:t,className:(0,o.Z)(d.root,i)},l))}))},23762:(e,t,n)=>{"use strict";n.d(t,{O:()=>s,h:()=>l});var r=n(34148),a=n(93129),i=n(61263),o=r.AsgardeoSPAClient.getInstance().httpRequest.bind(r.AsgardeoSPAClient.getInstance()),s=function(e){var t={data:e,headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.POST,url:i.h.getState().config.endpoints.guests};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))},l=function(e){var t={headers:{"Access-Control-Allow-Origin":i.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:a.f2.DELETE,url:i.h.getState().config.endpoints.guestsList+"/"+e};return o(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}},90760:(e,t,n)=>{"use strict";n.d(t,{M:()=>o});var r=n(93129),a=n(73508),i=n(61263),o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={headers:{"Content-Type":"application/json"},method:r.f2.GET,url:i.h.getState().config.endpoints.guestsList},n=(0,a.Z)(e?t:null),o=n.data,s=n.error;return{data:o,error:s,isLoading:!s&&!o,isValidating:n.isValidating,mutate:n.mutate}}},3989:(e,t,n)=>{"use strict";n.d(t,{YV:()=>r,jI:()=>a});var r=function(e){return e.SUCCESS="Successful",e.FAIL="Failed",e}({}),a=function(e){return e.ERROR_CODE_USER_NOT_FOUND="OUI-10011",e.ERROR_CODE_ACTIVE_INVITATION_EXISTS="OUI-10018",e.ERROR_CODE_INVITED_USER_EMAIL_NOT_FOUND="OUI-10030",e.ERROR_CODE_USER_ALREADY_EXISTS_INVITED_ORGANIZATION="OUI-10032",e}({})},48059:(e,t,n)=>{"use strict";n.d(t,{J:()=>l});var r=n(86769),a=(n(85797),n(78869)),i=n(52932),o=n(84303),s=n(68145),l=function(){return{general:r.r,groups:a.r,roles:o.r,summary:i.r,user:s.r}}},1490:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Tt});var r=n(24184),a=n(54833),i=n(93129),o=n(3356),s=n(86727),l=n(46440),u=n(44194),c=n(10479),d=n(47245),m=n(26154),p=n(33040),f=n(24393),v=n(84870),g=n(94854),h=n(84902),y=n(40518),b=n(97474),E=n(32514),S=n(90760),I=n(12638),C=n(79244),U=n(18867),w=n(117),R=n(23762);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=function(e){var t,n=e.guestUsersList,r=e.getGuestUsersList,l=e.isGuestUsersRequestLoading,m=e.invitationStatusOption,p=e.searchQuery,v=e.onSearchQueryClear,g=e.userTypeSelection,h=e["data-componentid"],y=(0,c.$)().t,b=(0,d.I0)(),E=O((0,u.useState)(!1),2),S=E[0],A=E[1],N=O((0,u.useState)(void 0),2),L=N[0],T=N[1],k=O((0,u.useState)(!1),2),_=k[0],z=k[1],P=O((0,u.useState)(void 0),2),M=P[0],x=P[1],j=O((0,u.useState)(!1),2),Z=j[0],W=j[1],F=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),D=(0,d.v9)((function(e){return e.config.ui.features})),V=function(e){W(!0),g===U.rb.EXTERNAL?function(e){return(0,R.h)(e).then((function(){b((0,o.V_)({description:y("invite:notifications.deleteInvite.success.description"),level:i.QU.SUCCESS,message:y("invite:notifications.deleteInvite.success.message")})),r()})).catch((function(e){var t,n,r,a,s,l,u;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?b((0,o.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.detail)&&void 0!==n?n:y("invite:notifications.deleteInvite.error.description"),level:i.QU.ERROR,message:null!==(l=null==e||null===(u=e.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message)&&void 0!==l?l:y("invite:notifications.deleteInvite.error.message")})):b((0,o.V_)({description:y("invite:notifications.deleteInvite.genericError.description"),level:i.QU.ERROR,message:y("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){W(!1),A(!1),r()})):function(e){return(0,C.UF)(e).then((function(){b((0,o.V_)({description:y("invite:notifications.deleteInvite.success.description"),level:i.QU.SUCCESS,message:y("invite:notifications.deleteInvite.success.message")})),r()})).catch((function(e){var t,n,r,a,s,l,u;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?b((0,o.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.detail)&&void 0!==n?n:y("invite:notifications.deleteInvite.error.description"),level:i.QU.ERROR,message:null!==(l=null==e||null===(u=e.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message)&&void 0!==l?l:y("invite:notifications.deleteInvite.error.message")})):b((0,o.V_)({description:y("invite:notifications.deleteInvite.genericError.description"),level:i.QU.ERROR,message:y("invite:notifications.deleteInvite.genericError.message")}))}))}(e).finally((function(){W(!1),A(!1),r()}))},H=function(e){W(!0),function(e){return(0,C.c_)(e).then((function(){b((0,o.V_)({description:y("invite:notifications.resendInvite.success.description"),level:i.QU.SUCCESS,message:y("invite:notifications.resendInvite.success.message")}))})).catch((function(e){var t,n,r,a,s,l,u;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?b((0,o.V_)({description:null!==(n=null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.description)&&void 0!==r?r:null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.detail)&&void 0!==n?n:y("invite:notifications.resendInvite.error.description"),level:i.QU.ERROR,message:null!==(l=null==e||null===(u=e.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message)&&void 0!==l?l:y("invite:notifications.resendInvite.error.message")})):b((0,o.V_)({description:y("invite:notifications.resendInvite.genericError.description"),level:i.QU.ERROR,message:y("invite:notifications.resendInvite.genericError.message")}))}))}(e).finally((function(){W(!1),z(!1),r()}))},Q=function(){return p&&0===(null==n?void 0:n.length)?u.createElement(s.$J,{action:u.createElement(s.Qj,{onClick:v},y("invite:placeholder.emptySearchResultPlaceholder.clearButton")),image:(0,f.jF)().emptySearch,imageSize:"tiny",title:y("invite:placeholder.emptySearchResultPlaceholder.title"),subtitle:[y("invite:placeholder.emptySearchResultPlaceholder.subTitle.0",{query:p}),y("invite:placeholder.emptySearchResultPlaceholder.subTitle.1")]}):0===(null==n?void 0:n.length)?m===w.XC.EXPIRED?u.createElement(s.$J,{image:(0,f.jF)().newList,imageSize:"tiny",subtitle:[g===U.rb.EXTERNAL?y("parentOrgInvitations:emptyPlaceholder.noExpiredInvitations"):y("parentOrgInvitations:emptyPlaceholder.noCollaboratorUserInvitations")]}):u.createElement(s.$J,{image:(0,f.jF)().newList,imageSize:"tiny",subtitle:[g===U.rb.EXTERNAL?y("parentOrgInvitations:emptyPlaceholder.noPendingInvitations"):"There are no collaborator users with pending invitations at the moment."]}):u.createElement(s.$J,{image:(0,f.jF)().newList,imageSize:"tiny",subtitle:[y("parentOrgInvitations:emptyPlaceholder.noInvitations")]})};return u.createElement(u.Fragment,null,u.createElement(s.wQ,{showSearch:!0,isLoading:l,loadingStateOptions:{count:5,imageType:"circular"},placeholders:Q(),actions:[{hidden:function(){var e;return g===U.rb.EXTERNAL||!(0,a.Xr)(null==D?void 0:D.users,null==D||null===(e=D.users)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,F)},icon:function(){return"redo alternate"},onClick:function(e,t){x(t),z(!0)},popupText:function(){return"resend"},renderer:"semantic-icon"},{"data-componentid":"".concat(h,"-users-list-item-delete-invitation-button"),hidden:function(){var e;return!(0,a.Xr)(null==D?void 0:D.users,null==D||null===(e=D.users)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,F)},icon:function(){return"trash alternate"},onClick:function(e,t){T(t),A(!0)},popupText:function(){return"delete"},renderer:"semantic-icon"}],data:n,columns:(t=[{allowToggleVisibility:!1,dataIndex:"email",id:"email",key:0,render:function(e){return u.createElement(I.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(h,"-item-image")},u.createElement(s.Yt,{"data-componentid":"".concat(h,"-item-image-inner"),name:e.email,size:"mini",image:e.email,spaced:"right"}),u.createElement(I.Z.Content,null,g===U.rb.EXTERNAL?null==e?void 0:e.username:null==e?void 0:e.email))},title:"User"},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:1,render:function(e){var t=e.status;return u.createElement(I.Z,{as:"h6","data-componentid":"".concat(h,"-invite-status")},u.createElement(I.Z.Content,null,u.createElement(I.Z.Subheader,null,t.charAt(0).toUpperCase()+t.slice(1).toLowerCase())))},textAlign:"left",title:"Invitation Status"},{allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:3,textAlign:"right",title:""}],t),onRowClick:function(){return null},showHeader:!1,transparent:!l&&null!==Q()}),S&&u.createElement(s.cV,{primaryActionLoading:Z,"data-componentid":"".concat(h,"-confirmation-modal"),onClose:function(){return A(!1)},type:"negative",open:S,assertion:L.email,assertionHint:y("invite:confirmationModal.deleteInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return A(!1)},onPrimaryActionClick:function(){return V(L.id)},closeOnDimmerClick:!1},u.createElement(s.cV.Header,{"data-componentid":"".concat(h,"-confirmation-modal-header")},y("invite:confirmationModal.deleteInvite.header")),u.createElement(s.cV.Message,{"data-componentid":"".concat(h,"-confirmation-modal-message"),attached:!0,negative:!0},y("invite:confirmationModal.deleteInvite.message")),u.createElement(s.cV.Content,{"data-componentid":"".concat(h,"-confirmation-modal-content")},y("invite:confirmationModal.deleteInvite.content"))),_&&u.createElement(s.cV,{primaryActionLoading:Z,"data-componentid":"".concat(h,"-confirmation-modal"),onClose:function(){return z(!1)},type:"warning",open:_,assertion:M.email,assertionHint:y("invite:confirmationModal.resendInvite.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){return z(!1)},onPrimaryActionClick:function(){return H(M.id)},closeOnDimmerClick:!1},u.createElement(s.cV.Header,{"data-componentid":"".concat(h,"-confirmation-modal-header")},y("invite:confirmationModal.resendInvite.header")),u.createElement(s.cV.Message,{"data-componentid":"".concat(h,"-confirmation-modal-message"),attached:!0,warning:!0},y("invite:confirmationModal.resendInvite.message")),u.createElement(s.cV.Content,{"data-componentid":"".concat(h,"-confirmation-modal-content")},y("invite:confirmationModal.resendInvite.content"))))},L=n(14045),T=n(37077),k=n(61145),_=n(53871),z=n(12436),P=n(29269);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){var r;return r=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==M(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t,n=e.advancedSearch,r=e.defaultListItemLimit,l=e.onUserDelete,p=e.isLoading,v=e.readOnlyUserStores,g=e.featureConfig,h=e.onColumnSelectionChange,y=e.onListItemClick,b=e.onSearchQueryClear,S=e.searchQuery,C=e.selection,w=e.showListItemActions,R=e.showMetaContent,O=e.userMetaListContent,A=e.usersList,N=e.isReadOnlyUserStore,M=e["data-testid"],x=(0,c.$)().t,Z=(0,d.I0)(),D=W((0,u.useState)(!1),2),V=D[0],H=D[1],Q=W((0,u.useState)(void 0),2),G=Q[0],X=Q[1],B=W((0,u.useState)(!1),2),K=B[0],Y=B[1],$=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),q=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.providedUsername})),J=(0,d.v9)((function(e){return e.auth.isPrivilegedUser})),ee=function(e){f.m8.push(f.$x.getPaths().get("USER_EDIT").replace(":id",e))},te=function(e){var t,n,r,i,o=(0,a.WX)(null==e?void 0:e.userName);return null!=e&&null!==(t=e.name)&&void 0!==t&&t.givenName?e.name.givenName[0]:null!=e&&null!==(n=e.name)&&void 0!==n&&n.familyName?e.name.familyName[0]:(null==e||null===(r=e.emails)||void 0===r?void 0:r.length)>0&&null!=e&&e.emails[0]?e.emails[0][0]:(i=o,new RegExp(/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi).test(i)?"":o[0])},ne=function(){return S?u.createElement(s.$J,{action:u.createElement(s.Qj,{onClick:b},x("users:usersList.search.emptyResultPlaceholder.clearButton")),image:(0,f.jF)().emptySearch,imageSize:"tiny",title:x("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[x("users:usersList.search.emptyResultPlaceholder.subTitle.0",{query:S}),x("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}):0===A.totalResults?u.createElement(s.$J,{"data-testid":"".concat(M,"-empty-placeholder"),image:(0,f.jF)().newList,imageSize:"tiny",title:x(N?"users:usersList.list.emptyResultPlaceholder.emptyUsers":"users:usersList.list.emptyResultPlaceholder.title"),subtitle:N?[x("users:usersList.list.emptyResultPlaceholder.subTitle.0")]:[x("users:usersList.list.emptyResultPlaceholder.subTitle.0"),x("users:usersList.list.emptyResultPlaceholder.subTitle.1"),x("users:usersList.list.emptyResultPlaceholder.subTitle.2")]}):null};return u.createElement(u.Fragment,null,u.createElement(s.wQ,{className:"users-table",externalSearch:n,isLoading:p,loadingStateOptions:{count:null!=r?r:f.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"},actions:function(){if(w){var e=[{"data-componentid":"users-list-item-edit-button","data-testid":"users-list-item-edit-button",hidden:function(){return!(0,a.cr)(null==g?void 0:g.users,U._F.FEATURE_DICTIONARY.get("USER_READ"))},icon:function(e){var t,n,r,i,o=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:z.userstoresConfig.primaryUserstoreName;return!(0,a.Xr)(null==g?void 0:g.users,null==g||null===(r=g.users)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.update,$)||!(0,a.cr)(null==g?void 0:g.users,U._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=v&&v.includes(o.toString())||null!==(i=e[k.SCIMConfigs.scim.enterpriseSchema])&&void 0!==i&&i.managedOrg?"eye":"pencil alternate"},onClick:function(e,t){return ee(null==t?void 0:t.id)},popupText:function(e){var t,n,r,i,o=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:z.userstoresConfig.primaryUserstoreName;return!(0,a.Xr)(null==g?void 0:g.users,null==g||null===(r=g.users)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.update,$)||!(0,a.cr)(null==g?void 0:g.users,U._F.FEATURE_DICTIONARY.get("USER_UPDATE"))||null!=v&&v.includes(o.toString())||null!==(i=e[k.SCIMConfigs.scim.enterpriseSchema])&&void 0!==i&&i.managedOrg?x("common:view"):x("common:edit")},renderer:"semantic-icon"}];return e.push({"data-componentid":"users-list-item-delete-button","data-testid":"users-list-item-delete-button",hidden:function(e){var t,n,r,i=(null==e||null===(t=e.userName)||void 0===t?void 0:t.split("/").length)>1?null==e||null===(n=e.userName)||void 0===n?void 0:n.split("/")[0]:z.userstoresConfig.primaryUserstoreName;return!(0,a.cr)(null==g?void 0:g.users,U._F.FEATURE_DICTIONARY.get("USER_DELETE"))||!(0,a.Xr)(null==g?void 0:g.users,null==g||null===(r=g.users)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.delete,$)||(null==v?void 0:v.includes(i.toString()))||q===(0,a.WX)(null==e?void 0:e.userName)&&J},icon:function(){return"trash alternate"},onClick:function(e,t){H(!0),X(t)},popupText:function(){return x("users:usersList.list.iconPopups.delete")},renderer:"semantic-icon"}),e}}(),columns:function(){var e=[{allowToggleVisibility:!1,dataIndex:"name",id:"name",key:"name",render:function(e){var t,n,r,i,o=(0,a.WX)(null==e?void 0:e.userName),l=P.Q.resolveUserListSubheader(e),c=void 0===(null===(t=e.name)||void 0===t?void 0:t.familyName)&&void 0===(null===(n=e.name)||void 0===n?void 0:n.givenName);return u.createElement(I.Z,{image:!0,as:"h6",className:"header-with-icon","data-componentid":"".concat(M,"-item-heading")},u.createElement(s.Yt,{"data-componentid":"users-list-item-image",name:te(e),size:"mini",image:e.profileUrl,spaced:"right","data-hj-suppress":""}),u.createElement(I.Z.Content,null,u.createElement("div",null,o,(null===_.userConfig||void 0===_.userConfig?void 0:_.userConfig.disableManagedByColumn)&&(null===(r=e[null===k.SCIMConfigs||void 0===k.SCIMConfigs||null===(i=k.SCIMConfigs.scim)||void 0===i?void 0:i.enterpriseSchema])||void 0===r?void 0:r.managedOrg)&&u.createElement(T.Z,{size:"mini",className:"client-id-label"},x("parentOrgInvitations:invitedUserLabel"))),!c&&u.createElement(I.Z.Subheader,{"data-componentid":"".concat(M,"-item-sub-heading")},l)))},title:"User"}];if(!_.userConfig.disableManagedByColumn&&e.push({allowToggleVisibility:!1,dataIndex:"idpType",id:"idpType",key:"idpType",render:function(e){return function(e){var t,n,r,a,i;if(null!==(t=e[null===k.SCIMConfigs||void 0===k.SCIMConfigs||null===(n=k.SCIMConfigs.scim)||void 0===n?void 0:n.enterpriseSchema])&&void 0!==t&&t.managedOrg)return U._F.MANAGED_BY_PARENT_TEXT;var o=(null==e||null===(r=e.userName)||void 0===r?void 0:r.split("/").length)>1?null==e||null===(a=e.userName)||void 0===a||null===(a=a.split("/")[0])||void 0===a?void 0:a.toUpperCase():z.userstoresConfig.primaryUserstoreName,s=null===(i=e[k.SCIMConfigs.scim.enterpriseSchema])||void 0===i?void 0:i.idpType;return s?s.split("/").length>1?null!=v&&v.includes(o.toString())?s.split("/")[1]+"-remote":s.split("/")[1]:s:"N/A"}(e)},title:u.createElement(u.Fragment,null,u.createElement("div",{className:"header-with-popup"},u.createElement("span",null,x("extensions:manage.users.list.columns.idpType")),u.createElement(s.GI,{trigger:u.createElement("div",{className:"inline"},u.createElement(m.Z,{disabled:!0,name:"info circle",className:"link pointing pl-1"})),content:x("extensions:manage.users.list.popups.content.idpTypeContent"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0})))}),e.push({allowToggleVisibility:!1,dataIndex:"action",id:"actions",key:"actions",textAlign:"right",title:""}),!R||!O)return e;var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=F(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}(O.entries());try{for(r.s();!(t=r.n()).done;){var i=W(t.value,2),o=i[0],l=i[1];if("name"!==o&&"emails"!==o&&"profileUrl"!==o&&""!==l){var c={allowToggleVisibility:!0,dataIndex:l,id:o,key:o,title:l};"meta.lastModified"===o&&(c=j(j({},c),{},{render:function(e){var t;return L.CommonUtils.humanizeDateDifference(null==e||null===(t=e.meta)||void 0===t?void 0:t.lastModified)}})),"userName"===o&&(c=j(j({},c),{},{render:function(e){return(0,a.WX)(null==e?void 0:e.userName)}})),n.push(c)}}}catch(d){r.e(d)}finally{r.f()}return n.unshift(e[0]),n.push(e[1]),n}(),data:A.Resources,onColumnSelectionChange:h,onRowClick:function(e,t){ee(null==t?void 0:t.id),y&&y(e,t)},placeholders:ne(),selectable:C,showHeader:!0,transparent:!p&&null!==ne(),"data-testid":M}),u.createElement(s.cV,{primaryActionLoading:K,"data-testid":"".concat(M,"-confirmation-modal"),"data-componentid":"".concat(M,"-confirmation-modal"),onClose:function(){return H(!1)},type:"negative",open:V,assertionHint:x("user:deleteUser.confirmationModal.assertionHint"),assertionType:"checkbox",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){H(!1)},onPrimaryActionClick:function(){var e;Y(!0),(e=null==G?void 0:G.id,(0,E.h8)(e).then((function(){Z((0,o.V_)({description:x("users:notifications.deleteUser.success.description"),level:i.QU.SUCCESS,message:x("users:notifications.deleteUser.success.message")})),l()})).catch((function(e){e.response&&e.response.data&&e.response.data.description?Z((0,o.V_)({description:e.response.data.description,level:i.QU.ERROR,message:x("users:notifications.deleteUser.error.message")})):Z((0,o.V_)({description:x("users:notifications.deleteUser.genericError.description"),level:i.QU.ERROR,message:x("users:notifications.deleteUser.genericError.message")}))}))).finally((function(){Y(!1),X(void 0),H(!1)}))},closeOnDimmerClick:!1},u.createElement(s.cV.Header,{"data-testid":"".concat(M,"-confirmation-modal-header"),"data-componentid":"".concat(M,"-confirmation-modal-header")},x("user:deleteUser.confirmationModal.header")),u.createElement(s.cV.Message,{"data-testid":"".concat(M,"-confirmation-modal-message"),attached:!0,negative:!0},x("user:deleteUser.confirmationModal.message")),u.createElement(s.cV.Content,{"data-testid":"".concat(M,"-confirmation-modal-content"),"data-componentid":"".concat(M,"-confirmation-modal-content")},G&&null!==(t=G[k.SCIMConfigs.scim.enterpriseSchema])&&void 0!==t&&t.userSourceId?x("user:deleteJITUser.confirmationModal.content"):x("user:deleteUser.confirmationModal.content"))))};V.defaultProps={selection:!0,showListItemActions:!0,showMetaContent:!0};var H=n(62207),Q=n(29369),G=n(31640),X=n(73150),B=n(90988),K=n(59149),Y=n(49674),$=n(56965),q=n(99472),J=n(8534),ee=n(21036),te=n(76004),ne=n.n(te),re=n(77323);const ae=function(e){return(0,re.Z)(e).toUpperCase()};var ie=n(59673),oe=n(89141),se=n(10909),le=n(77757),ue=n(78768),ce=n(35542),de=n(45481),me=n(78645),pe=n(49534),fe=n(40231),ve=n(72478),ge=n(31659),he=n(39174),ye=n(26507);function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Se="ALL",Ie=function(e){var t=e.responseList,n=e.isLoading,r=e.bulkResponseSummary,a=e.hasError,i=e.successAlert,o=e["data-componentid"],l=be((0,u.useState)(!1),2),d=l[0],m=l[1],v=be((0,u.useState)(""),2),g=v[0],h=v[1],y=be((0,u.useState)(Se),2),b=y[0],E=y[1],S=be((0,u.useState)([]),2),C=S[0],w=S[1],R=be((0,u.useState)(U.tr.USER_CREATION),2),O=R[0],A=R[1],N=be((0,u.useState)(0),2),L=N[0],k=N[1],_=(0,c.$)().t,z=r.failedUserCreation+r.successUserCreation,P=r.failedUserAssignment+r.successUserAssignment,M=f.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,x=[{key:0,text:"All",value:Se},{key:1,text:_("user:modals.bulkImportUserWizard.wizardSummary.tableStatus.success"),value:U.IC.SUCCESS},{key:2,text:_("user:modals.bulkImportUserWizard.wizardSummary.tableStatus.failed"),value:U.IC.FAILED}],j=[{key:0,text:_("user:modals.bulkImportUserWizard.wizardSummary.responseOperationType.userCreation"),value:U.tr.USER_CREATION},{key:1,text:_("user:modals.bulkImportUserWizard.wizardSummary.responseOperationType.roleAssignment"),value:U.tr.ROLE_ASSIGNMENT}];(0,u.useEffect)((function(){Z()}),[t]),(0,u.useEffect)((function(){H(),E(Se),Z()}),[O]);var Z=function(){var e=t.filter((function(e){return e.operationType===O}));w(e)};(0,u.useEffect)((function(){!function(){var e=null==t?void 0:t.filter((function(e){return(null==e?void 0:e.operationType)===O}));if(g&&""!==g){var n=be(g.split(" "),3),r=n[1],a=n[2];e=e.filter((function(e){var t,n,i;if(b!==Se&&e.statusCode!==b)return!1;switch(r){case"sw":return null===(t=e.resourceIdentifier)||void 0===t?void 0:t.startsWith(a);case"ew":return null===(n=e.resourceIdentifier)||void 0===n?void 0:n.endsWith(a);case"co":return null===(i=e.resourceIdentifier)||void 0===i?void 0:i.includes(a);case"eq":return e.resourceIdentifier===a;default:return!1}}))}b!==Se&&(e=e.filter((function(e){return e.statusCode===b&&e.operationType===O}))),w(e)}()}),[g,b]);var W,F,D,V,H=function(){m(!d),h("")},Q=function(e,t){var n=j.find((function(e){return e.key===t}));n&&(A(n.value),k(t))},B=O===U.tr.USER_CREATION?[{key:0,text:_("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"}]:[{key:1,text:_("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),value:"roleName"}];return u.createElement(u.Fragment,null,u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},n||a?null:0===r.failedUserCreation&&0===r.failedUserAssignment?null!=i?i:u.createElement(X.Z,{severity:"success","data-componentid":"".concat(o,"-success-alert")},u.createElement(G.Z,{"data-componentid":"".concat(o,"-success-alert-title")},_("user:modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.message")),_("user:modals.bulkImportUserWizard.wizardSummary.alerts.importSuccess.description")):u.createElement(X.Z,{severity:"error","data-componentid":"".concat(o,"-error-alert")},u.createElement(G.Z,{"data-componentid":"".concat(o,"-error-alert-title")},_("user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.message")),0!==r.failedUserCreation&&u.createElement("li",null,u.createElement(ie.c,{i18nKey:"user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.userCreation",tOptions:{failedUserCreationCount:r.failedUserCreation}},"Issues encountered in",u.createElement("b",null,r.failedUserCreation," user creations"),".")),0!==r.failedUserAssignment&&u.createElement("li",null,u.createElement(ie.c,{i18nKey:"user:modals.bulkImportUserWizard.wizardSummary.alerts.importFailed.groupAssignment",tOptions:{failedUserAssignmentCount:r.failedUserAssignment}},"Issues encountered in",u.createElement("b",null,r.failedUserAssignment," group assignments"),". Users in the affected groups were created but not assigned. Please navigate to User Management section to review  and assign groups to the users."))))),u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},u.createElement(ye.Z,{value:L,onChange:Q,"component-id":"".concat(o,"-operation-type-tab")},j.map((function(e){return u.createElement(he.Z,{key:e.key,label:u.createElement("div",{className:"beta-feature-tab-item"},u.createElement(J.Z,{sx:{fontWeight:500}},e.text)),"data-componentid":"".concat(o,"-").concat(e.value,"-tab")})}))))),u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},u.createElement(s.PS,{advancedSearch:u.createElement(f.nC,{onFilter:function(e){h(e),e||Z()},filterAttributeOptions:B,filterAttributePlaceholder:O===U.tr.USER_CREATION?_("users:advancedSearch.form.dropdown.filterAttributeOptions.username"):_("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.roleGroupFilterAttributePlaceHolder"),filterConditionsPlaceholder:_("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:_("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:O===U.tr.USER_CREATION?_("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByUsername"):_("user:modals.bulkImportUserWizard.wizardSummary.advanceSearch.searchByGroup"),defaultSearchAttribute:"resourceName",defaultSearchOperator:"co",triggerClearQuery:d,"data-testid":"".concat(o,"-advanced-search"),"data-componentid":"".concat(o,"-advanced-search")}),rightActionPanel:u.createElement(u.Fragment,null,u.createElement(p.Z,{"data-testid":"".concat(o,"-filter-status-dropdown"),"data-componentid":"".concat(o,"-filter-status-dropdown"),selection:!0,options:x,onChange:function(e,t){var n=t.value;E(n),m(!d)},value:b,disabled:(W=O===U.tr.USER_CREATION,F=O===U.tr.ROLE_ASSIGNMENT,D=0===r.failedUserCreation||0===r.successUserCreation,V=0===r.failedUserAssignment||0===r.successUserAssignment,W&&D||F&&V)})),showPagination:!1,showTopActionPanel:!0,totalPages:Math.ceil(z/M),totalListSize:z,isLoading:n,listItemLimit:f.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,"data-testid":"".concat(o,"-list-layout"),"data-componentid":"".concat(o,"-list-layout"),onPageChange:function(){return null},disableRightActionPanel:!1},u.createElement(J.Z,{variant:"body2",style:{textAlign:"right"}},O===U.tr.USER_CREATION?_("user:modals.bulkImportUserWizard.wizardSummary.totalUserCreationCount")+" : "+z:_("user:modals.bulkImportUserWizard.wizardSummary.totalUserAssignmentCount")+" : "+P),u.createElement(s.wQ,{className:"addon-field-wrapper",isLoading:n,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return u.createElement(I.Z,{as:"h6","data-componentid":"".concat(o,"-username-item-heading")},u.createElement(I.Z.Content,null,e.resourceIdentifier))},title:_("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return u.createElement(I.Z,{as:"h6","data-componentid":"".concat(o,"-status-item-heading")},u.createElement(I.Z.Content,null,u.createElement(T.Z,{"data-componentid":"".concat(o,"-bulk-label"),content:e.status,size:"small",color:e.statusCode===U.IC.SUCCESS?"green":"red",className:"group-label"})))},title:_("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return u.createElement(I.Z,{as:"h6","data-componentid":"".concat(o,"-status-item-heading")},u.createElement(I.Z.Content,null,e.message))},title:_("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:C,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:u.createElement(s.$J,{"data-testid":"".concat(o,"-empty-search-result"),"data-componentid":"".concat(o,"-empty-search-result"),action:g?u.createElement(s.Qj,{onClick:H},_("users:usersList.search.emptyResultPlaceholder.clearButton")):null,image:(0,f.jF)().emptySearch,imageSize:"tiny",title:_("users:usersList.search.emptyResultPlaceholder.title"),subtitle:[_("users:usersList.search.emptyResultPlaceholder.subTitle.0",{query:g||b}),_("users:usersList.search.emptyResultPlaceholder.subTitle.1")]}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(o,"-data-table"),"data-componentid":"".concat(o,"-data-table"),loadingStateOptions:{count:f.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}})))))};function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function Ue(){return Ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ue.apply(this,arguments)}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oe(e,t,n){var r;return r=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Ce(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ze(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Le(){Le=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),s=new L(r||[]);return a(o,"_invoke",{value:R(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var m="suspendedStart",p="suspendedYield",f="executing",v="completed",g={};function h(){}function y(){}function b(){}var E={};u(E,o,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(T([])));I&&I!==n&&r.call(I,o)&&(E=I);var C=b.prototype=h.prototype=Object.create(E);function U(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,i,o,s){var l=d(e[a],e,i);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==Ce(c)&&r.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(c).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(l.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function R(t,n,r){var a=m;return function(i,o){if(a===f)throw Error("Generator is already running");if(a===v){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var l=O(s,r);if(l){if(l===g)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=f;var u=d(t,n,r);if("normal"===u.type){if(a=r.done?v:p,u.arg===g)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function O(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,O(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var i=d(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(Ce(t)+" is not iterable")}return y.prototype=b,a(C,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},U(w.prototype),u(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new w(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},U(C),u(C,l,"Generator"),u(C,o,(function(){return this})),u(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return s.type="throw",s.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;N(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function Te(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,a)}function ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Te(i,r,a,o,s,"next",e)}function s(e){Te(i,r,a,o,s,"throw",e)}o(void 0)}))}}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ie.defaultProps={isLoading:!1,responseList:[]};var Me="identity/askPassword",xe="Data validation error",je="TIMEOUT_ERROR",Ze="addresses#home",We="addresses",Fe="bulkId",De=function(e){var t=e.closeWizard,n=e.userstore,r=e["data-componentid"],a=(0,c.$)().t,l=(0,h.z)().isSubOrganization,v=(0,d.I0)(),g=_e((0,u.useState)(null),2),y=g[0],S=g[1],I=_e((0,u.useState)(),2),C=I[0],R=I[1],O=_e((0,u.useState)(!1),2),A=O[0],N=O[1],L=_e((0,u.useState)(!1),2),T=L[0],k=L[1],_=_e((0,u.useState)(!1),2),z=_[0],P=_[1],M=_e((0,u.useState)([]),2),x=M[0],j=M[1],Z=_e((0,u.useState)([]),2),W=Z[0],F=Z[1],D=_e((0,u.useState)(!1),2),V=D[0],H=D[1],te=_e((0,u.useState)(!1),2),re=te[0],he=te[1],ye=_e((0,u.useState)(Ve),2),be=ye[0],Ee=ye[1],Se=_e((0,u.useState)(Ve),2),Ce=Se[0],we=Se[1],Te=_e((0,u.useState)(w.Wv.MANUAL),2),ze=Te[0],Pe=Te[1],De=_e((0,u.useState)(),2),He=De[0],Qe=De[1],Ge=_e((0,u.useState)(!1),2),Xe=Ge[0],Be=Ge[1],Ke=_e((0,u.useState)(""),2),Ye=Ke[0],$e=Ke[1],qe=_e((0,u.useState)(),2),Je=qe[0],et=qe[1],tt=_e((0,s.IK)({"data-componentid":"".concat(r,"-alert")}),3),nt=tt[0],rt=tt[1],at=tt[2],it=_e((0,s.IK)({"data-componentid":"".concat(r,"-manual-invite-alert")}),3),ot=it[0],st=it[1],lt=it[2],ut=_e((0,u.useState)([]),2),ct=ut[0],dt=ut[1],mt=_e((0,u.useState)(me.userstoresConfig.primaryUserstoreName),2),pt=mt[0],ft=mt[1],vt=_e((0,u.useState)(!1),2),gt=vt[0],ht=vt[1],yt=_e((0,u.useState)(!1),2),bt=yt[0],Et=yt[1],St=(0,ve.W)().data,It=(0,s.fQ)().getLink,Ct=(0,ge.t$)(St),Ut="true"===(null==Ct?void 0:Ct.enableValidator),wt=(0,d.v9)((function(e){return e.config.ui.features.bulkUserImport.fileImportTimeout})),Rt=(0,d.v9)((function(e){return e.config.ui.features.bulkUserImport.userLimit})),Ot=(0,u.useMemo)((function(){return new s.Wc(void 0,me.userConfig.bulkUserImportLimit.fileSize*s.Wc.KILOBYTE,Rt||me.userConfig.bulkUserImportLimit.userCount)}),[Rt]),At=[],Nt=(0,pe.Ug)(pt,"members",null,!0),Lt=Nt.data,Tt=Nt.error;(0,u.useEffect)((function(){var e,t,n,r,s,l;Tt&&v((0,o.V_)({description:null!==(e=null!==(t=null==Tt||null===(n=Tt.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:null==Tt||null===(r=Tt.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==e?e:a("console:manage.features.groups.notifications.fetchGroups.genericError.description"),level:i.QU.ERROR,message:null!==(s=null==Tt||null===(l=Tt.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==s?s:a("console:manage.features.groups.notifications.fetchGroups.genericError.message")}))}),[Tt]),(0,u.useEffect)((function(){ft(n),kt()}),[n]);var kt=function(){P(!0);var e=[{key:-1,text:me.userstoresConfig.primaryUserstoreName,value:me.userstoresConfig.primaryUserstoreName}];(0,b.GN)(null).then((function(t){null==t||t.forEach(function(){var t=ke(Le().mark((function t(n,r){return Le().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_t(n);case 2:if(!t.sent){t.next=4;break}e.push({key:r,text:n.name.toUpperCase(),value:n.name.toUpperCase()});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),ht(!1),dt(e)})).catch((function(e){var t,n,r,s,l,u,c;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?v((0,o.V_)({description:null!==(n=null!==(r=null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.description)&&void 0!==r?r:null==e||null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.detail)&&void 0!==n?n:a("userstores:notifications.fetchUserstores.error.description"),level:i.QU.ERROR,message:null!==(u=null==e||null===(c=e.response)||void 0===c||null===(c=c.data)||void 0===c?void 0:c.message)&&void 0!==u?u:a("userstores:notifications.fetchUserstores.error.message")})):(v((0,o.V_)({description:a("userstores:notifications.fetchUserstores.genericError.description"),level:i.QU.ERROR,message:a("userstores:notifications.fetchUserstores.genericError.message")})),ht(!0))})).finally((function(){P(!1)}))},_t=function(e){var t=!1;return(0,b.YZ)(null==e?void 0:e.id).then((function(e){var n;return null==e||null===(n=e.properties)||void 0===n||n.some((function(e){if(e.name===fe.u4.USER_STORE_PROPERTY_READ_ONLY)return t="false"===e.value,!0})),t})).catch((function(){return v((0,o.V_)({description:a("userstores:notifications.fetchUserstores.genericError.description"),level:i.QU.ERROR,message:a("userstores:notifications.fetchUserstores.genericError.message")})),!1}))},zt=function(){return!(null!==me.userConfig&&void 0!==me.userConfig&&me.userConfig.enableBulkImportSecondaryUserStore&&!gt)||(ct?0===(null==ct?void 0:ct.length)||1===(null==ct?void 0:ct.length)&&(null===(e=ct[0])||void 0===e?void 0:e.value)===n:void 0);var e},Pt=function(){var e=ke(Le().mark((function e(){var t,n,r;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,pe.hI)(pt);case 3:return n=e.sent,r=null==n||null===(t=n.data)||void 0===t||null===(t=t.Resources)||void 0===t?void 0:t.reduce((function(e,t){return e[null==t?void 0:t.displayName.toLowerCase()]={displayName:null==t?void 0:t.displayName,id:null==t?void 0:t.id,members:[]},e}),{}),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),N(!0),v((0,o.V_)({description:a("users:notifications.bulkImportUser.submit.genericError.description"),level:i.QU.ERROR,message:a("users:notifications.bulkImportUser.submit.genericError.message")}));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){Pe(Ut&&null!==me.userConfig&&void 0!==me.userConfig&&me.userConfig.enableUsernameValidation?w.Wv.META_FILE:w.Wv.MANUAL)}),[Ut]);var Mt,xt=function(){var e=ke(Le().mark((function e(){var t,n,r,s,l,u,c,d,m,p,f;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,(0,ce.Pq)();case 4:t=e.sent,n=null==t?void 0:t.Resources,s=Ne(n);try{for(s.s();!(l=s.n()).done;)"User"===(null==(u=l.value)?void 0:u.id)&&(c=null==u?void 0:u.schemaExtensions,(r=c.map((function(e){return e.schema}))).push(null==u?void 0:u.schema))}catch(g){s.e(g)}finally{s.f()}return e.next=10,(0,ce.jp)({});case 10:return d=e.sent,m=d.filter((function(e){return r.includes(e.dialectURI)})),e.abrupt("return",m);case 15:e.prev=15,e.t0=e.catch(1),N(!0),v((0,o.V_)({description:(null===e.t0||void 0===e.t0||null===(p=e.t0.response)||void 0===p||null===(p=p.data)||void 0===p?void 0:p.description)||a("claims:dialects.notifications.fetchDialects.genericError.description"),level:i.QU.ERROR,message:(null===e.t0||void 0===e.t0||null===(f=e.t0.response)||void 0===f||null===(f=f.data)||void 0===f?void 0:f.message)||a("claims:dialects.notifications.fetchDialects.genericError.message")}));case 19:return e.prev=19,P(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),jt=function(){var e=ke(Le().mark((function e(){var t,n,r,s,l,u;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt();case 2:return t=e.sent,n=[],t.forEach((function(e){n.push((0,ce.gR)(e.id,null))})),e.prev=5,P(!0),e.next=9,ne().all(n);case 9:return r=e.sent,s=[],r.forEach((function(e){var t=e.map((function(e){return{attributeName:null==e?void 0:e.mappedLocalClaimURI.replace(U._F.WSO2_LOCAL_CLAIM_DIALECT+"/","").toLowerCase(),mappedLocalClaimURI:null==e?void 0:e.mappedLocalClaimURI,mappedSCIMAttributeURI:null==e?void 0:e.claimURI,mappedSCIMClaimDialectURI:null==e?void 0:e.claimDialectURI}}));s.push.apply(s,Ae(t))})),e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(5),N(!0),v((0,o.V_)({description:(null===(l=e.t0[0])||void 0===l||null===(l=l.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.description)||a("claims:dialects.notifications.fetchExternalClaims.genericError.description"),level:i.QU.ERROR,message:(null===(u=e.t0[0])||void 0===u||null===(u=u.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message)||a("claims:dialects.notifications.fetchExternalClaims.genericError.message")}));case 19:return e.prev=19,P(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[5,15,19,22]])})));return function(){return e.apply(this,arguments)}}(),Zt=function(e){return 0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(", ")+" and "+e[e.length-1]},Wt=function(e){return 0===e.length},Ft=function(e){return!e||""===e.trim()},Dt=function(e){rt({description:a("users:notifications.bulkImportUser.validation.".concat(e.descriptionKey),e.descriptionValues||{}),level:i.QU.ERROR,message:a("users:notifications.bulkImportUser.validation.".concat(e.messageKey))})},Vt=function(e,t){var n,r=e.headers,a=e.items,i=Ut?Object.values(U.NS):[U.NS.USERNAME],o=function(e,t){return t.filter((function(t){return!e.some((function(e){return e.toLowerCase()===t.toLowerCase()}))}))}(r,i),s=(n=r.reduce((function(e,t){var n=t.toLowerCase();return e[n]=(e[n]||0)+1,e}),{}),Object.keys(n).filter((function(e){return n[e]>1}))),l=Object.values(U.GU),u=function(e,t){return e.filter((function(e){return t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(r,l),c=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.toLowerCase()===t.toLowerCase()}))}))}(r,t),d=function(e){return e.map((function(e,t){return Ft(e)?t:-1})).filter((function(e){return-1!==e}))}(r);return!!function(e){var t,n=Ne(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!r.check())return Dt(r.error),!1}}catch(a){n.e(a)}finally{n.f()}return!0}([{check:function(){return!(Wt(r)||Wt(a))},error:{descriptionKey:"emptyRowError.description",messageKey:"emptyRowError.message"}},{check:function(){return a.every((function(e){return e.length===r.length}))},error:{descriptionKey:"columnMismatchError.description",messageKey:"columnMismatchError.message"}},{check:function(){return 0===d.length},error:{descriptionKey:"emptyHeaderError.description",messageKey:"emptyHeaderError.message"}},{check:function(){return 0===o.length},error:{descriptionKey:"missingRequiredHeaderError.description",descriptionValues:{headers:Zt(o)},messageKey:"missingRequiredHeaderError.message"}},{check:function(){return 0===u.length},error:{descriptionKey:"blockedHeaderError.description",descriptionValues:{headers:Zt(u)},messageKey:"blockedHeaderError.message"}},{check:function(){return 0===s.length},error:{descriptionKey:"duplicateHeaderError.description",descriptionValues:{headers:Zt(s)},messageKey:"duplicateHeaderError.message"}},{check:function(){return 0===c.length},error:{descriptionKey:"invalidHeaderError.description",descriptionValues:{headers:Zt(c)},messageKey:"invalidHeaderError.message"}}])},Ht=function(e,t){var n=e.map((function(e){return t.find((function(t){return e.toLowerCase()===t.attributeName.toLowerCase()}))})).filter(Boolean);return n.push(t.find((function(e){return e.attributeName.toLowerCase()===Me.toLowerCase()}))),n},Qt=function(e){N(!0),Dt({descriptionKey:"emptyDataField.description",descriptionValues:{dataField:e},messageKey:"emptyDataField.message"})},Gt=function(e,t,n){var r,o={},s=new Set([U._F.SCIM2_USER_SCHEMA]),l="",u=Ne(t);try{var c=function(){var t=r.value,u=t.mappedSCIMAttributeURI.replace("".concat(t.mappedSCIMClaimDialectURI,":"),""),c=e[n.indexOf(t.attributeName.toLowerCase())],d=u.includes("#");if(t.attributeName===U._F.ROLES||t.attributeName===U._F.GROUPS)return 0;if(u===U.NS.USERNAME){if(l=c,Ft(c))throw Qt(t.attributeName),new Error(xe);return o[U.NS.USERNAME]=pt&&pt.toLowerCase()!==fe.pH.toLowerCase()?"".concat(pt,"/").concat(c):c,0}if(t.attributeName===U.NS.EMAILADDRESS){if(!Ut)return 0;if(Ft(c))throw Qt(t.attributeName),new Error(xe);if(!ee.I.email(c))throw rt({description:a("user:forms.addUserForm.inputs.email.validations.invalid"),level:i.QU.ERROR,message:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage")}),new Error(xe)}if(t.attributeName.toLowerCase()===Me.toLowerCase())return o[t.mappedSCIMClaimDialectURI]=Re(Re({},o[t.mappedSCIMClaimDialectURI]||{}),{},Oe({},u,"true")),0;var m=Object.values(U.DD).find((function(e){return u.includes(e)}));if(!d&&m){var p=u.includes(m+".")?{type:u.split(".")[1],value:c}:{primary:!0,value:c};return o[m]=o[m]||[],o[m].push(p),0}if(u.includes(Ze))return o[We]=o[We]||[],o[We].push(Oe({type:"home"},u.replace("".concat(Ze,"."),""),c)),0;s.add(t.mappedSCIMClaimDialectURI);var f=d?u.split("#")[0]:u;if(!f.includes(".")){var v=t.mappedSCIMClaimDialectURI===U._F.SCIM2_USER_SCHEMA?o:o[t.mappedSCIMClaimDialectURI]||(o[t.mappedSCIMClaimDialectURI]={});return v[f]=d?(v[f]||[]).concat(c):c,0}if(f.includes(".")){var g=_e(f.split("."),2),h=g[0],y=g[1],b=t.mappedSCIMClaimDialectURI===U._F.SCIM2_USER_SCHEMA?o:o[t.mappedSCIMClaimDialectURI]||(o[t.mappedSCIMClaimDialectURI]={});return d?b[h]=(b[h]||[]).concat(Oe({},y,c)):(b[h]||(b[h]={}),b[h][y]=c),0}};for(u.s();!(r=u.n()).done;)c()}catch(d){u.e(d)}finally{u.f()}return Ut||(o[U.DD.Emails]=[{primary:!0,value:l}]),Re({schema:Array.from(s)},o)},Xt=function(e,t,n,r){var a=(0,ue.Z)(),o="".concat(Fe,":").concat(e[n.indexOf(U.NS.USERNAME.toLowerCase())],":").concat(a),s=e[n.indexOf(U.NS.USERNAME.toLowerCase())],l=Re({},r);if(n.includes(U._F.GROUPS)){var u=e[n.indexOf(U._F.GROUPS)].split("|");Ae(new Set(u)).forEach((function(e){if(!Ft(e)){var t=pt&&pt.toLowerCase()!==fe.pH.toLowerCase()?"".concat(pt,"/").concat(e):e;if(!(t.toLowerCase()in r))throw Dt({descriptionKey:"invalidGroup.description",descriptionValues:{group:t},messageKey:"invalidGroup.message"}),new Error(xe);l=Bt(t,{display:s,value:"bulkId:".concat(o)},l)}}))}var c={bulkId:o,data:Gt(e,t,n),method:i.f2.POST,path:U._F.SCIM_USER_PATH};return{newGroupMemberAssociations:l,userOperation:c}},Bt=function(e,t,n){var r=Re({},n),a=r[e.toLowerCase()];return r[e.toLowerCase()]=Re(Re({},a),{},{members:Array.from(new Set([].concat(Ae(a.members),[t])))}),r},Kt=function(e){var t=(0,ue.Z)();return Object.values(e).filter((function(e){return e.members.length>0})).map((function(e){return{bulkId:"".concat(Fe,":").concat(e.displayName,":").concat(t),data:{Operations:[{op:"add",value:{members:e.members.map((function(e){return{display:e.display,value:e.value}}))}}]},method:i.f2.PATCH,path:"".concat(U._F.SCIM_GROUP_PATH,"/").concat(e.id)}}))},Yt=function(){var e=ke(Le().mark((function e(t){var n,r,a,i,o,s,l,u,c,d;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.headers.map((function(e){return e.toLowerCase()})),r=C.items,a=Ht(n,t),e.next=5,Pt();case 5:for(i=e.sent,o=[],s=[],l=0;l<r.length;l++)u=r[l],c=Xt(u,a,n,i),o.push(c.userOperation),i=c.newGroupMemberAssociations;return n.includes(U._F.GROUPS)&&(s=Kt(i)),d=o.concat(s),e.abrupt("return",{Operations:d,failOnErrors:0,schemas:[U._F.BULK_REQUEST_SCHEMA]});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$t=function(){var e=[],t=[],r=(0,ue.Z)();return null==He||He.map((function(a){var o=Oe({emails:[{primary:!0,value:a}],schemas:["urn:ietf:params:scim:schemas:core:2.0:User","urn:ietf:params:scim:schemas:extension:enterprise:2.0:User"],userName:pt.toLowerCase()!==fe.pH.toLowerCase()?"".concat(pt,"/").concat(a):a},n.toLowerCase()!==fe.pH.toLowerCase()?U._F.CUSTOMSCHEMA:U._F.ENTERPRISESCHEMA,{askPassword:"true"}),s={bulkId:"bulkId:".concat(a,":").concat(r),data:o,method:i.f2.POST,path:U._F.SCIM_USER_PATH},l={display:a,value:"bulkId:bulkId:".concat(a,":").concat(r)};t.push(l),e.push(s)})),null==Je||Je.map((function(n){var a={Operations:[{op:"add",value:{members:t}}]},o={bulkId:"bulkId:".concat(null==n?void 0:n.displayName,":").concat(r),data:a,method:i.f2.PATCH,path:"".concat(U._F.SCIM_GROUP_PATH,"/").concat(null==n?void 0:n.id)};e.push(o)})),{Operations:e,failOnErrors:0,schemas:[U._F.BULK_REQUEST_SCHEMA]}},qt=function(){var e=ke(Le().mark((function e(){var t,n,r;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$t(),e.prev=1,e.next=4,(0,E.er)(t);case 4:if(n=e.sent,he(!0),200===n.status){e.next=8;break}throw new Error("Failed to import users.");case 8:r=n.data.Operations.map(tn),F(r),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),N(!0),st({description:a("users:notifications.bulkImportUser.submit.genericError.description"),level:i.QU.ERROR,message:a("users:notifications.bulkImportUser.submit.genericError.message")});case 16:return e.prev=16,k(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(){return e.apply(this,arguments)}}(),Jt=function(){var e=ke(Le().mark((function e(){var t,n,r,o,s,l,u;return Le().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),e.prev=1,e.next=4,jt();case 4:if(t=e.sent,n=t.map((function(e){return e.attributeName})),Vt(C,n)){e.next=10;break}return N(!0),k(!1),e.abrupt("return");case 10:return e.next=12,Yt(t);case 12:return r=e.sent,H(!0),o=(0,E.er)(r),s=new Promise((function(e,t){setTimeout((function(){return t(new Error(je))}),wt||6e4)})),e.next=18,Promise.race([o,s]);case 18:if(200===(l=e.sent).status){e.next=21;break}throw new Error("Failed to import users.");case 21:u=l.data.Operations.map(en),j(u),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(1),N(!0),e.t0.message===je?(Et(!0),rt({description:a("users:notifications.bulkImportUser.timeOut.description"),level:i.QU.WARNING,message:a("users:notifications.bulkImportUser.timeOut.message")})):e.t0.message!==xe&&rt({description:a("users:notifications.bulkImportUser.submit.genericError.description"),level:i.QU.ERROR,message:a("users:notifications.bulkImportUser.submit.genericError.message")});case 29:return e.prev=29,P(!1),k(!1),e.finish(29);case 33:case"end":return e.stop()}}),e,null,[[1,25,29,33]])})));return function(){return e.apply(this,arguments)}}(),en=function(e){var t,n,r=null==e?void 0:e.bulkId.split(":")[1],o=null==e||null===(t=e.status)||void 0===t?void 0:t.code,s=U.tr.USER_CREATION,l=a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),u={};(null==e?void 0:e.method)===i.f2.POST?u={201:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(n=e.response)&&void 0!==n&&n.includes(U._F.USERNAME_REGEX_ERROR_CODE)?a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===i.f2.PATCH&&(s=U.tr.ROLE_ASSIGNMENT,u={200:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:r}),400:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:r}),500:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:r})});Ee((function(t){var n=(null==e?void 0:e.method)===i.f2.PATCH&&200===o?t.successUserAssignment+1:t.successUserAssignment,r=(null==e?void 0:e.method)===i.f2.PATCH&&200!==o?t.failedUserAssignment+1:t.failedUserAssignment,a=(null==e?void 0:e.method)!==i.f2.POST||201!==o&&202!==o?t.successUserCreation:t.successUserCreation+1,s=(null==e?void 0:e.method)===i.f2.POST&&201!==o&&202!==o?t.failedUserCreation+1:t.failedUserCreation;return Re(Re({},t),{},{failedUserAssignment:r,failedUserCreation:s,successUserAssignment:n,successUserCreation:a})}));var c=U.IC.FAILED;return 201!==o&&202!==o&&200!==o||(c=U.IC.SUCCESS),{message:u[o]||l,operationType:s,resourceIdentifier:r,status:nn(o),statusCode:c}},tn=function(e){var t,n,r=null==e?void 0:e.bulkId.split(":")[1],o=null==e||null===(t=e.status)||void 0===t?void 0:t.code,s=U.tr.USER_CREATION,l=a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage"),u={};(null==e?void 0:e.method)===i.f2.POST?u={201:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreatedMessage"),202:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userCreationAcceptedMessage"),400:null!=e&&null!==(n=e.response)&&void 0!==n&&n.includes(U._F.USERNAME_REGEX_ERROR_CODE)?a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidUserNameFormatMessage"):a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.invalidDataMessage"),409:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAlreadyExistsMessage"),500:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.internalErrorMessage")}:(null==e?void 0:e.method)===i.f2.PATCH&&(s=U.tr.ROLE_ASSIGNMENT,u={200:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentSuccessMessage",{resource:r}),400:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentFailedMessage",{resource:r}),500:a("user:modals.bulkImportUserWizard.wizardSummary.tableMessages.userAssignmentInternalErrorMessage",{resource:r})});we((function(t){var n=(null==e?void 0:e.method)===i.f2.PATCH&&200===o?t.successUserAssignment+1:t.successUserAssignment,r=(null==e?void 0:e.method)===i.f2.PATCH&&200!==o?t.failedUserAssignment+1:t.failedUserAssignment,a=(null==e?void 0:e.method)!==i.f2.POST||201!==o&&202!==o?t.successUserCreation:t.successUserCreation+1,s=(null==e?void 0:e.method)===i.f2.POST&&201!==o&&202!==o?t.failedUserCreation+1:t.failedUserCreation;return Re(Re({},t),{},{failedUserAssignment:r,failedUserCreation:s,successUserAssignment:n,successUserCreation:a})}));var c=U.IC.FAILED;return 201!==o&&202!==o&&200!==o||(c=U.IC.SUCCESS),{message:u[o]||l,operationType:s,resourceIdentifier:r,status:nn(o),statusCode:c}},nn=function(e){return a(201===e||200===e?"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.success":202===e?"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.warning":"user:modals.bulkImportUserWizard.wizardSummary.tableStatus.failed")},rn=function(){return u.createElement(le.Z.Field,{required:!0},u.createElement($.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"spacing-bottom","data-componentid":"".concat(r,"-userstore-label")},a("user:forms.addUserForm.inputs.domain.label")),u.createElement(p.Z,{className:"mt-2",fluid:!0,selection:!0,labeled:!0,options:ct,loading:!1,"data-testid":"".concat(r,"-userstore-dropdown"),"data-componentid":"".concat(r,"-userstore-dropdown"),name:"userstore",disabled:!1,readOnly:!1,value:pt,onChange:function(e,t){ft(t.value.toString())},tabIndex:1,maxLength:60}))},an=function(){return f.m8.push(f.$x.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",de.Q.SCIM))};return u.createElement(f.wv,{"data-testid":r,"data-componentid":r,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},u.createElement(f.wv.MainPanel,null,u.createElement(f.wv.Header,{className:"wizard-header"},a("user:modals.bulkImportUserWizard.title"),u.createElement(s.X6,{as:"h6"},a("user:modals.bulkImportUserWizard.subTitle"),u.createElement(s.eb,{link:It("manage.users.bulkUsers.learnMore")},a("common:learnMore")))),u.createElement(f.wv.Content,{className:"content-container"},u.createElement(oe.Z,null,u.createElement(u.Fragment,null,u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,null,u.createElement(s.v0,{icon:"mail",content:a("user:modals.bulkImportUserWizard.wizardSummary.inviteEmailInfo"),hideDefaultIcon:!0})))),u.createElement(oe.Z.Row,null,u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},u.createElement(se.Z.Group,{size:"large",labeled:!0,basic:!0},Object.values(w.Wv).map((function(e,t){return u.createElement(u.Fragment,null,u.createElement(s.GI,{trigger:u.createElement("div",{className:"inline-button"},u.createElement(se.Z,{disabled:Ut&&e===w.Wv.MANUAL&&(null===me.userConfig||void 0===me.userConfig?void 0:me.userConfig.enableUsernameValidation),"data-componentid":"".concat(r,"-").concat(e,"-tab-option"),key:t,active:ze===e,className:"multiple-users-config-mode-wizard-tab",content:ge.QH.resolveMultipleInvitesDisplayName(e),onClick:function(t){t.preventDefault(),Pe(e)}})),content:a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.disabledHint"),size:"mini",wide:!0,disabled:e===w.Wv.META_FILE||!Ut||!(null!==me.userConfig&&void 0!==me.userConfig&&me.userConfig.enableUsernameValidation),"data-componentid":"".concat(r,"-disabled-hint")}))}))))),ze==w.Wv.MANUAL?u.createElement(u.Fragment,null,ot&&u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},lt)),re?u.createElement(u.Fragment,null,ot&&u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},lt)),u.createElement(Ie,{isLoading:T,"data-componentid":"".concat(r,"-manual-response-list"),hasError:A,responseList:W,bulkResponseSummary:Ce,successAlert:u.createElement(X.Z,{severity:"success","data-componentid":"".concat(r,"-success-alert")},u.createElement(G.Z,{"data-componentid":"".concat(r,"-success-alert-title")},a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.message")),a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.alerts.creationSuccess.description"))})):u.createElement(u.Fragment,null,!(null!==me.userConfig&&void 0!==me.userConfig&&me.userConfig.enableBulkImportSecondaryUserStore)&&u.createElement(oe.Z.Row,{columns:1,className:"mb-0 pb-0"},u.createElement(oe.Z.Column,{mobile:16},u.createElement(X.Z,{severity:"info"},u.createElement(ie.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.userstoreMessage",tOptions:{userstore:ae(n)}},"The created users will be added to the ",u.createElement("b",null,ae(n))," user store.")))),!zt()&&u.createElement(oe.Z.Row,{columns:1,className:"mb-0 pb-0"},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},rn())),u.createElement(Q.Z,{size:"small",limitTags:me.userConfig.bulkUserImportLimit.inviteEmails,fullWidth:!0,multiple:!0,id:"tags-filled",options:At.map((function(e){return e})),defaultValue:[],freeSolo:!0,renderTags:function(e,t){return e.map((function(e,n){return u.createElement(K.Z,Ue({key:n,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:n})))}))},renderInput:function(e){return u.createElement(u.Fragment,null,u.createElement($.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(r,"-emails-label")},a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsLabel")),u.createElement(q.Z,Ue({id:"tags-filled",margin:"normal",error:Xe,helperText:Xe&&Ye,InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.emailsPlaceholder"),"data-componentid":"".concat(r,"-email-input")})))},onChange:function(e,t){var n;Qe(t),n=t,ee.I.email(n[n.length-1])||(Be(!0),$e(a("users:guestUsers.fields.username.validations.regExViolation")),n.pop())},onInputChange:function(){Be(!1)}}),u.createElement(s.kW,null,a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),u.createElement(Q.Z,{size:"small",multiple:!0,fullWidth:!0,disablePortal:!0,id:"combo-box-demo",options:null!==(Mt=null==Lt?void 0:Lt.Resources)&&void 0!==Mt?Mt:[],getOptionLabel:function(e){return null==e?void 0:e.displayName},renderOption:function(e,t){return u.createElement(B.Z,Ue({component:"li"},e),u.createElement(J.Z,{sx:{fontWeight:500}},null==t?void 0:t.displayName))},renderInput:function(e){return u.createElement(u.Fragment,null,u.createElement($.Z,{htmlFor:"tags-filled",disableAnimation:!0,shrink:!1,margin:"dense",className:"mt-2","data-componentid":"".concat(r,"-roles-label")},a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsLabel")),u.createElement(q.Z,Ue({id:"tags-filled",margin:"normal",InputLabelProps:{required:!0}},e,{required:!0,variant:"outlined",placeholder:a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.groupsPlaceholder"),"data-componentid":"".concat(r,"-roles-input")})))},onChange:function(e,t){et(t)},renderTags:function(e,t){return e.map((function(e,n){return u.createElement(K.Z,Ue({key:n,size:"small",className:"oxygen-chip-beta",label:u.createElement("label",null,null==e?void 0:e.displayName)},t({index:n})))}))}}))):ze===w.Wv.META_FILE?V?u.createElement(u.Fragment,null,nt&&u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},at)),!bt&&u.createElement(Ie,{isLoading:T,"data-componentid":"".concat(r,"-response-list"),hasError:A,responseList:x,bulkResponseSummary:be})):u.createElement(u.Fragment,null,nt&&u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},at)),!(null!==me.userConfig&&void 0!==me.userConfig&&me.userConfig.enableBulkImportSecondaryUserStore)&&u.createElement(oe.Z.Row,{columns:1,className:"mb-0 pb-0"},u.createElement(oe.Z.Column,{mobile:16},u.createElement(X.Z,{severity:"info"},u.createElement(ie.c,{i18nKey:"console:manage.features.user.modals.bulkImportUserWizard.wizardSummary.userstoreMessage",tOptions:{userstore:ae(n)}},"The created users will be added to the ",u.createElement("b",null,ae(n))," user store.")))),!z&&!zt()&&u.createElement(oe.Z.Row,{columns:1,className:"mb-0 pb-0"},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},rn())),u.createElement(oe.Z.Row,{columns:1,className:"pt-0"},u.createElement(oe.Z.Column,{mobile:16},u.createElement(s.GB,{key:1,fileStrategy:Ot,file:y,onChange:function(e){S(e.file),R(e.serialized),rt(null),N(!1)},uploadButtonText:"Upload CSV File",dropzoneText:"Drag and drop a CSV file here.","data-testid":"".concat(r,"-form-wizard-csv-file-picker"),"data-componentid":"".concat(r,"-form-wizard-csv-file-picker"),icon:(0,f._5)().uploadPlaceholder,placeholderIcon:u.createElement(m.Z,{name:"file code",size:"huge"}),normalizeStateOnRemoveOperations:!0,emptyFileError:!1,hidePasteOption:!0}))),u.createElement(s.kW,null,a("user:modals.bulkImportUserWizard.wizardSummary.fileBased.hint"))):void 0)),u.createElement(f.wv.Actions,null,u.createElement(oe.Z,null,ze==w.Wv.MANUAL?u.createElement(oe.Z.Row,{column:1},u.createElement(oe.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(s.Qj,{"data-testid":"".concat(r,"-close-button"),"data-componentid":"".concat(r,"-close-button"),floated:"left",onClick:function(){t(),he(!1)},disabled:T},a("common:close"))),!re||T?u.createElement(oe.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(s.KM,{"data-testid":"".concat(r,"-invite-button"),"data-componentid":"".concat(r,"-invite-button"),floated:"right",onClick:qt,loading:T,disabled:z||T||A||!He||0===(null==He?void 0:He.length)},a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.primaryButton"))):null):u.createElement(oe.Z.Row,{column:1},u.createElement(oe.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(s.Qj,{"data-testid":"".concat(r,"-cancel-button"),"data-componentid":"".concat(r,"-cancel-button"),floated:"left",onClick:function(){t(),H(!1)},disabled:T},a("common:close"))),!V||T?u.createElement(oe.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(s.KM,{"data-testid":"".concat(r,"-finish-button"),"data-componentid":"".concat(r,"-finish-button"),floated:"right",onClick:Jt,loading:T,disabled:z||T||A||!y},a("user:modals.bulkImportUserWizard.buttons.import"))):null)))),u.createElement(f.wv.SidePanel,null,u.createElement(f.wv.Header,{className:"wizard-header help-panel-header muted"},u.createElement("div",{className:"help-panel-header-text"},a("applications:wizards.minimalAppCreationWizard.help.heading"))),u.createElement(f.wv.Content,null,u.createElement(u.Suspense,{fallback:u.createElement(s.pO,null)},u.createElement(s.X6,{as:"h5"},a("user:modals.bulkImportUserWizard.sidePanel.manual")),u.createElement("p",null,a("user:modals.bulkImportUserWizard.wizardSummary.manualCreation.hint")),u.createElement(Y.Z,null),u.createElement(s.X6,{as:"h5"},a("user:modals.bulkImportUserWizard.sidePanel.fileBased")),u.createElement("p",null,a("user:modals.bulkImportUserWizard.wizardSummary.fileBased.hint")),u.createElement(s.X6,{as:"h6"},a("user:modals.bulkImportUserWizard.sidePanel.fileFormatTitle")),u.createElement("p",null,l()?u.createElement(ie.c,{i18nKey:"user:modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to",u.createElement("b",null,"local attribute")," names."):u.createElement(ie.c,{i18nKey:"user:modals.bulkImportUserWizard.sidePanel.fileFormatContent"},"Headers of the CSV file should be user attributes that are mapped to local ",u.createElement(s.rU,{onClick:an},"attribute names"),".")),u.createElement("p",null," ",a("user:modals.bulkImportUserWizard.sidePanel.fileFormatSampleHeading")),u.createElement("p",null,Ut?u.createElement("code",null,"username,givenname,emailaddress,groups",u.createElement("br",null),"user1,john,john@test.com,group1|group2",u.createElement("br",null),"user2,jake,jake@test.com,group2",u.createElement("br",null),"user3,jane,jane@test.com,group1",u.createElement("br",null)):u.createElement("code",null,"username,givenname,groups",u.createElement("br",null),"user1,john,group1|group2",u.createElement("br",null),"user2,jake,group2",u.createElement("br",null),"user3,jane,group1",u.createElement("br",null)))))))},Ve={failedUserAssignment:0,failedUserCreation:0,successUserAssignment:0,successUserCreation:0},He=n(47018),Qe=n(20812),Ge=n(51865),Xe=n.n(Ge),Be=n(67127),Ke=n(12430),Ye=n(51835),$e=n.n(Ye),qe=n(27975),Je=n.n(qe),et=n(55900),tt=n.n(et),nt=n(21555),rt=n.n(nt),at=n(3621),it=n.n(at),ot=n(5062),st=n.n(ot),lt=n(40808),ut=n.n(lt),ct={};ct.styleTagTransform=st(),ct.setAttributes=rt(),ct.insert=tt().bind(null,"head"),ct.domAPI=Je(),ct.insertStyleElement=it();$e()(ut(),ct);ut()&&ut().locals&&ut().locals;function dt(){return dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dt.apply(this,arguments)}var mt=function(e){var t=e.onSubmit,n=e["data-componentid"],r=fe.pH,a=(0,c.$)().t,i=(0,Ke.Ug)(r,"members",null,!0).data,o=(0,u.useMemo)((function(){var e;return(0,Be.Z)(null==i?void 0:i.Resources)?[]:null==i||null===(e=i.Resources)||void 0===e?void 0:e.map((function(e){return{group:e,key:e.id,label:e.displayName}}))}),[i]);return u.createElement(Qe.vy,{initialValues:null,keepDirtyOnReinitialize:!0,"data-componentid":"".concat(n,"-external-form"),onSubmit:t,validate:function(e){var t={groups:void 0,username:void 0};return e.username||(t.username=a("parentOrgInvitations:addUserWizard.username.validations.required")),t},render:function(e){var t=e.handleSubmit;return u.createElement("form",{id:U._F.INVITE_PARENT_ORG_USER_FORM_ID,onSubmit:t,className:"invite-parent-org-user-form"},u.createElement(s.v0,{type:"info",className:"add-user-info",content:a("parentOrgInvitations:addUserWizard.hint")}),u.createElement(Qe.SE,{fullWidth:!0,ariaLabel:"Usernames field","data-componentid":"".concat(n,"-external-form-username-input"),label:a("parentOrgInvitations:addUserWizard.username.label"),name:"username",placeholder:a("parentOrgInvitations:addUserWizard.username.placeholder"),required:!0,helperText:u.createElement(s.kW,null,u.createElement(J.Z,{variant:"inherit"},a("parentOrgInvitations:addUserWizard.username.hint"))),component:Qe.KQ,options:[],renderTags:function(e,t){return e.map((function(e,n){return u.createElement(K.Z,dt({key:n,size:"small",sx:{marginLeft:1},className:"oxygen-chip-beta",label:e},t({index:n})))}))},filterOptions:function(e,t){var n=t.inputValue;return""!==n?["".concat(n)]:[]},renderOption:function(e,t){return u.createElement("li",dt({},e,{className:Xe()("press-enter-prompt",e.className)}),t,u.createElement("p",null,u.createElement(ie.c,{i18nKey:"common:pressEnterPrompt"},"Press ",u.createElement("kbd",null,"Enter")," to select")))},multipleValues:!0,freeSolo:!0}),u.createElement(Qe.SE,{fullWidth:!0,multipleValues:!0,ariaLabel:"Groups field","data-componentid":"".concat(n,"-form-groups-field"),name:"groups",label:a("parentOrgInvitations:addUserWizard.groups.label"),helperText:u.createElement(s.kW,null,u.createElement(J.Z,{variant:"inherit"},a("parentOrgInvitations:addUserWizard.groups.hint"))),placeholder:a("parentOrgInvitations:addUserWizard.groups.placeholder"),component:Qe.KQ,options:o,renderTags:function(e,t){return e.map((function(e,n){return u.createElement(K.Z,dt({key:n,size:"medium",label:e.label},t({index:n})))}))}}))}})};mt.defaultProps={"data-componentid":"invite-parent-org-user"};var pt=n(15212),ft=n(3989);function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){yt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yt(e,t,n){var r;return r=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==vt(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bt(e){return function(e){if(Array.isArray(e))return It(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||St(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||St(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){if(e){if("string"==typeof e)return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?It(e,t):void 0}}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ct=function(e){var t=e.response,n=e.isLoading,r=e.hasError,a=e["data-componentid"],i=(0,c.$)().t,o=Et((0,u.useState)([]),2),l=o[0],d=o[1],m=Et((0,u.useState)({failedCount:0,successCount:0,totalCount:0}),2),p=m[0],v=m[1];(0,u.useEffect)((function(){t&&(null==t?void 0:t.length)>0&&t.map((function(e){var t=i("invite:notifications.sendInvite.success.message");if(e.result.errorCode)switch(e.result.errorCode){case ft.jI.ERROR_CODE_USER_NOT_FOUND:t=i("user:modals.inviteParentUserWizard.tableMessages.userNotFound");break;case ft.jI.ERROR_CODE_ACTIVE_INVITATION_EXISTS:t=i("user:modals.inviteParentUserWizard.tableMessages.activeInvitationExists");break;case ft.jI.ERROR_CODE_INVITED_USER_EMAIL_NOT_FOUND:t=i("user:modals.inviteParentUserWizard.tableMessages.userEmailNotFound");break;case ft.jI.ERROR_CODE_USER_ALREADY_EXISTS_INVITED_ORGANIZATION:t=i("user:modals.inviteParentUserWizard.tableMessages.userAlreadyExist")}d((function(n){return[].concat(bt(n),[{message:t,status:e.result.status,username:e.username}])})),e.result.status===ft.YV.SUCCESS?v((function(e){return ht(ht({},e),{},{successCount:e.successCount+1,totalCount:e.totalCount+1})})):v((function(e){return ht(ht({},e),{},{failedCount:e.failedCount+1,totalCount:e.totalCount+1})}))}))}),[t]);return u.createElement(oe.Z,null,u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},n||r?null:0===(null==p?void 0:p.failedCount)?u.createElement(X.Z,{severity:"success","data-componentid":"".concat(a,"-success-alert")},u.createElement(pt.Z,{"data-componentid":"".concat(a,"-success-alert-title")},i("user:modals.inviteParentUserWizard.successAlert.message")),i("user:modals.inviteParentUserWizard.successAlert.description")):u.createElement(X.Z,{severity:"error","data-componentid":"".concat(a,"-error-alert")},u.createElement(pt.Z,{"data-componentid":"".concat(a,"-error-alert-title")},i("user:modals.inviteParentUserWizard.errorAlert.message")),u.createElement(ie.c,{i18nKey:"user:modals.inviteParentUserWizard.errorAlert.description",tOptions:{failedCount:null==p?void 0:p.failedCount}},"An error occurred while inviting ",null==p?void 0:p.failedCount," user(s)..")))),u.createElement(oe.Z.Row,{columns:1},u.createElement(oe.Z.Column,{mobile:16,tablet:16,computer:16},u.createElement(J.Z,{variant:"body2",style:{textAlign:"right"}},i("user:modals.inviteParentUserWizard.totalInvitations")+" : "+(null==p?void 0:p.totalCount)),u.createElement(s.wQ,{className:"addon-field-wrapper",isLoading:n,actions:[],columns:[{allowToggleVisibility:!1,dataIndex:"resourceIdentifier",id:"resourceIdentifier",key:"resourceIdentifier",render:function(e){return u.createElement(I.Z,{as:"h6","data-componentid":"".concat(a,"-username-item-heading")},u.createElement(I.Z.Content,null,e.username))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.username")},{allowToggleVisibility:!1,dataIndex:"status",id:"status",key:"status",render:function(e){return u.createElement(I.Z,{as:"h6","data-componentid":"".concat(a,"-status-item-heading")},u.createElement(I.Z.Content,null,u.createElement(T.Z,{"data-componentid":"".concat(a,"-bulk-label"),content:e.status,size:"small",color:e.status===ft.YV.SUCCESS?"green":"red",className:"group-label"})))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.status")},{allowToggleVisibility:!1,dataIndex:"message",id:"message",key:"message",render:function(e){return u.createElement(I.Z,{as:"h6","data-componentid":"".concat(a,"-status-item-heading")},u.createElement(I.Z.Content,null,e.message))},title:i("user:modals.bulkImportUserWizard.wizardSummary.tableHeaders.message")}],data:l,onColumnSelectionChange:function(){return null},onRowClick:function(){return null},placeholders:u.createElement(s.$J,{"data-testid":"".concat(a,"-empty-search-result"),"data-componentid":"".concat(a,"-empty-search-result"),image:(0,f.jF)().emptySearch,imageSize:"tiny",title:i("users:usersList.search.emptyResultPlaceholder.title"),subtitle:""}),transparent:!0,selectable:!1,showHeader:!1,"data-testid":"".concat(a,"-data-table"),"data-componentid":"".concat(a,"-data-table"),loadingStateOptions:{count:f.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,imageType:"circular"}}))))};function Ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Ct.defaultProps={"data-componentid":"parent-invite-response-list",hasError:!1,isLoading:!1,response:[]};var Rt=function(e){var t=e.closeWizard,n=e.onUserInviteSuccess,r=e["data-componentid"],a=(0,c.$)().t,o=Ut((0,u.useState)(!1),2),l=o[0],d=o[1],m=Ut((0,s.IK)(),3),p=m[0],f=m[1],v=m[2],g=Ut((0,u.useState)([]),2),h=g[0],y=g[1];return u.createElement(He.Z,{"data-componentid":r,open:!0,className:"wizard application-create-wizard",dimmer:"blurring",size:"small",onClose:t,closeOnDimmerClick:!1,closeOnEscape:!0},u.createElement(He.Z.Header,{className:"wizard-header"},a("parentOrgInvitations:addUserWizard.heading"),u.createElement(s.X6,{as:"h6"},a("parentOrgInvitations:addUserWizard.description"))),u.createElement(He.Z.Content,{className:"content-container",scrolling:!0},p&&v,(null==h?void 0:h.length)>0?u.createElement(Ct,{response:h,isLoading:l}):u.createElement(mt,{onSubmit:function(e){var t,r={groups:null==e||null===(t=e.groups)||void 0===t?void 0:t.map((function(e){return e.group.id})),usernames:null==e?void 0:e.username};f(null),d(!0),(0,R.O)(r).then((function(e){var t=null==e?void 0:e.data;y(t),n()})).catch((function(e){!function(e){var t,n,r,o;if(null!=e&&e.response&&401!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status))if(403===(null==e||null===(n=e.response)||void 0===n?void 0:n.status)&&(null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.code)===U._F.ERROR_COLLABORATOR_USER_LIMIT_REACHED)f({description:a("extensions:manage.invite.notifications.sendInvite.limitReachError.description"),level:i.QU.ERROR,message:a("extensions:manage.invite.notifications.sendInvite.limitReachError.message")});else if(null!=e&&null!==(o=e.response)&&void 0!==o&&null!==(o=o.data)&&void 0!==o&&o.description){var s;f({description:a("invite:notifications.sendInvite.error.description",{description:null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.description}),level:i.QU.ERROR,message:a("invite:notifications.sendInvite.error.message")})}else f({description:a("invite:notifications.sendInvite.genericError.description"),level:i.QU.ERROR,message:a("invite:notifications.sendInvite.genericError.message")});else f({description:a("invite:notifications.sendInvite.error.description"),level:i.QU.ERROR,message:a("invite:notifications.sendInvite.error.message")})}(e)})).finally((function(){d(!1)}))},"data-componentid":"".concat(r,"-form")})),u.createElement(He.Z.Actions,null,u.createElement(oe.Z,null,u.createElement(oe.Z.Row,{column:2},u.createElement(oe.Z.Column,{mobile:8},u.createElement(s.Qj,{"data-componentid":"".concat(r,"-cancel-button"),floated:"left",onClick:function(){t()}},a("common:cancel"))),!h||(null==h?void 0:h.length)<1&&u.createElement(oe.Z.Column,{mobile:8,tablet:8,computer:8},u.createElement(s.KM,{"data-componentid":"".concat(r,"-finish-button"),floated:"right",onClick:function(){document.getElementById(U._F.INVITE_PARENT_ORG_USER_FORM_ID).dispatchEvent(new Event("submit",{bubbles:!0,cancelable:!0}))},loading:l,disabled:l},a("extensions:manage.features.user.addUser.invite")))))))};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Lt=function(e){var t,n=e["data-testid"],I=e["data-componentid"],C=(0,c.$)().t,R=(0,d.I0)(),O=(0,r.Ac)(g.FeatureGateConstants.SAAS_FEATURES_IDENTIFIER),A=(0,h.z)(),L=A.isSubOrganization,T=A.isSuperOrganization,k=A.isFirstLevelOrganization,_=(0,d.v9)((function(e){return e.config.ui.features})),z=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),P=At((0,u.useState)(""),2),M=P[0],x=P[1],j=At((0,u.useState)(0),2),Z=j[0],W=j[1],F=At((0,u.useState)(0),2),D=F[0],Q=F[1],G=At((0,u.useState)(f.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),X=G[0],B=G[1],K=At((0,u.useState)(!1),2),Y=K[0],$=K[1],q=At((0,u.useState)(!1),2),J=q[0],ee=q[1],te=At((0,u.useState)([]),2),ne=te[0],re=te[1],ae=At((0,u.useState)(!1),2),ie=ae[0],oe=ae[1],se=At((0,u.useState)(void 0),2),le=se[0],ue=se[1],ce=At((0,u.useState)(void 0),2),de=ce[0],me=ce[1],pe=At((0,u.useState)(U.sk.USER),1)[0],fe=At((0,u.useState)(),2),ve=fe[0],ge=fe[1],he=At((0,u.useState)(v.userstoresConfig.primaryUserstoreName),2),ye=he[0],be=he[1],Ee=At((0,u.useState)(w.XC.PENDING),2),Se=Ee[0],Ie=Ee[1],Ce=At((0,u.useState)(void 0),1)[0],Ue=At((0,u.useState)(!1),1)[0],we=At((0,u.useState)(!1),2),Re=we[0],Oe=we[1],Ae=At((0,u.useState)(),2),Ne=Ae[0],Le=Ae[1],Te=At((0,u.useState)([]),2),ke=Te[0],_e=Te[1],ze=At((0,u.useState)([]),2),Pe=ze[0],Me=ze[1],xe=At((0,u.useState)(!1),2),je=xe[0],Ze=xe[1],We=At((0,u.useState)(!1),2),Fe=We[0],Ve=We[1],He=At((0,u.useState)(!1),2),Qe=He[0],Ge=He[1],Xe=f.lD.getInstance(),Be=[{key:2,text:C("parentOrgInvitations:searchdropdown.pendingLabel"),value:"Pending"},{key:3,text:C("parentOrgInvitations:searchdropdown.expiredLabel"),value:"Expired"}],Ke=X+1,Ye=U._F.GROUPS_AND_ROLES_ATTRIBUTE,$e=(0,S.M)(L()),qe=$e.data,Je=$e.isLoading,et=$e.mutate,tt=(0,y.yA)(O===r.iK.ENABLED&&!L()).data,nt=(0,E.WW)(Ke,Z,""===M?null:M,null,ye,Ye),rt=nt.data,at=nt.isLoading,it=nt.error,ot=nt.mutate,st=(0,b.zU)(null,!L()),lt=st.data,ut=st.isLoading,ct=st.isValidating,dt=st.error,mt=(0,u.useMemo)((function(){return null==tt?void 0:tt.realmConfig}),[tt]),pt=(0,u.useMemo)((function(){var e=[{key:-1,text:v.userstoresConfig.primaryUserstoreName,value:v.userstoresConfig.primaryUserstoreName}];return(null==lt?void 0:lt.length)>0&&lt.map((function(t,n){t.name.toUpperCase()!==v.userstoresConfig.primaryUserstoreName&&(0,f.YZ)(t.id).then((function(r){var a;if(!("true"===(null===(a=r.properties.find((function(e){return"Disabled"===e.name})))||void 0===a?void 0:a.value))){var i={key:n,text:t.name,value:t.name};e.push(i)}}))})),e}),[lt]),ft=(0,u.useMemo)((function(){return!(null==ne||!ne.includes(ye))}),[ye]);(0,u.useEffect)((function(){ct||ut||!lt||lt.length<1||Ut(lt)}),[lt]),(0,u.useEffect)((function(){it&&(it.response&&it.response.data&&it.response.data.description?R((0,o.V_)({description:it.response.data.description,level:i.QU.ERROR,message:C("console:manage.features.users.notifications.fetchUsers.error.message")})):R((0,o.V_)({description:C("console:manage.features.users.notifications.fetchUsers.genericError.description"),level:i.QU.ERROR,message:C("console:manage.features.users.notifications.fetchUsers.genericError.message")})))}),[it]),(0,u.useEffect)((function(){dt&&(dt.response&&dt.response.data&&dt.response.data.description?R((0,o.V_)({description:dt.response.data.description,level:i.QU.ERROR,message:C("console:manage.features.users.notifications.fetchUsers.error.message")})):R((0,o.V_)({description:C("console:manage.features.users.notifications.fetchUserstores.genericError.description"),level:i.QU.ERROR,message:C("console:manage.features.users.notifications.fetchUserstores.genericError.message")})))}),[dt]),(0,u.useEffect)((function(){if(L()){if(W(0),"userName co "===M||""===M||null===M)return Me(null==qe?void 0:qe.invitations),void Le([]);if(M){var e=null==qe?void 0:qe.invitations;if((null==Ne?void 0:Ne.length)>0&&(e=Ne),M.includes("userName sw ")){var t,n=M.split("sw ")[1];e=null===(t=e)||void 0===t?void 0:t.filter((function(e){return null==e?void 0:e.username.startsWith(n)}))}else if(M.includes("userName ew ")){var r,a=M.split("ew ")[1];e=null===(r=e)||void 0===r?void 0:r.filter((function(e){return null==e?void 0:e.username.endsWith(a)}))}else if(M.includes("userName eq ")){var i,o=M.split("eq ")[1];e=null===(i=e)||void 0===i?void 0:i.filter((function(e){return(null==e?void 0:e.username)===o}))}else if(M.includes("userName co ")){var s,l=M.split("co ")[1];e=null===(s=e)||void 0===s?void 0:s.filter((function(e){return null==e?void 0:e.username.includes(l)}))}Me(e),Le(e)}}}),[M]),(0,u.useEffect)((function(){Ze(J&&!Fe&&!le)}),[J,Fe]),(0,u.useEffect)((function(){var e;_e(null==qe||null===(e=qe.invitations)||void 0===e?void 0:e.filter((function(e){return e.status===w.XC.PENDING.toUpperCase()})))}),[null==qe?void 0:qe.invitations]),(0,u.useEffect)((function(){var e;if(Se!==w.XC.ACCEPTED){var t=null==Pe?void 0:Pe.filter((function(e){return e.status===Se.toUpperCase()}));(null===(e=t)||void 0===e?void 0:e.length)>X?(t=t.slice(Z,Z+X),_e(t),me(t.length===X)):(_e(t),me(!1))}}),[Pe,Z,X,Re,Se]);var vt,gt,ht,yt,bt,Et,St,It=function(e){var t;if(e){var n=(0,l.Z)(e);return n.Resources=null==n||null===(t=n.Resources)||void 0===t?void 0:t.map((function(e){if((e.userName.split("/").length>1?e.userName.split("/")[0]:v.userstoresConfig.primaryUserstoreName)!==v.userstoresConfig.primaryUserstoreName){var t=null;if((null==e?void 0:e.emails)instanceof Array){var n=null==e?void 0:e.emails[0];t="string"==typeof n?n:null==n?void 0:n.value}return e.emails=[t],e}return e})),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e;return r.itemsPerPage===t?(r.Resources.splice(-1,n),me(!0)):me(!1),r}(n,Ke,1)}},Ct=(0,u.useMemo)((function(){return It(rt)}),[rt]),Ut=function(e){f.w3.getReadOnlyUserStores(e).then((function(e){re(e)}))},wt=function(){oe(!ie),x("")},Nt=function(e){x(e),W(0)},Lt=function(e,t){W((t.activePage-1)*X)},Tt=function(e,t){B(t.value)},kt=function(e,t){"all"===t.value?be(null):be(t.value),W(0)},_t=function(){ot()},zt=function(){Ve(!0),(0,y.Qy)(y.vH.USER_ONBOARDING_CONNECTOR_ID).then((function(e){var t=(null==e?void 0:e.connectors).find((function(e){return e.id===y.vH.USER_EMAIL_VERIFICATION_CONNECTOR_ID})).properties.find((function(e){return e.name===y.vH.EMAIL_VERIFICATION_ENABLED}));ue("true"===t.value)})).catch((function(e){var t,n,r,a,s;s={description:null!==(t=null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.description)&&void 0!==t?t:C("governanceConnectors:notifications.getConnector.genericError.description"),level:i.QU.ERROR,message:null!==(r=null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)&&void 0!==r?r:C("governanceConnectors:notifications.getConnector.genericError.message")},R((0,o.V_)(s))})).finally((function(){return Ve(!1)}))},Pt=u.createElement(s.KM,{"data-componentid":"".concat(n,"-add-user-button"),"data-testid":"".concat(n,"-add-user-button")},u.createElement(m.Z,{name:"add"}),C("extensions:manage.users.buttons.addUserBtn"),u.createElement(m.Z,{name:"dropdown",className:"ml-3 mr-0"})),Mt=function(){return u.createElement(f.nC,{onFilter:Nt,filterAttributeOptions:[{key:0,text:C("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:C("users:advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"},{key:2,text:"First Name",value:"name.givenName"},{key:3,text:"Last Name",value:"name.familyName"}],filterAttributePlaceholder:C("users:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:C("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:C("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:C("users:advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:ie,disableSearchAndFilterOptions:(null==Ct?void 0:Ct.totalResults)<=0&&!M})},xt=function(){return u.createElement(s.PS,{className:"sub-org-users-list",advancedSearch:Mt(),currentListSize:null==Ct?void 0:Ct.itemsPerPage,listItemLimit:X,onItemsPerPageDropdownChange:Tt,"data-testid":"user-mgt-user-list-layout",onPageChange:Lt,rightActionPanel:k()||T()?u.createElement(p.Z,{"data-testid":"user-mgt-user-list-userstore-dropdown",selection:!0,options:pt,onChange:kt,defaultValue:v.userstoresConfig.primaryUserstoreName,loading:ut,readonly:pt.length<=1}):null,showPagination:!0,totalPages:Wt(),totalListSize:null==Ct?void 0:Ct.totalResults,paginationOptions:{disableNextButton:!de},isLoading:at},dt?u.createElement(s.$J,{subtitle:[C("users:placeholders.userstoreError.subtitles.0"),C("users:placeholders.userstoreError.subtitles.1")],title:C("users:placeholders.userstoreError.title"),image:(0,f.jF)().genericError,imageSize:"tiny"}):u.createElement(V,{advancedSearch:Mt(),usersList:Ct,onUserDelete:_t,userMetaListContent:null,realmConfigs:mt,onEmptyListPlaceholderActionClick:function(){return $(!0)},onSearchQueryClear:wt,searchQuery:M,"data-testid":"user-mgt-user-list",readOnlyUserStores:ne,featureConfig:_,isReadOnlyUserStore:ft}))},jt=function(){return u.createElement(s.PS,{className:"sub-org-users-list",advancedSearch:Mt(),currentListSize:null==Ct?void 0:Ct.itemsPerPage,listItemLimit:X,onItemsPerPageDropdownChange:Tt,"data-componentid":"".concat(I,"-user-mgt-user-list-layout"),"data-testid":"".concat(n,"-user-mgt-user-list-layout"),onPageChange:Lt,showPagination:!0,totalPages:Wt(),totalListSize:null==Ct?void 0:Ct.totalResults,isLoading:at||Je,paginationOptions:{disableNextButton:!Ce,showItemsPerPageDropdown:ye===v.userstoresConfig.primaryUserstoreName},showPaginationPageLimit:!Ue,leftActionPanel:u.createElement(p.Z,{"data-componentid":"".concat(I,"-list-userstore-dropdown"),selection:!0,options:Be,onChange:Zt,text:C("parentOrgInvitations:filterLabel")+Se,disabled:Je})},dt?u.createElement(s.$J,{subtitle:[C("users:placeholders.userstoreError.subtitles.0"),C("users:placeholders.userstoreError.subtitles.1")],title:C("users:placeholders.userstoreError.title"),image:(0,f.jF)().genericError,imageSize:"tiny"}):u.createElement(N,{invitationStatusOption:null,onEmptyListPlaceholderActionClick:function(){return $(!0)},onboardedGuestUserList:Ct,onSearchQueryClear:wt,guestUsersList:ke,getGuestUsersList:function(){return et()},searchQuery:M,userTypeSelection:U.rb.EXTERNAL,"data-testid":n}))},Zt=function(e,t){Ie(t.value),Oe(!0)},Wt=function(){return ye===v.userstoresConfig.primaryUserstoreName?Math.ceil((null==Ct?void 0:Ct.totalResults)/X):100};return u.createElement(s.Xg,{action:(0,a.Xr)(null==_?void 0:_.users,null==_||null===(t=_.users)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create,z)&&!at&&(!L()||!Je)&&!ft&&u.createElement(p.Z,{"data-componentid":"".concat(I,"-add-user-dropdown"),direction:"left",floating:!0,icon:null,trigger:Pt},u.createElement(p.Z.Menu,null,(St=[],(0,a.Xr)(null==_?void 0:_.users,null==_||null===(ht=_.users)||void 0===ht||null===(ht=ht.scopes)||void 0===ht?void 0:ht.create,z)&&St.push({"data-componentid":"".concat(I,"-add-user-dropdown-item"),key:1,text:C("users:addUserDropDown.addNewUser"),value:U.rb.EXTERNAL}),(0,a.Xr)(null==_?void 0:_.bulkUserImport,null==_||null===(yt=_.bulkUserImport)||void 0===yt||null===(yt=yt.scopes)||void 0===yt?void 0:yt.create,z)&&St.push({"data-componentid":"".concat(n,"-bulk-import-users-dropdown-item"),"data-testid":"".concat(n,"-bulk-import-users-dropdown-item"),key:2,text:C("users:addUserDropDown.bulkImport"),value:U.Bv.BULK_IMPORT}),L()&&null!=_&&null!==(bt=_.parentUserInvitation)&&void 0!==bt&&bt.enabled&&(0,a.Xr)(null==_?void 0:_.guestUser,null==_||null===(Et=_.guestUser)||void 0===Et||null===(Et=Et.scopes)||void 0===Et?void 0:Et.create,z)&&St.push({"data-componentid":"".concat(I,"-invite-parent-user"),key:3,text:C("parentOrgInvitations:addUserWizard.heading"),value:U.rb.INTERNAL}),St).map((function(e){return u.createElement(p.Z.Item,Ot({key:e.value,onClick:function(){return function(e){switch(zt(),e){case U.rb.EXTERNAL:Xe.publish("manage-users-click-create-new",{type:"user"}),$(!0),ge(U.rb.EXTERNAL);break;case U.Bv.BULK_IMPORT:ee(!0);break;case U.rb.INTERNAL:Xe.publish("manage-users-click-invite-new",{type:"user"}),Ge(!0)}}(e.value)}},e))})))),title:C("pages:users.title"),pageTitle:C("pages:users.title"),description:C("extensions:manage.users.usersSubTitle"),"data-testid":"".concat(n,"-page-layout")},L()?u.createElement(s.M$,{activeIndex:D,"data-testid":"".concat(n,"-administrator-tabs"),defaultActiveIndex:0,onTabChange:function(e,t){Q(t.activeIndex),wt(),0===t.activeIndex?ge(U.rb.INTERNAL):1===t.activeIndex&&ge(U.rb.EXTERNAL)},panes:(gt=[],gt.push({componentId:"users",menuItem:C("parentOrgInvitations:tab.usersTab"),render:xt}),null!=_&&null!==(vt=_.parentUserInvitation)&&void 0!==vt&&vt.enabled&&gt.push({componentId:"invitations",menuItem:C("parentOrgInvitations:tab.invitationsTab"),render:jt}),gt)}):xt(),Y&&u.createElement(H.G,{"data-componentid":"user-mgt-add-user-wizard-modal","data-testid":"user-mgt-add-user-wizard-modal",isSubOrg:L(),closeWizard:function(){$(!1),ue(void 0)},emailVerificationEnabled:le,onSuccessfulUserAddition:function(e){et(),ot(),Xe.publish("manage-users-finish-creating-user"),f.m8.push(f.$x.getPaths().get("USER_EDIT").replace(":id",e))},defaultUserTypeSelection:pe,userTypeSelection:ve,listOffset:Z,listItemLimit:X,updateList:function(){return ot()},userStore:ye}),J&&!Fe&&le&&u.createElement(De,{"data-componentid":"user-mgt-bulk-import-user-wizard-modal",closeWizard:function(){ee(!1),ot()},userstore:v.userstoresConfig.primaryUserstoreName}),je&&u.createElement(s.cV,{"data-componentid":"".concat(I,"-select-multiple-invite-confirmation-modal"),onClose:function(){Ze(!1),ee(!1)},type:"warning",open:je,primaryAction:C("common:close"),onPrimaryActionClick:function(){Ze(!1),ee(!1)},closeOnDimmerClick:!1},u.createElement(s.cV.Header,null,C("users:confirmations.addMultipleUser.header")),u.createElement(s.cV.Message,{attached:!0,warning:!0},C("users:confirmations.addMultipleUser.message")),u.createElement(s.cV.Content,null,C("users:confirmations.addMultipleUser.content"))),Qe&&u.createElement(Rt,{closeWizard:function(){Ge(!1),et()},onUserInviteSuccess:function(){return et()},"data-componentid":"user-mgt-invite-parent-user-wizard-modal"}))};Lt.defaultProps={"data-componentid":"users","data-testid":"users"};const Tt=Lt},40808:e=>{e.exports=[[e.id,".invite-parent-org-user-form .press-enter-prompt{display:flex;align-items:center;justify-content:space-between}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludml0ZS1wYXJlbnQtb3JnLXVzZXIuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxpREFBaUQsWUFBWSxDQUFDLGtCQUFrQixDQUFDLDZCQUE2QiIsImZpbGUiOiJpbnZpdGUtcGFyZW50LW9yZy11c2VyLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW52aXRlLXBhcmVudC1vcmctdXNlci1mb3JtIC5wcmVzcy1lbnRlci1wcm9tcHR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn0iXX0= */","",""]]},15212:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(43112),a=n(31549),i=n(31640),o=n(14517),s=n(44194),l=n(17273);const u="AlertTitle",c=(0,s.forwardRef)(((e,t)=>{const{className:n}=e,s=(0,r.__rest)(e,["className"]),l=(0,o.Z)("oxygen-alert-title",n);return(0,a.jsx)(i.Z,Object.assign({className:l},s,{ref:t}))}));c.displayName=(0,l.I)(u),c.muiName=u,c.defaultProps={};const d=c;var m,p,f;m='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-alert-title {\n  /* Add Styles */ }\n',p=document.getElementsByTagName("head")[0],(f=document.createElement("style")).setAttribute("type","text/css"),f.appendChild(document.createTextNode(m)),p.appendChild(f)},39174:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(43112),a=n(31549),i=n(51306),o=n(14517),s=n(44194),l=n(17273);const u=(0,s.forwardRef)(((e,t)=>{const{className:n}=e,s=(0,r.__rest)(e,["className"]),l=(0,o.Z)("oxygen-tab",n);return(0,a.jsx)(i.Z,Object.assign({className:l,ref:t},s))}));u.displayName=(0,l.I)("Tab"),u.muiName="Tab";const c=u;var d,m,p;d='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-tab {\n  font-size: 1rem;\n  font-weight: 400; }\n  .oxygen-tab:not(.Mui-selected) {\n    color: var(--oxygen-palette-text-primary); }\n',m=document.getElementsByTagName("head")[0],(p=document.createElement("style")).setAttribute("type","text/css"),p.appendChild(document.createTextNode(d)),m.appendChild(p)},26507:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(43112),a=n(31549),i=n(8766),o=n(14517),s=n(44194),l=n(17273),u=n(90988),c=n(49674);const d="Tabs",m=(0,s.forwardRef)(((e,t)=>{const{className:n}=e,s=(0,r.__rest)(e,["className"]),l=(0,o.Z)("oxygen-tabs",n);return(0,a.jsxs)(u.Z,Object.assign({className:l},{children:[(0,a.jsx)(i.Z,Object.assign({ref:t},s)),(0,a.jsx)(c.Z,{})]}))}));m.displayName=(0,l.I)(d),m.muiName=d;const p=m;var f,v,g;f='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-tabs {\n  /** Add Styles */ }\n',v=document.getElementsByTagName("head")[0],(g=document.createElement("style")).setAttribute("type","text/css"),g.appendChild(document.createTextNode(f)),v.appendChild(g)}}]);