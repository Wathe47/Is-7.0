"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[87670],{87670:(e,t,n)=>{n.r(t),n.d(t,{PrivateKeyJWTConfigEditPage:()=>E,default:()=>b});var r=n(93129),o=n(3356),i=n(86727),a=n(44194),c=n(10479),s=n(47245),l=n(39114),u=n(89141),g=n(72857),d=n(26154),f=n(24393),p=n(34148),m=n(58097),v=n(73508),y=p.AsgardeoSPAClient.getInstance().httpRequest.bind(p.AsgardeoSPAClient.getInstance());function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=function(e){var t,n,p,C,E=e["data-componentid"],b=(0,s.I0)(),w=(0,c.$)().t,j=(0,i.fQ)().getLink,A=h((0,a.useState)(!0),2),P=A[0],k=A[1],R=(t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{},url:m.De.getServiceResourceEndpoints().jwtAuthenticationServiceMgt},n=(0,v.Z)(t,{shouldRetryOnError:!1}),p=n.data,C=n.error,{data:p,error:C,isLoading:!p&&!C,isValidating:n.isValidating,mutate:n.mutate}),S=R.data,T=R.isLoading;(0,a.useEffect)((function(){S&&k(null==S?void 0:S.enableTokenReuse)}),[S]);var K=function(e){return w("jwtPrivateKeyConfiguration:notifications.error.description",{description:e.response.data.description})},O=function(e,t){k(t.checked),function(e){var t={data:[e],headers:{Accept:"application/json","Access-Control-Allow-Origin":f.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.PATCH,url:m.De.getServiceResourceEndpoints().jwtAuthenticationServiceMgt};return y(t).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.reject(e)}))}({operation:"ADD",path:"/enableTokenReuse",value:t.checked}).then((function(){b((0,o.V_)({description:w("jwtPrivateKeyConfiguration:notifications.success.description"),level:r.QU.SUCCESS,message:w("jwtPrivateKeyConfiguration:notifications.success.message")}))})).catch((function(e){!function(e){e.response&&e.response.data&&e.response.data.detail?b((0,o.V_)({description:K(e),level:r.QU.ERROR,message:w("jwtPrivateKeyConfiguration:notifications.error.message")})):b((0,o.V_)({description:w("jwtPrivateKeyConfiguration:notifications.genericError.description"),level:r.QU.ERROR,message:w("jwtPrivateKeyConfiguration:notifications..genericError.message")}))}(e)}))};return T?a.createElement(i.Me,{isLoading:T,className:"pt-5"}):a.createElement(i.Xg,{pageTitle:"Private Key JWT Client Authentication for OIDC",title:w("jwtPrivateKeyConfiguration:pageTitle"),description:a.createElement(a.Fragment,null,w("jwtPrivateKeyConfiguration:description"),a.createElement(i.eb,{link:j("manage.privateKeyJWT.learnMore")},w("common:learnMore"))),"data-componentid":"".concat(E,"-page-layout"),backButton:{"data-componentid":"".concat(E,"-page-back-button"),onClick:function(){f.m8.push(f.$x.getPaths().get("LOGIN_AND_REGISTRATION"))},text:w("governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0},a.createElement(a.Fragment,null,a.createElement(l.Z,{label:w(P?"jwtPrivateKeyConfiguration:tokenReuseEnabled":"jwtPrivateKeyConfiguration:tokenReuseDisabled"),toggle:!0,onChange:O,checked:P,readOnly:!1,"data-componentid":"".concat(E,"-enable-toggle")})),a.createElement(u.Z,{className:"mt-2"},a.createElement(u.Z.Row,{columns:1},a.createElement(u.Z.Column,{width:10},a.createElement(g.Z,{info:!0,content:a.createElement(a.Fragment,null,a.createElement(d.Z,{name:"info circle"}),w("jwtPrivateKeyConfiguration:messageInfo"))})))))};E.defaultProps={"data-componentid":"private-key-jwt-config-edit-page"};const b=E}}]);