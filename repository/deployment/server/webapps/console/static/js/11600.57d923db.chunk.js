"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[11600],{42985:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(24184),i=n(93129),o=n(3356),l=n(90960),c=n(86727),r=n(46440),s=n(38314),u=n(44194),p=n(10479),d=n(47245),m=n(73432),f=n(89141),v=n(26154),g=n(10909),h=n(61943),A=n(24393),S=n(61763),E=n(84870),y=n(32459),T=n(84902),_=n(78537),C=n(83866),I=n(85889),P=n(6776),b=n(89608),O=n(9261);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o,l,c=[],r=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;r=!1}else for(;!(r=(a=o.call(n)).done)&&(c.push(a.value),c.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{if(!r&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw i}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var L=[{key:1,text:l.I18n.instance.t("common:name"),value:"name"},{key:2,text:l.I18n.instance.t("common:type"),value:"type"},{key:3,text:l.I18n.instance.t("common:createdOn"),value:"createdDate"},{key:4,text:l.I18n.instance.t("common:lastUpdatedOn"),value:"lastUpdated"}],U=function(e){var t,n,l,M,U=e["data-testid"],k=(0,p.$)().t,N=(0,c.fQ)().getLink,Z=(0,d.I0)(),x=(0,S.Z)().UIConfig,D=(0,d.v9)((function(e){return e.config.ui.features})),w=(0,d.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.isSAASDeployment})),j=(0,d.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t||null===(t=t.applications)||void 0===t?void 0:t.disabledFeatures})),$=R((0,u.useState)(""),2),Q=$[0],z=$[1],V=R((0,u.useState)(L[0]),2),Y=V[0],F=V[1],G=R((0,u.useState)(0),2),B=G[0],H=G[1],K=R((0,u.useState)(A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),W=K[0],q=K[1],J=R((0,u.useState)(!1),2),X=J[0],ee=J[1],te=R((0,u.useState)(!1),2),ne=te[0],ae=te[1],ie=(0,d.v9)((function(e){return e.config})),oe=(0,d.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t||null===(t=t.accountApp)||void 0===t?void 0:t.tenantQualifiedPath})),le=R((0,u.useState)(A.$x.DEFAULT_MY_ACCOUNT_STATUS),2),ce=le[0],re=le[1],se=R((0,u.useState)(void 0),2),ue=se[0],pe=(se[1],R((0,u.useState)(null),2)),de=pe[0],me=pe[1],fe=(0,T.z)(),ve=fe.isSubOrganization,ge=fe.organizationType,he=A.lD.getInstance(),Ae=(0,_.Ok)("advancedConfigurations,templateId,clientId,issuer",W,B,Q),Se=Ae.data,Ee=Ae.isLoading,ye=Ae.error,Te=Ae.mutate,_e=(0,_.az)("advancedConfigurations,templateId,clientId,issuer"),Ce=_e.data,Ie=_e.isLoading,Pe=_e.error,be=window.AppUtils.getConfig().organizationName,Oe=(0,_.pv)(!be&&(null===E.applicationConfig||void 0===E.applicationConfig||null===(t=E.applicationConfig.advancedConfigurations)||void 0===t?void 0:t.showMyAccountStatus)),Re=Oe.data,Me=Oe.isLoading,Le=Oe.error;(0,u.useEffect)((function(){if(!1===Ee&&!1===Me&&!Ie){var e=A.$x.DEFAULT_MY_ACCOUNT_STATUS;if(Re){var t=Re.value;t&&"false"===t&&(e=!1)}re(e)}}),[Ee,Me,Ie]),(0,u.useEffect)((function(){ye&&(ye.response&&ye.response.data&&ye.response.data.description?Z((0,o.V_)({description:ye.response.data.description,level:i.QU.ERROR,message:k("applications:notifications.fetchApplications.error.message")})):Z((0,o.V_)({description:k("applications:notifications.fetchApplications.genericError.description"),level:i.QU.ERROR,message:k("applications:notifications.fetchApplications.genericError.message")})))}),[ye]),(0,u.useEffect)((function(){var e;Pe&&(null!=Pe&&null!==(e=Pe.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?Z((0,o.V_)({description:Pe.response.data.description,level:i.QU.ERROR,message:k("applications:notifications.fetchMyAccountApplication.error.message")})):Z((0,o.V_)({description:k("applications:notifications.fetchMyAccountApplication.genericError.description"),level:i.QU.ERROR,message:k("applications:notifications.fetchMyAccountApplication.genericError.message")})))}),[Pe]),(0,u.useEffect)((function(){if(Le)if(Le.response&&Le.response.data&&Le.response.data.description){var e;if(404===Le.response.status)return;Z((0,o.V_)({description:null!==(e=Le.response.data.description)&&void 0!==e?e:k("applications:myaccount.fetchMyAccountStatus.error.description"),level:i.QU.ERROR,message:k("applications:myaccount.fetchMyAccountStatus.error.message")}))}else Z((0,o.V_)({description:k("applications:myaccount.fetchMyAccountStatus.genericError.description"),level:i.QU.ERROR,message:k("applications:myaccount.fetchMyAccountStatus.genericError.message")}))}),[Le]),(0,u.useEffect)((function(){if(null!=Se&&Se.applications){var e,t=(0,r.Z)(Se);null!=x&&null!==(e=x.legacyMode)&&void 0!==e&&e.applicationListSystemApps||(t.applications=t.applications.filter((function(e){return!P.jo.SYSTEM_APPS.includes(e.name)&&!P.jo.DEFAULT_APPS.includes(e.name)})),t.count=t.count-(Se.applications.length-t.applications.length),t.totalResults=t.totalResults-(Se.applications.length-t.applications.length)),me(t)}}),[Se]);var Ue,ke,Ne,Ze=function(e){z(e),H(0)};return u.createElement(c.Xg,{pageTitle:"Applications",action:ge!==y.$B.SUBORGANIZATION&&(null==de?void 0:de.totalResults)>0&&u.createElement(a.di,{when:null==D||null===(n=D.applications)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.create},u.createElement(c.KM,{onClick:function(){he.publish("application-click-new-application-button"),A.m8.push(A.$x.getPaths().get("APPLICATION_TEMPLATES"))},"data-testid":"".concat(U,"-list-layout-add-button")},u.createElement(v.Z,{name:"add"}),k("applications:list.actions.add"))),title:k("console:develop.pages.applications.title"),description:ge!==y.$B.SUBORGANIZATION?u.createElement("p",null,k("console:develop.pages.applications.subTitle"),u.createElement(c.eb,{link:N("develop.applications.learnMore")},k("common:learnMore"))):u.createElement("p",null,k("console:develop.pages.applications.alternateSubTitle"),u.createElement(c.eb,{link:N("develop.applications.learnMore")},k("common:learnMore"))),contentTopMargin:A.$x.getTenant()===A.$x.getSuperTenant(),"data-testid":"".concat(U,"-page-layout")},(w||!Ie&&0!==(null==Ce||null===(l=Ce.applications)||void 0===l?void 0:l.length))&&(!E.applicationConfig.advancedConfigurations.showMyAccount||null!=x&&null!==(ke=x.legacyMode)&&void 0!==ke&&ke.applicationListSystemApps||(0,h.Z)()&&ve()?null:u.createElement(c.pJ,{className:"mt-0 mb-5","data-componentid":"application-consumer-account-link"},u.createElement(m.Z,null,u.createElement(m.Z.Item,null,u.createElement(f.Z,{verticalAlign:"middle"},u.createElement(f.Z.Column,{floated:"left",mobile:16,computer:9},u.createElement(c.dn,{icon:(0,A.s_)().myAccountSolidIcon,className:"mt-1",floated:"left",size:"tiny",spaced:"right",verticalAlign:"middle",inline:!0,square:!0,transparent:!0}),u.createElement(m.Z.Header,{"data-componentid":"application-consumer-account-link-title",className:"my-account-title mb-1"},k("applications:myaccount.title"),(null===E.applicationConfig||void 0===E.applicationConfig||null===(Ne=E.applicationConfig.advancedConfigurations)||void 0===Ne?void 0:Ne.showMyAccountStatus)&&u.createElement(v.Z,{color:ce?"green":"grey",name:ce?"check circle":"minus circle",className:"middle aligned ml-1"})),u.createElement(m.Z.Description,{"data-componentid":"application-consumer-account-link-description"},k("applications:myaccount.description"),u.createElement(c.eb,{link:N("develop.applications.myaccount.learnMore")},k("common:learnMore")))),ce?u.createElement(c.GI,{trigger:u.createElement(f.Z.Column,{mobile:16,computer:6,className:"pr-0"},u.createElement(c.OR,{value:oe,"data-componentid":"application-consumer-account-link-copy-field"})),content:k("applications:myaccount.popup"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}):null,u.createElement(f.Z.Column,{mobile:16,computer:1},u.createElement(c.GI,{trigger:u.createElement(g.Z,{"data-componentid":"navigate-to-my-account-settings-button",icon:"setting",onClick:function(){var e,t,n;null!=j&&j.includes(P.jo.FEATURE_DICTIONARY.get("APPLICATION_MYACCOUNT_SAAS_SETTINGS"))?ue?A.m8.push({pathname:A.$x.getPaths().get("APPLICATION_EDIT").replace(":id",null==Ce||null===(e=Ce.applications[0])||void 0===e?void 0:e.id),search:"?".concat(P.jo.APP_STATE_STRONG_AUTH_PARAM_KEY,"=").concat(P.jo.APP_STATE_STRONG_AUTH_PARAM_VALUE)}):A.m8.push({pathname:A.$x.getPaths().get("APPLICATION_EDIT").replace(":id",null==Ce||null===(t=Ce.applications[0])||void 0===t?void 0:t.id),search:(null==Ce||null===(n=Ce.applications[0])||void 0===n?void 0:n.access)===O.Ch.READ?"?".concat(P.jo.APP_READ_ONLY_STATE_URL_SEARCH_PARAM_KEY,"=true"):""}):A.m8.push({pathname:A.$x.getPaths().get("MY_ACCOUNT_EDIT"),state:P.jo.APPLICATION_STATE})}}),content:k("common:settings"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}))))))),u.createElement(c.PS,{advancedSearch:u.createElement(A.nC,{onFilter:Ze,filterAttributeOptions:[{key:0,text:k("common:name"),value:"name"},{key:1,text:k("common:clientId"),value:"clientId"},{key:2,text:k("common:issuer"),value:"issuer"}],filterAttributePlaceholder:k("applications:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:k("applications:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:k("applications:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:k("applications:advancedSearch.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",predefinedDefaultSearchStrategy:"name co %search-value% or clientId co %search-value% or issuer co %search-value%",triggerClearQuery:X,"data-testid":"".concat(U,"-list-advanced-search")}),currentListSize:null==de?void 0:de.count,isLoading:Ee||Ie,listItemLimit:W,onItemsPerPageDropdownChange:function(e,t){q(t.value)},onPageChange:function(e,t){H((t.activePage-1)*W)},onSortStrategyChange:function(e,t){F((0,s.Z)(L,(function(e){return t.value===e.value})))},showPagination:!0,showTopActionPanel:Ee||Ie||!(!Q&&(null==de?void 0:de.totalResults)<=0),sortOptions:L,sortStrategy:Y,totalPages:Math.ceil((null==de?void 0:de.totalResults)/W),totalListSize:null==de?void 0:de.totalResults,paginationOptions:{disableNextButton:(Ue=de,!((null==Ue?void 0:Ue.startIndex)+(null==Ue?void 0:Ue.count)!==(null==Ue?void 0:Ue.totalResults)+1))},"data-testid":"".concat(U,"-list-layout")},u.createElement(C.d,{advancedSearch:u.createElement(A.nC,{onFilter:Ze,filterAttributeOptions:[{key:0,text:k("common:name"),value:"name"},{key:1,text:k("common:clientId"),value:"clientId"},{key:2,text:k("common:issuer"),value:"issuer"}],filterAttributePlaceholder:k("applications:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:k("applications:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:k("applications:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:k("applications:advancedSearch.placeholder"),style:{minWidth:"425px"},defaultSearchAttribute:"name",defaultSearchOperator:"co",predefinedDefaultSearchStrategy:"name co %search-value% or clientId co %search-value% or issuer co %search-value%",triggerClearQuery:X,"data-testid":"".concat(U,"-list-advanced-search")}),featureConfig:D,isSetStrongerAuth:ue,isLoading:Ee||Ie,list:de,onApplicationDelete:function(){Te()},onEmptyListPlaceholderActionClick:function(){A.m8.push(A.$x.getPaths().get("APPLICATION_TEMPLATES"))},onSearchQueryClear:function(){z(""),ee(!X)},searchQuery:Q,"data-testid":"".concat(U,"-list"),"data-componentid":"application"})),ne&&u.createElement(I.y,{title:null==b?void 0:b.name,subTitle:null==b?void 0:b.description,closeWizard:function(){return ae(!1)},template:b,showHelpPanel:!0,subTemplates:null==b?void 0:b.subTemplates,subTemplatesSectionTitle:null==b?void 0:b.subTemplatesSectionTitle,addProtocol:!1,templateLoadingStrategy:null!==(M=ie.ui.applicationTemplateLoadingStrategy)&&void 0!==M?M:P.jo.DEFAULT_APP_TEMPLATE_LOADING_STRATEGY}))};U.defaultProps={"data-testid":"applications"};const k=U},12735:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(20803),i=n(3148),o=n(2748),l=n(93092),c=n(45408),r=n(7683);const s=(0,l.Z)((function(e,t){var n=(0,r.Z)(t);return(0,c.Z)(n)&&(n=void 0),(0,c.Z)(e)?(0,a.Z)(e,(0,i.Z)(t,1,c.Z,!0),(0,o.Z)(n,2)):[]}))}}]);