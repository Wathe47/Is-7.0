"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[78790,68141,96788,1786,49009,61793,51978,98258],{68141:(e,t,n)=>{n.r(t),n.d(t,{updateOrganizationConfig:()=>i.updateOrganizationConfig,useOrganizationConfig:()=>i.useOrganizationConfig});var i=n(96788)},96788:(e,t,n)=>{n.r(t),n.d(t,{updateOrganizationConfig:()=>u,useOrganizationConfig:()=>l});var i=n(34148),r=n(93129),o=n(73508),a=n(61263),s=i.AsgardeoSPAClient.getInstance().httpRequest.bind(i.AsgardeoSPAClient.getInstance()),l=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i={headers:{"Content-Type":"application/json"},method:r.f2.GET,url:a.h.getState().config.endpoints.organizationEndpoint.replace("{organization}",e)},s=(0,o.Z)(n?i:null,t),l=s.data,u=s.error;return{data:l,error:u,isLoading:!u&&!l,isValidating:s.isValidating,mutate:s.mutate}},u=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":a.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.PATCH,url:a.h.getState().config.endpoints.organizationPatchEndpoint};return s(t).then((function(e){return Promise.resolve(e.data)})).catch((function(e){return Promise.reject(e)}))}},1786:(e,t,n)=>{n.r(t),n.d(t,{AllUsersList:()=>i.AllUsersList,EditGuestUser:()=>r.EditGuestUser,GuestUsersList:()=>r.GuestUsersList,OnboardedGuestUsersList:()=>r.OnboardedGuestUsersList,UserRolesList:()=>r.UserRolesList});var i=n(48585),r=n(72109)},78790:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var i=n(24184),r=n(54833),o=n(93129),a=n(3356),s=n(86727),l=n(46440),u=n(67127),c=n(44194),d=n(10479),f=n(47245),m=n(89141),v=n(26154),p=n(10909),g=n(33040),E=n(66651),A=n(24393),h=n(31804),C=n(39594),R=n(45770),S=n(40518),T=n(32514),y=n(62207),b=n(18867),I=n(117),P=n(31659),L=n(97474),U=n(40231),N=n(67858),O=n(61145),_=n(94854),D=n(45168),w=n(61793),M=n(68141),X=n(1786),x=n(17507),k=n(11765);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},G.apply(this,arguments)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){var i;return i=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=j(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==j(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var W=function(e){return e[e.EXTERNAL_ADMINS=0]="EXTERNAL_ADMINS",e[e.INTERNAL_ADMINS=1]="INTERNAL_ADMINS",e}(W||{}),H=function(e){var t,n,j=e.location,Q=e["data-componentid"],z=new URLSearchParams(j.search),Z=(0,d.$)().t,H=(0,f.I0)(),B=(0,s.fQ)().getLink,K=(0,i.Ac)(_.FeatureGateConstants.SAAS_FEATURES_IDENTIFIER),q=(0,E.Z)().legacyAuthzRuntime,Y=q?M.useOrganizationConfig:h.c,$=(0,f.v9)((function(e){return e.config.ui.features})),J=(0,f.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),ee=(0,f.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t?void 0:t.clientHost})),te=(0,f.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.username})),ne=(0,f.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t?void 0:t.tenant})),ie=(0,f.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.tenants})),re=F((0,c.useState)(void 0),2),oe=re[0],ae=re[1],se=F((0,c.useState)(""),2),le=se[0],ue=se[1],ce=F((0,c.useState)(""),2),de=ce[0],fe=ce[1],me=F((0,c.useState)(0),2),ve=me[0],pe=me[1],ge=F((0,c.useState)(A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),Ee=ge[0],Ae=ge[1],he=F((0,c.useState)(!1),2),Ce=he[0],Re=he[1],Se=F((0,c.useState)(!1),2),Te=Se[0],ye=Se[1],be=F((0,c.useState)([]),1)[0],Ie=F((0,c.useState)(I.XC.ACCEPTED),2),Pe=Ie[0],Le=Ie[1],Ue=F((0,c.useState)(!1),2),Ne=Ue[0],Oe=Ue[1],_e=F((0,c.useState)([]),2),De=_e[0],we=_e[1],Me=F((0,c.useState)([]),2),Xe=Me[0],xe=Me[1],ke=F((0,c.useState)([]),2),je=ke[0],Ge=ke[1],Qe=F((0,c.useState)([]),2),Ve=Qe[0],ze=Qe[1],Fe=F((0,c.useState)(!1),2),Ze=Fe[0],We=Fe[1],He=F((0,c.useState)(!0),2),Be=He[0],Ke=He[1],qe=F((0,c.useState)(x.AdminAccountTypes.INTERNAL),2),Ye=qe[0],$e=qe[1],Je=F((0,c.useState)(U.XS),2),et=Je[0],tt=Je[1],nt=F((0,c.useState)(null),2),it=nt[0],rt=nt[1],ot=F((0,c.useState)(!1),2),at=ot[0],st=ot[1],lt=F((0,c.useState)(!1),2),ut=lt[0],ct=lt[1],dt=F((0,c.useState)(!1),2),ft=dt[0],mt=dt[1],vt=F((0,c.useState)(!1),2),pt=vt[0],gt=vt[1],Et=F((0,c.useState)(!1),2),At=Et[0],ht=Et[1],Ct=F((0,c.useState)(!1),2),Rt=Ct[0],St=Ct[1],Tt=F((0,c.useState)(!1),2),yt=Tt[0],bt=Tt[1],It=F((0,c.useState)(!1),2),Pt=It[0],Lt=It[1],Ut=F((0,c.useState)(!1),2),Nt=Ut[0],Ot=Ut[1],_t=F((0,c.useState)(W.EXTERNAL_ADMINS),2),Dt=_t[0],wt=_t[1],Mt=F((0,c.useState)([]),2),Xt=Mt[0],xt=Mt[1],kt=F((0,c.useState)(""),2),jt=kt[0],Gt=kt[1],Qt=F((0,c.useState)(""),2),Vt=Qt[0],zt=Qt[1],Ft=F((0,c.useState)({}),2),Zt=Ft[0],Wt=Ft[1],Ht=F((0,c.useState)({Resources:[],itemsPerPage:A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:0}),2),Bt=Ht[0],Kt=Ht[1],qt=F((0,c.useState)({Resources:[],itemsPerPage:A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:0}),2),Yt=qt[0],$t=qt[1],Jt=A.h.getState().auth.tenantDomain,en=A.lD.getInstance(),tn=Ee+1,nn=b._F.GROUPS_ATTRIBUTE,rn=Y(Jt,{revalidateIfStale:!0},K===i.iK.ENABLED),on=rn.data,an=rn.isLoading,sn=rn.isValidating,ln=rn.error,un=(0,T.WW)(tn,ve+1,""===le?null:le,null,U.pH,nn,!N.administratorConfig.enableAdminInvite||Pe===I.XC.ACCEPTED),cn=un.data,dn=un.isLoading,fn=un.error,mn=un.mutate,vn=(0,T.J7)(N.administratorConfig.enableAdminInvite),pn=vn.data,gn=vn.isLoading,En=vn.error,An=vn.mutate,hn=(0,S.yA)(),Cn=hn.data,Rn=hn.error;(0,c.useEffect)((function(){return wn(),Tn(),yn(),zt((0,D.getAssociationType)(ie,ne)),I.XC.ACCEPTED.toUpperCase()===Pe.toUpperCase()&&(Pn&&0!=Pn.totalResults||((null==pn?void 0:pn.filter((function(e){return e.status===I.XC.PENDING.toUpperCase()})).length)>0?(Le(I.XC.PENDING),Oe(!0)):(null==pn?void 0:pn.filter((function(e){return e.status===I.XC.EXPIRED.toUpperCase()})).length)>0&&(Le(I.XC.EXPIRED),Oe(!0)))),function(){Le(I.XC.ACCEPTED),Oe(!0)}}),[]),(0,c.useEffect)((function(){ct(null==on?void 0:on.isEnterpriseLoginEnabled)}),[an,sn]),(0,c.useEffect)((function(){var e,t,n,i,r,s,l;fn&&(null!=fn&&null!==(e=fn.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?H((0,a.V_)({description:null!==(t=null!==(n=null==fn||null===(i=fn.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.description)&&void 0!==n?n:null==fn||null===(r=fn.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==t?t:Z("users:notifications.fetchUsers.error.description"),level:o.QU.ERROR,message:null!==(s=null==fn||null===(l=fn.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==s?s:Z("users:notifications.fetchUsers.error.message")})):H((0,a.V_)({description:Z("users:notifications.fetchUsers.genericError.description"),level:o.QU.ERROR,message:Z("users:notifications.fetchUsers.genericError.message")})))}),[fn]),(0,c.useEffect)((function(){var e,t,n,i,r,s,l;En&&(null!=En&&null!==(e=En.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?H((0,a.V_)({description:null!==(t=null!==(n=null==En||null===(i=En.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.description)&&void 0!==n?n:null==En||null===(r=En.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==t?t:Z("users:notifications.fetchUsers.error.description"),level:o.QU.ERROR,message:null!==(s=null==En||null===(l=En.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==s?s:Z("users:notifications.fetchUsers.error.message")})):H((0,a.V_)({description:Z("users:notifications.fetchUsers.genericError.description"),level:o.QU.ERROR,message:Z("users:notifications.fetchUsers.genericError.message")})))}),[En]),(0,c.useEffect)((function(){var e,t,n,i,r,s,l;Rn&&(null!=Rn&&null!==(e=Rn.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?H((0,a.V_)({description:null!==(t=null!==(n=null==Rn||null===(i=Rn.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.description)&&void 0!==n?n:null==Rn||null===(r=Rn.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==t?t:Z("users:notifications.fetchUsers.error.description"),level:o.QU.ERROR,message:null!==(s=null==Rn||null===(l=Rn.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==s?s:Z("users:notifications.fetchUsers.error.message")})):H((0,a.V_)({description:Z("users:notifications.fetchUsers.genericError.description"),level:o.QU.ERROR,message:Z("users:notifications.fetchUsers.genericError.message")})))}),[Rn]),(0,c.useEffect)((function(){var e,t,n,i,r,s,l;ln&&(null!=ln&&null!==(e=ln.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?H((0,a.V_)({description:null!==(t=null!==(n=null==ln||null===(i=ln.response)||void 0===i||null===(i=i.data)||void 0===i?void 0:i.description)&&void 0!==n?n:null==ln||null===(r=ln.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.detail)&&void 0!==t?t:Z("extensions:manage.users.administratorSettings.error.description"),level:o.QU.ERROR,message:null!==(s=null==ln||null===(l=ln.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.message)&&void 0!==s?s:Z("extensions:manage.users.administratorSettings.error.message")})):H((0,a.V_)({description:Z("extensions:manage.users.administratorSettings.genericError.description"),level:o.QU.ERROR,message:Z("extensions:manage.users.administratorSettings.genericError.message")})))}),[ln]),(0,c.useEffect)((function(){if(Pe!==I.XC.ACCEPTED){if(pe(0),"email co "===le||""===le||null===le)return we(pn),void Ge([]);if(le){var e=pn;if(je.length>0&&(e=je),le.includes("email sw ")){var t=le.split("sw ")[1];e=e.filter((function(e){return e.email.startsWith(t)}))}else if(le.includes("email ew ")){var n=le.split("ew ")[1];e=e.filter((function(e){return e.email.endsWith(n)}))}else if(le.includes("email eq ")){var i=le.split("eq ")[1];e=e.filter((function(e){return e.email===i}))}else if(le.includes("email co ")){var r=le.split("co ")[1];e=e.filter((function(e){return e.email.includes(r)}))}we(e),Ge(e)}}}),[le]),(0,c.useEffect)((function(){if(Pe!==I.XC.ACCEPTED){var e=null==De?void 0:De.filter((function(e){return e.status===Pe.toUpperCase()}));e.length>Ee?(e=e.slice(ve,ve+Ee),xe(e),We(e.length===Ee)):(xe(e),We(!1))}}),[De,ve,Ee,Ne]),(0,c.useEffect)((function(){we(pn)}),[pn]),(0,c.useEffect)((function(){Ne&&(pe(0),Ae(A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),On(),Oe(!1))}),[Ne]),(0,c.useEffect)((function(){z.get(x.AdministratorConstants.USER_CREATE_WIZARD_TRIGGER_URL_SEARCH_PARAM_KEY)&&(en.publish("manage-users-click-create-new",{type:"collaborator"}),ye(!0))}),[z.get(x.AdministratorConstants.USER_CREATE_WIZARD_TRIGGER_URL_SEARCH_PARAM_KEY)]),(0,c.useEffect)((function(){Dt===W.INTERNAL_ADMINS&&Mn()}),[Dt,jt,at]),(0,c.useEffect)((function(){bn()}),[it]),(0,c.useEffect)((function(){var e,t,n,i,r=V({},Zt);(et!==U.XS&&(r=V({},Bt)),(0,u.Z)(de))||(r.Resources=null===(i=r)||void 0===i?void 0:i.Resources.filter((function(e){var t;return-1!==(null==e||null===(t=e.display)||void 0===t?void 0:t.split("/")[1]).indexOf(de)})));var o=null===(e=r)||void 0===e||null===(e=e.Resources)||void 0===e?void 0:e.slice(ve,ve+Ee);Dt!==W.EXTERNAL_ADMINS&&(0,u.Z)(o)&&pe(0),Lt((null===(t=r)||void 0===t||null===(t=t.Resources)||void 0===t?void 0:t.length)>ve+Ee),$t({Resources:o,itemsPerPage:Ee,startIndex:ve,totalResults:null===(n=r)||void 0===n||null===(n=n.Resources)||void 0===n?void 0:n.length}),St(!1)}),[Zt,Bt,ve,Ee,et,de]);var Sn=function(e){var t;if(e){var n=(0,l.Z)(e),i=[],r=function(e){var t;return(null===(t=e[O.SCIMConfigs.scim.enterpriseSchema])||void 0===t?void 0:t.userAccountType)===x.UserAccountTypes.OWNER};n.Resources=null==n||null===(t=n.Resources)||void 0===t?void 0:t.map((function(e){if(!(null==(t=e)||null===(n=t.roles)||void 0===n?void 0:n.some((function(e){return e.display===N.administratorConfig.adminRoleName}))))return null;var t,n;if(r(e)&&P.QH.isAuthenticatedUser(te,null==e?void 0:e.userName))return i[0]=e,null;if(P.QH.isAuthenticatedUser(te,null==e?void 0:e.userName))return i[0]=e,null;if(r(e))return i[1]=e,null;var o=null;if((null==e?void 0:e.emails)instanceof Array){var a=null==e?void 0:e.emails[0];o="string"==typeof a?a:null==a?void 0:a.value}return e.emails=[o],e}));return n.Resources=i.concat(n.Resources).filter((function(e){return null!=e})),function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e;(null===(n=o.Resources)||void 0===n?void 0:n.length)===t?(null===(i=o.Resources)||void 0===i||i.splice(-1,r),ae(!0)):ae(!1);return o}(n,tn,1)}},Tn=function(){mt(!0),(0,L.GN)({requiredAttributes:U.u4.USER_STORE_PROPERTY_READ_ONLY}).then((function(e){var t=[],n=null==e?void 0:e.filter((function(e){return e.enabled})).map((function(e,n){return e.typeName===x.AdministratorConstants.READONLY_USERSTORE_TYPE_NAME&&(t.push(e.name.toUpperCase()),rt(e.id)),{key:n,text:e.name.toUpperCase(),value:e.name.toUpperCase()}}));Ot(!1),xt(n),ze(t),gt(n.length<=1)})).catch((function(e){var t,n,i,r,s,l,u;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?H((0,a.V_)({description:null!==(n=null!==(i=null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.description)&&void 0!==i?i:null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.detail)&&void 0!==n?n:Z("userstores:notifications.fetchUserstores.genericError.description"),level:o.QU.ERROR,message:null!==(l=null==e||null===(u=e.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message)&&void 0!==l?l:Z("userstores:notifications.fetchUserstores.genericError.message")})):(H((0,a.V_)({description:Z("userstores:notifications.fetchUserstores.genericError.description"),level:o.QU.ERROR,message:Z("userstores:notifications.fetchUserstores.genericError.message")})),Ot(!0))})).finally((function(){mt(!1)}))},yn=function(){var e={filter:"displayName eq "+N.administratorConfig.adminRoleName,schemas:["urn:ietf:params:scim:api:messages:2.0:SearchRequest"],startIndex:0};(0,C.QW)(e).then((function(e){var t;if((null==e||null===(t=e.data)||void 0===t?void 0:t.Resources.length)>0){var n,i,r=null==e||null===(n=e.data)||void 0===n||null===(n=n.Resources[0])||void 0===n?void 0:n.id;if(!q&&(null==e||null===(i=e.data)||void 0===i||null===(i=i.Resources)||void 0===i?void 0:i.length)>1){var o,a,s=null==e||null===(o=e.data)||void 0===o||null===(o=o.Resources)||void 0===o?void 0:o.filter((function(e){var t;return(null==e||null===(t=e.audience)||void 0===t?void 0:t.type)===R.cv.APPLICATION}));if((null==s?void 0:s.length)>0)r=null===(a=s[0])||void 0===a?void 0:a.id}Gt(r)}})).catch((function(e){e.response&&e.response.data&&e.response.data.description?H((0,a.V_)({description:e.response.data.description,level:o.QU.ERROR,message:Z("users:notifications.getAdminRole.error.message")})):H((0,a.V_)({description:Z("users:notifications.getAdminRole.genericError.description"),level:o.QU.ERROR,message:Z("users:notifications.getAdminRole.genericError.message")}))}))},bn=function(){(0,u.Z)(it)||(0,w.getAgentConnections)(it).then((function(e){e.forEach((function(e){e.connected&&st(!0)}))})).catch((function(e){H((0,a.V_)({description:(null==e?void 0:e.description)||Z("userstores:notifications.fetchUserstores.genericError.description"),level:o.QU.ERROR,message:(null==e?void 0:e.message)||Z("userstores:notifications.fetchUserstores.genericError.message")}))}))},In=function(e,t){tt(t.value),ht(null==Ve?void 0:Ve.includes(t.value.toString().toUpperCase())),pe(0),Ae(A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),St(!0)},Pn=(0,c.useMemo)((function(){return Sn(cn)}),[cn]),Ln=function(e,t){pe((t.activePage-1)*Ee)},Un=function(e,t){Ae(t.value)},Nn=[{key:1,text:"Accepted",value:"Accepted"},{key:2,text:"Pending",value:"Pending"},{key:3,text:"Expired",value:"Expired"}],On=function(){Re(!Ce),ue(""),fe("")},_n=function(e){if(Dt!==W.INTERNAL_ADMINS){if(ue(e),Pe===I.XC.ACCEPTED){if("userName sw "===e)return void ue(null);ue(e)}}else fe(null==e?void 0:e.trim())},Dn=function(e,t){Le(t.value),Oe(!0)},wn=function(){var e=$.users.disabledFeatures;Ke(null==e?void 0:e.includes(x.ADVANCED_USER_MGT))},Mn=function(){var e=[],t=[];bt(!0),(0,u.Z)(jt)||(Wt({Resources:[],itemsPerPage:A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:0}),Kt({Resources:[],itemsPerPage:A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:0}),(0,C.xQ)(jt).then((function(n){var i;(null==n||null===(i=n.data)||void 0===i?void 0:i.users).forEach((function(n){var i=n.display.split("/");i.length>1&&(i[0]===U.XS?e.push(n):t.push(n))})),Wt({Resources:e,itemsPerPage:A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:e.length}),at&&Kt({Resources:t,itemsPerPage:A.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT,startIndex:0,totalResults:t.length}),bt(!0)})).catch((function(e){var t,n,i,r,s,l,u;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?H((0,a.V_)({description:null!==(n=null!==(i=null==e||null===(r=e.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.description)&&void 0!==i?i:null==e||null===(s=e.response)||void 0===s||null===(s=s.data)||void 0===s?void 0:s.detail)&&void 0!==n?n:Z("users:notifications.fetchUsers.error.description"),level:o.QU.ERROR,message:null!==(l=null==e||null===(u=e.response)||void 0===u||null===(u=u.data)||void 0===u?void 0:u.message)&&void 0!==l?l:Z("users:notifications.fetchUsers.error.message")})):H((0,a.V_)({description:Z("users:notifications.fetchUsers.genericError.description"),level:o.QU.ERROR,message:Z("users:notifications.fetchUsers.genericError.message")}))})).finally((function(){bt(!1)})))},Xn=c.createElement(c.Fragment,null,c.createElement(s.KM,{"data-componentid":"".concat(Q,"-add-admin-button"),onClick:function(){en.publish("admins-click-add-new-button")},className:"tablet or lower hidden"},c.createElement(v.Z,{name:"add"}),Z("extensions:manage.users.buttons.addCollaboratorBtn"),c.createElement(v.Z,{name:"dropdown",className:"ml-3 mr-0"})),c.createElement(p.Z,{"data-componentid":"".concat(Q,"-add-admin-button"),icon:"add",onClick:function(){en.publish("admins-click-add-new-button")},className:"mobile only tablet only",primary:!0})),xn=[{"data-componentid":"admins-add-external-admin",key:1,text:"Invite admins to Asgardeo",value:x.AdminAccountTypes.EXTERNAL},{"data-componentid":"admins-add-internal-admin",key:2,text:"Assign admins from users",value:x.AdminAccountTypes.INTERNAL}];(0,r.Xr)(null==$?void 0:$.guestUser,null==$||null===(t=$.guestUser)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create,J)&&xn.push();var kn,jn=function(e,t){Le(I.XC.ACCEPTED),wt(t.activeIndex),On()},Gn=function(){var e;return c.createElement(s.PS,{className:"mt-5",advancedSearch:c.createElement(A.nC,{onFilter:_n,filterAttributeOptions:Pe===I.XC.ACCEPTED?[{key:0,text:Z("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:Z("users:advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"},{key:2,text:"First Name",value:"name.givenName"},{key:3,text:"Last Name",value:"name.familyName"}]:[{key:0,text:Z("users:advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"email"}],filterAttributePlaceholder:Z("users:advancedSearch.form.inputs.filterAttribute. placeholder"),filterConditionsPlaceholder:Z("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:Z("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:Z("users:advancedSearch.placeholder"),defaultSearchAttribute:Pe===I.XC.ACCEPTED?"userName":"email",defaultSearchOperator:"co",triggerClearQuery:Ce}),currentListSize:Pe===I.XC.ACCEPTED?null==Pn||null===(e=Pn.Resources)||void 0===e?void 0:e.length:null==Xe?void 0:Xe.length,listItemLimit:Ee,onItemsPerPageDropdownChange:Un,"data-componentid":"".concat(Q,"-list-layout"),onPageChange:Ln,showPagination:!0,showTopActionPanel:!0,showPaginationPageLimit:!At,totalPages:Pe===I.XC.ACCEPTED?Math.ceil((null==Pn?void 0:Pn.totalResults)/Ee):Math.ceil((null==De?void 0:De.length)/Ee),totalListSize:Pe===I.XC.ACCEPTED?null==Pn?void 0:Pn.totalResults:null==De?void 0:De.length,isLoading:Pe===I.XC.ACCEPTED&&dn||N.administratorConfig.enableAdminInvite&&gn,onSearchQueryClear:On,resetPagination:Ne,paginationOptions:{disableNextButton:Pe===I.XC.ACCEPTED?!oe:!Ze},disableRightActionPanel:!0,leftActionPanel:N.administratorConfig.enableAdminInvite&&c.createElement(g.Z,{"data-componentid":"".concat(Q,"-list-userstore-dropdown"),selection:!0,options:Nn&&Nn,onChange:Dn,text:"Filter by: ".concat(Pe),disabled:Pe===I.XC.ACCEPTED&&dn||N.administratorConfig.enableAdminInvite&&gn})},Pe===I.XC.ACCEPTED&&c.createElement(X.OnboardedGuestUsersList,{advancedSearch:c.createElement(A.nC,{onFilter:_n,filterAttributeOptions:[{key:0,text:Z("users:advancedSearch.form.dropdown.filterAttributeOptions.username"),value:"userName"},{key:1,text:Z("users:advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],filterAttributePlaceholder:Z("users:advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:Z("users:advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:Z("users:advancedSearch.form.inputs.filterValue.placeholder"),placeholder:Z("users:advancedSearch.placeholder"),defaultSearchAttribute:"userName",defaultSearchOperator:"co",triggerClearQuery:Ce}),onboardedGuestUsersList:Pn,userMetaListContent:null,realmConfigs:null==Cn?void 0:Cn.realmConfig,onEmptyListPlaceholderActionClick:function(){return ye(!0)},onSearchQueryClear:On,searchQuery:le,"data-componentid":"".concat(Q,"-list"),readOnlyUserStores:null,featureConfig:$,onUserDelete:function(){mn()},adminType:x.AdminAccountTypes.EXTERNAL,adminRoleId:jt}),Pe===I.XC.PENDING&&c.createElement(X.GuestUsersList,{invitationStatusOption:Pe,onEmptyListPlaceholderActionClick:function(){return ye(!0)},onboardedGuestUserList:Pn,onSearchQueryClear:On,guestUsersList:Xe,getGuestUsersList:function(){return An()},searchQuery:le}),Pe===I.XC.EXPIRED&&c.createElement(X.GuestUsersList,{invitationStatusOption:Pe,onEmptyListPlaceholderActionClick:function(){return ye(!0)},onboardedGuestUserList:Pn,onSearchQueryClear:On,guestUsersList:null==Xe?void 0:Xe.filter((function(e){return e.status===I.XC.EXPIRED.toUpperCase()})),getGuestUsersList:function(){return An()},searchQuery:le}))},Qn=function(){var e;return c.createElement(s.PS,{className:"mt-5",advancedSearch:c.createElement(A.nC,{disableSearchFilterDropdown:!0,onFilter:_n,filterAttributeOptions:[{key:0,text:Z("users:advancedSearch.form.dropdown.filterAttributeOptions.email"),value:"emails"}],placeholder:Z("users:advancedSearch.placeholder"),defaultSearchAttribute:"",defaultSearchOperator:"",triggerClearQuery:Ce}),currentListSize:null==Yt||null===(e=Yt.Resources)||void 0===e?void 0:e.length,listItemLimit:Ee,onItemsPerPageDropdownChange:Un,"data-componentid":"".concat(Q,"-list-layout"),onPageChange:Ln,showPagination:!0,showTopActionPanel:!0,showPaginationPageLimit:!At,totalPages:Math.ceil((null==Yt?void 0:Yt.totalResults)/Ee),totalListSize:null==Yt?void 0:Yt.totalResults,isLoading:yt,onSearchQueryClear:On,resetPagination:Rt,paginationOptions:{disableNextButton:!Pt},leftActionPanel:pt?null:c.createElement(g.Z,{"data-componentid":"".concat(Q,"-userstore-dropdown"),selection:!0,options:Xt,onChange:In,text:et,loading:ft,disabled:Nt})},c.createElement(X.OnboardedGuestUsersList,{onboardedGuestUsersList:Yt,userMetaListContent:null,realmConfigs:null==Cn?void 0:Cn.realmConfig,onEmptyListPlaceholderActionClick:function(){return ye(!0)},onSearchQueryClear:On,searchQuery:de,"data-componentid":"".concat(Q,"-list"),readOnlyUserStores:null,featureConfig:$,onUserDelete:function(){Mn()},adminType:x.AdminAccountTypes.INTERNAL,adminRoleId:jt,associationType:Vt}))},Vn=function(){return N.administratorConfig.enableAdminInvite&&gn||K===i.iK.ENABLED&&(sn||an)};return c.createElement(s.Xg,{pageTitle:"Administrators",action:K===i.iK.ENABLED&&an?c.createElement("div",null):c.createElement(i.di,{when:null==$||null===(n=$.users)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.create},K===i.iK.ENABLED&&!Be&&c.createElement(p.Z,{"data-componentid":"".concat(Q,"-admin-settings-button"),icon:"setting",onClick:function(){A.m8.push(x.AdministratorConstants.getPaths().get("COLLABORATOR_SETTINGS_EDIT_PATH"))}}),ut&&!Be?c.createElement(g.Z,{loading:Vn(),disabled:Vn(),"data-componentid":"".concat(Q,"-add-admin-dropdown"),direction:"left",floating:!0,icon:null,trigger:Xn},c.createElement(g.Z.Menu,null,xn.map((function(e){return c.createElement(g.Z.Item,G({key:e.value,onClick:function(){return t=e.value,void(Be||t!==x.AdminAccountTypes.INTERNAL?t===x.AdminAccountTypes.EXTERNAL&&(en.publish("admins-click-create-new",{type:"external admin"}),$e(x.AdminAccountTypes.EXTERNAL),ye(!0)):(en.publish("admins-click-create-new",{type:"internal admin"}),$e(x.AdminAccountTypes.INTERNAL),ye(!0)));var t}},e,{disabled:!ut}))})))):c.createElement(c.Fragment,null,c.createElement(s.KM,{loading:Vn(),disabled:Vn(),"data-componentid":"".concat(Q,"-add-admin-button"),onClick:function(){en.publish("admins-click-add-new-button"),$e(x.AdminAccountTypes.EXTERNAL),ye(!0)},className:"tablet or lower hidden"},c.createElement(v.Z,{name:"add"}),Z("extensions:manage.users.buttons.addCollaboratorBtn")),c.createElement(p.Z,{loading:Vn(),disabled:Vn(),"data-componentid":"".concat(Q,"-add-admin-button"),icon:"add",onClick:function(){en.publish("admins-click-add-new-button"),$e(x.AdminAccountTypes.EXTERNAL),ye(!0)},className:"mobile only tablet only",primary:!0}))),title:Z("extensions:manage.users.collaboratorsTitle"),description:c.createElement(c.Fragment,null,Z("extensions:manage.users.collaboratorsSubTitle"),c.createElement(s.eb,{link:B("manage.users.collaboratorAccounts.learnMore")},Z("extensions:common.learnMore"))),contentTopMargin:!1,"data-componentid":"".concat(Q,"-page-layout"),actionColumnWidth:8,headingColumnWidth:8},c.createElement(s.pJ,{className:"mt-0 mb-5"},c.createElement(m.Z,{verticalAlign:"middle"},c.createElement(m.Z.Column,{floated:"left",width:9},c.createElement(s.xv,{className:"message-info-text"},c.createElement("p",null," ",Z("extensions:manage.users.collaboratorAccounts.consoleInfo")," "))),c.createElement(m.Z.Column,{floated:"right",width:6},c.createElement(s.OR,{value:ee,"data-componentid":"".concat(Q,"-tenanted-console-link")})))),ut&&!Be?c.createElement(s.M$,{activeIndex:Dt,"data-testid":"".concat(Q,"-administrator-tabs"),defaultActiveIndex:0,onTabChange:jn,panes:(kn=[],kn.push({componentId:"external-admins",menuItem:{content:"Asgardeo"},render:Gn}),kn.push({componentId:"internal-admins",menuItem:{content:ne+" organization"},render:Qn}),kn)}):Gn(),Te?N.administratorConfig.enableAdminInvite?c.createElement(k.AddAdministratorWizard,{"data-componentid":"".concat(Q,"-add-admin-wizard-modal"),closeWizard:function(){ye(!1)},updateList:function(){return An()},rolesList:be,emailVerificationEnabled:!0,onInvitationSendSuccessful:function(){An(),en.publish("manage-users-finish-creating-collaborator-user"),Ye===x.AdminAccountTypes.EXTERNAL&&(Le(I.XC.PENDING),wt(W.EXTERNAL_ADMINS)),Ye===x.AdminAccountTypes.INTERNAL&&(Le(I.XC.ACCEPTED),wt(W.INTERNAL_ADMINS)),Oe(!0)},adminTypeSelection:Ye,onUserUpdate:function(){Ye===x.AdminAccountTypes.EXTERNAL&&(wt(W.EXTERNAL_ADMINS),mn()),Ye===x.AdminAccountTypes.INTERNAL&&(Le(I.XC.ACCEPTED),wt(W.INTERNAL_ADMINS),Mn())}}):c.createElement(y.G,{"data-componentid":"".concat(Q,"-add-admin-wizard-modal"),closeWizard:function(){ye(!1)},listOffset:ve,listItemLimit:Ee,updateList:function(){return An()},rolesList:be,emailVerificationEnabled:!1,isAdminUser:!0,defaultUserTypeSelection:x.UserAccountTypes.ADMINISTRATOR,onSuccessfulUserAddition:function(){return null}}):null)};H.defaultProps={"data-componentid":"asgardeo-administrators"};const B=H},11765:(e,t,n)=>{n.r(t),n.d(t,{AddAdministratorWizard:()=>i.AddAdministratorWizard,WizardStepsFormTypes:()=>i.WizardStepsFormTypes});var i=n(7917)},61793:(e,t,n)=>{n.r(t),n.d(t,{disconnectAgentConnection:()=>i.disconnectAgentConnection,generateToken:()=>i.generateToken,getAgentConnections:()=>i.getAgentConnections,regenerateToken:()=>i.regenerateToken});var i=n(51978)},51978:(e,t,n)=>{n.r(t),n.d(t,{disconnectAgentConnection:()=>u,generateToken:()=>c,getAgentConnections:()=>l,regenerateToken:()=>d});var i=n(34148),r=n(93129),o=n(24393),a="Resource not found.",s=i.AsgardeoSPAClient.getInstance().httpRequest.bind(i.AsgardeoSPAClient.getInstance()),l=function(e){var t={headers:{Accept:"application/json","Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.GET,url:"".concat(o.h.getState().config.endpoints.userStoreAgentConnection,"/").concat(e)};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n;if((null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)!==a)return Promise.reject(null==e||null===(n=e.response)||void 0===n?void 0:n.data)}))},u=function(e,t){var n={headers:{Accept:"application/json","Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.DELETE,url:"".concat(o.h.getState().config.endpoints.userStoreAgentConnection,"/").concat(e,"/agent/").concat(t)};return s(n).then((function(e){return 204!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n;if((null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)!==a)return Promise.reject(null==e||null===(n=e.response)||void 0===n?void 0:n.data)}))},c=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.POST,url:"".concat(o.h.getState().config.endpoints.userStoreAgentToken)};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n;if((null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)!==a)return Promise.reject(null==e||null===(n=e.response)||void 0===n?void 0:n.data)}))},d=function(e){var t={data:e,headers:{Accept:"application/json","Access-Control-Allow-Origin":o.h.getState().config.deployment.clientHost,"Content-Type":"application/json"},method:r.f2.POST,url:"".concat(o.h.getState().config.endpoints.userStoreAgentToken,"/regenerate")};return s(t).then((function(e){return 200!==e.status?Promise.reject("An error occurred. The server returned ".concat(e.status)):Promise.resolve(e.data)})).catch((function(e){var t,n;if((null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)!==a)return Promise.reject(null==e||null===(n=e.response)||void 0===n?void 0:n.data)}))}},31804:(e,t,n)=>{n.d(t,{c:()=>a});var i=n(93129),r=n(73508),o=n(61263),a=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a={headers:{"Content-Type":"application/json"},method:i.f2.GET,url:o.h.getState().config.endpoints.organizationEndpointV2.replace("{organization}",e)},s=(0,r.Z)(n?a:null,t),l=s.data,u=s.error;return{data:l,error:u,isLoading:!u&&!l,isValidating:s.isValidating,mutate:s.mutate}}}}]);