"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[16376,55610,31005,78267],{55610:(e,r,t)=>{t.r(r),t.d(r,{RolePermissionDetails:()=>u});var n=t(93129),o=t(3356),i=t(44194),s=t(10479),a=t(47245),l=t(12742),c=t(78267),u=function(e){var r=(0,s.$)().t,t=(0,a.I0)(),u=e.isReadOnly,f=e.roleObject,m=e.onRoleUpdate,d=e.isGroup;return i.createElement("div",{className:"permissions-edit-container"},i.createElement(c.PermissionList,{isReadOnly:u,isEdit:!u,isRole:!0,onSubmit:function(e){var i={Operations:[{op:"replace",path:"permissions",value:e.map((function(e){return e.key}))}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};(0,l.ul)(f.id,i).then((function(){t((0,o.V_)({description:r(d?"console:manage.features.groups.notifications.updateGroup.success.description":"roles:notifications.updateRole.success.description"),level:n.QU.SUCCESS,message:r(d?"console:manage.features.groups.notifications.updateGroup.success.message":"roles:notifications.updateRole.success.message")})),m()})).catch((function(e){e.response&&401!==e.response.status?e.response&&e.response.data.detail?t((0,o.V_)({description:r(d?"console:manage.features.groups.notifications.createPermission.error.description":"roles:notifications.createPermission.error.description",{description:e.response.data.detail}),level:n.QU.ERROR,message:r(d?"console:manage.features.groups.notifications.createPermission.error.message":"roles:notifications.createPermission.error.message")})):t((0,o.V_)({description:r(d?"console:manage.features.groups.notifications.createPermission.genericError.description":"roles:notifications.createPermission.genericError.description"),level:n.QU.ERROR,message:r(d?"console:manage.features.groups.notifications.createPermission.genericError.message":"roles:notifications.createPermission.genericError.message")})):t((0,o.V_)({description:r(d?"console:manage.features.groups.notifications.createPermission.error.description":"roles:notifications.createPermission.error.description"),level:n.QU.ERROR,message:r(d?"console:manage.features.groups.notifications.createPermission.error.message":"roles:notifications.createPermission.error.message")}))}))},roleObject:f}))}},31005:(e,r,t)=>{t.r(r),t.d(r,{RoleUserDetails:()=>p});var n=t(93129),o=t(3356),i=t(44194),s=t(10479),a=t(47245),l=t(12742),c=t(45770),u=t(78267);function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,s,a=[],l=!0,c=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=i.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,r)||m(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,r){if(e){if("string"==typeof e)return d(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?d(e,r):void 0}}function d(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var p=function(e){var r=(0,s.$)().t,t=(0,a.I0)(),d=e.roleObject,p=e.onRoleUpdate,g=e.isReadOnly,y=f((0,i.useState)(void 0),2),v=y[0],R=y[1];(0,i.useEffect)((function(){if(null!=d&&d.displayName){var e=d.displayName;-1!==e.indexOf("/")?R(e.split("/")[0]):R(c.$R)}}),[v,d]);var h=function(e){t((0,o.V_)(e))};return i.createElement(u.AddRoleUsers,{"data-testid":"role-mgt-edit-role-users",isGroup:!1,isEdit:!0,isReadOnly:g,userStore:v,assignedUsers:null==d?void 0:d.users,onSubmit:function(e){var t,o=[],i=function(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=m(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==t.return||t.return()}finally{if(a)throw i}}}}(e);try{for(i.s();!(t=i.n()).done;){var s=t.value;o.push({value:s.id})}}catch(c){i.e(c)}finally{i.f()}var a={Operations:[{op:"replace",path:"users",value:o}],schemas:["urn:ietf:params:scim:api:messages:2.0:PatchOp"]};(0,l.dB)(d.id,a).then((function(){h({description:r("roles:notifications.updateRole.success.description"),level:n.QU.SUCCESS,message:r("roles:notifications.updateRole.success.message")}),p()})).catch((function(){h({description:r("roles:notifications.updateRole.error.description"),level:n.QU.ERROR,message:r("roles:notifications.updateRole.error.message")})}))}})}},16376:(e,r,t)=>{t.r(r),t.d(r,{EditRole:()=>d});var n=t(71015),o=t(86727),i=t(44194),s=t(10479),a=t(89962),l=t(55610),c=t(31005),u=t(24393);function f(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,i,s,a=[],l=!0,c=!1;try{if(i=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=i.call(t)).done)&&(a.push(n.value),a.length!==r);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=t.return&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return m(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return m(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}var d=function(e){var r=e.roleObject,t=e.onRoleUpdate,m=(0,s.$)().t,d=f((0,i.useState)(!1),2),p=d[0],g=d[1],y=f((0,i.useState)(!1),2),v=y[0],R=y[1];(0,i.useEffect)((function(){r&&g(u.m8.location.pathname.includes("/groups/"))}),[r]),(0,i.useEffect)((function(){r&&R(r.displayName===n.nL.ADMIN_ROLE||r.displayName===n.nL.ADMIN_GROUP)}),[r]);return i.createElement(o.M$,{panes:[{menuItem:"General",render:function(){return i.createElement(o.M$.Pane,{controlledSegmentation:!0,attached:!1},i.createElement(a.BasicRoleDetails,{isReadOnly:v,"data-testid":"role-mgt-edit-role-basic",isGroup:p,roleObject:r,onRoleUpdate:t}))}},{menuItem:m("roles:edit.menuItems.permissions"),render:function(){return i.createElement(o.M$.Pane,{controlledSegmentation:!0,attached:!1},i.createElement(l.RolePermissionDetails,{isReadOnly:v,"data-testid":"role-mgt-edit-role-permissions",isGroup:!1,roleObject:r,onRoleUpdate:t}))}},{menuItem:m("roles:edit.menuItems.users"),render:function(){return i.createElement(o.M$.Pane,{controlledSegmentation:!0,attached:!1},i.createElement(c.RoleUserDetails,{"data-testid":"role-mgt-edit-role-users",isGroup:!1,roleObject:r,onRoleUpdate:t}))}}]})}},78267:(e,r,t)=>{t.r(r),t.d(r,{AddRoleUsers:()=>a.AddRoleUsers,CreateRoleSummary:()=>i.CreateRoleSummary,CreateRoleWizard:()=>n.CreateRoleWizard,PermissionList:()=>o.PermissionList,RoleBasics:()=>s.RoleBasics});var n=t(6187),o=t(19587),i=t(18259),s=t(45965),a=t(39553)}}]);