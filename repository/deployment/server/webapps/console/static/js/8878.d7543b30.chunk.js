"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[8878],{93474:(e,t,n)=>{n.d(t,{d:()=>C,x:()=>_});var r,i=n(34148),o=n(67442),a=n(93129),l=n(58097),c=n(73508),s=n(22732);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var m=f((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));r=m,g(m,"WS_FEDERATION_CONFIG_FETCH_ERROR_CODE","WFC-00001"),g(m,"WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","WFC-00002"),g(m,"WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE","WFC-00003"),g(m,"ErrorMessages",{WS_FEDERATION_CONFIG_FETCH_ERROR_CODE:new s.O(r.WS_FEDERATION_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the WS Federation configurations.","Error while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new s.O(r.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the WS Federation configurations.","Invalid Status Code while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE:new s.O(r.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the WS Federation configurations.","Error while updating the WS Federation configurations",null)});var p=i.AsgardeoSPAClient.getInstance().httpRequest.bind(i.AsgardeoSPAClient.getInstance()),_=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.GET,url:l.De.getServiceResourceEndpoints().passiveStsConfigurations},t=(0,c.Z)(e),n=t.data,r=t.error;return{data:n,error:r,isLoading:!r&&!n,isValidating:t.isValidating,mutate:t.mutate}},C=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:a.f2.PATCH,url:l.De.getServiceResourceEndpoints().passiveStsConfigurations};return p(t).then((function(e){if(200!==e.status&&201!==e.status)throw new o.u(m.ErrorMessages.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n=m.ErrorMessages.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new o.u(n,e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))}},8878:(e,t,n)=>{n.r(t),n.d(t,{WSFederationConfigurationPage:()=>v,default:()=>O});var r=n(67442),i=n(54833),o=n(93129),a=n(3356),l=n(20812),c=n(86727),s=n(44194),u=n(10479),d=n(47245),f=n(89141),g=n(41193),E=n(62508),m=n(41206),p=n(24393),_=n(93474);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,l=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(s)throw i}}return l}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=e["data-componentid"],n=(0,s.useRef)(null),R=(0,s.useRef)(null),v=(0,d.v9)((function(e){return e.config.ui.features})),O=(0,d.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),S=(0,s.useMemo)((function(){var e;return!(0,i.Xr)(null==v?void 0:v.server,null==v||null===(e=v.server)||void 0===e||null===(e=e.scopes)||void 0===e?void 0:e.update,O)}),[v,O]),h=(0,d.I0)(),b=(0,u.$)().t,F=C((0,s.useState)(void 0),2),w=F[0],y=F[1],A=(0,_.x)(),T=A.data,I=A.isLoading,N=A.mutate,D=A.error;(0,s.useEffect)((function(){T instanceof r.u||D?W():T&&y({enableRequestSigning:T.enableRequestSigning})}),[T]);var W=function(){h((0,a.V_)({description:b("wsFederationConfig:notifications.getConfiguration.error.description"),level:o.QU.ERROR,message:b("wsFederationConfig:notifications.getConfiguration.error.message")}))},P=function(e){var t={enableRequestSigning:e};(0,_.d)(t).then((function(){h((0,a.V_)({description:b("wsFederationConfig:notifications.updateConfiguration.success.description"),level:o.QU.SUCCESS,message:b("wsFederationConfig:notifications.updateConfiguration.success.message")}))})).catch((function(){h((0,a.V_)({description:b("wsFederationConfig:notifications.updateConfiguration.error.description"),level:o.QU.ERROR,message:b("wsFederationConfig:notifications.updateConfiguration.error.message")}))})).finally((function(){N()}))};return s.createElement(c.Xg,{title:b("wsFederationConfig:title"),pageTitle:b("wsFederationConfig:title"),description:b("wsFederationConfig:description"),backButton:{onClick:function(){p.m8.push(p.$x.getPaths().get("LOGIN_AND_REGISTRATION"))},text:b("governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(t,"-form-layout")},s.createElement(m.R,{innerRef:n},s.createElement(f.Z,{className:"mt-2"},s.createElement(f.Z.Row,{columns:1},s.createElement(f.Z.Column,{width:16},s.createElement(c.pJ,{className:"form-wrapper",padded:"very"},I?s.createElement(f.Z.Row,{columns:1},s.createElement("div",null,s.createElement("div",{className:"ui card fluid settings-card","data-testid":"".concat(t,"-loading-card")},s.createElement("div",{className:"content no-padding"},s.createElement("div",{className:"header-section"},s.createElement(g.Z,null,s.createElement(g.Z.Header,null,s.createElement(g.Z.Line,{length:"medium"}),s.createElement(g.Z.Line,{length:"full"}))),s.createElement(E.Z,{hidden:!0}))),s.createElement("div",{className:"content extra extra-content"},s.createElement("div",{className:"action-button"},s.createElement(g.Z,null,s.createElement(g.Z.Line,{length:"very short"}))))),s.createElement(E.Z,{hidden:!0}))):s.createElement(s.Fragment,null,s.createElement(l.l0,{id:"wsfederation-configuration-form",uncontrolledForm:!0,onSubmit:null,initialValues:w,enableReinitialize:!0,ref:R,noValidate:!0,autoComplete:"new-password"},s.createElement(f.Z,null,s.createElement(f.Z.Row,{columns:1,key:1},s.createElement(f.Z.Column,{key:"enableRequestSigning"},s.createElement(l.gN.Checkbox,{ariaLabel:"Enable Authentication Requests Signing",name:"enableRequestSigning",label:b("wsFederationConfig:form.enableRequestSigning.label"),readOnly:S,width:16,"data-componentid":"".concat(t,"-enable-request-signing"),toggle:!0,listen:function(e){P(e)}}))))))))))))};v.defaultProps={"data-componentid":"wsfederation-configuration-page"};const O=v}}]);