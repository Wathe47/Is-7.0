"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[78017],{78017:(e,n,t)=>{t.r(n),t.d(n,{AlternativeLoginIdentifierEditPage:()=>j,default:()=>M});var i=t(69192),o=t(20849),r=t(83487),a=t(16631),l=t(55437),c=t(8534),s=t(93129),u=t(3356),d=t(20812),f=t(86727),m=t(67127),p=t(44194),g=t(10479),v=t(47245),y=t(26154),b=t(6776),h=t(24058),I=t(45481),E=t(24393),C=t(57550),L=t(86375),O=t(29269),A=t(72478);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function w(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){x(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function x(e,n,t){var i;return i=function(e,n){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=S(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"),(n="symbol"==S(i)?i:i+"")in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function P(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,o,r,a,l=[],c=!0,s=!1;try{if(r=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(i=r.call(t)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw o}}return l}}(e,n)||_(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,n){if(e){if("string"==typeof e)return U(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?U(e,n):void 0}}function U(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var T="alternative-login-identifier-form",j=function(e){var n=e["data-componentid"],t=(0,g.$)().t,S=(0,v.I0)(),N=(0,v.v9)((function(e){var n;return null==e||null===(n=e.config)||void 0===n||null===(n=n.ui)||void 0===n?void 0:n.enableIdentityClaims})),x=L.v.ACCOUNT_MANAGEMENT_CATEGORY_ID,U=L.v.MULTI_ATTRIBUTE_LOGIN_CONNECTOR_ID,j=P((0,p.useState)(!1),2),M=j[0],k=j[1],Q=P((0,p.useState)(void 0),2),Z=Q[0],D=Q[1],V=P((0,p.useState)([]),2),B=V[0],F=V[1],W=P((0,p.useState)(!1),2),q=W[0],G=W[1],$=P((0,p.useState)(!1),2),Y=$[0],z=$[1],H=P((0,p.useState)(void 0),2),J=H[0],K=H[1],X=[I.Q.EMAIL_CLAIM_URI,I.Q.MOBILE_CLAIM_URI],ee=P((0,p.useState)(!1),2),ne=ee[0],te=ee[1],ie=(0,A.W)().data,oe=function(){(0,C.PP)(x,U).then((function(e){D(e)})).catch((function(e){e.response&&e.response.data&&e.response.data.detail?S((0,u.V_)({description:t("governanceConnectors:notifications.getConnector.error.description",{description:e.response.data.description}),level:s.QU.ERROR,message:t("governanceConnectors:notifications.getConnector.error.message")})):S((0,u.V_)({description:t("governanceConnectors:notifications.getConnector.genericError.description"),level:s.QU.ERROR,message:t("governanceConnectors:notifications.getConnector.genericError.message")}))}))},re=function(){var e={"exclude-identity-claims":!N,filter:null,limit:null,offset:null,sort:null};(0,h.WN)(e).then((function(e){var n=null==e?void 0:e.filter((function(e){return X.includes(e.claimURI)}));F(n)})).catch((function(){S((0,u.V_)({description:t("claims:local.notifications.fetchLocalClaims.genericError.description"),level:s.QU.ERROR,message:t("claims:local.notifications.fetchLocalClaims.genericError.message")}))}))},ae=function(e,n){var i={operation:"UPDATE",properties:[]};for(var o in e)i.properties.push({name:o,value:e[o]});z(!0),G(!0),(0,C.u9)(i,x,U).then((function(){se(n),S((0,u.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.notification.success.description"),level:s.QU.SUCCESS,message:t("governanceConnectors:notifications.updateConnector.success.message")})),oe()})).catch((function(e){!function(e){e.response&&e.response.data&&e.response.data.detail?S((0,u.V_)({description:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.notification.error.description"),level:s.QU.ERROR,message:t("governanceConnectors:notifications.updateConnector.error.message")})):S((0,u.V_)({description:t("governanceConnectors:notifications.updateConnector.genericError.description"),level:s.QU.ERROR,message:t("governanceConnectors:notifications.updateConnector.genericError.message")}))}(e)})).finally((function(){z(!1),G(!1)}))},le=function(e,n){var t,i=!1,o=w(e.properties),r=null==e||null===(t=e.properties)||void 0===t?void 0:t.findIndex((function(e){return"isUnique"===e.key}));return null!=n&&n.includes(e.claimURI)?-1!==r&&"false"===e.properties[r].value?(i=!0,o[r].value="true"):-1===r&&(i=!0,o.push({key:"isUnique",value:"true"})):-1!==r&&(i=!0,o=o.filter((function(e){return"isUnique"!==e.key}))),{isClaimUpdate:i,updatedClaimProperties:o}},ce=function(e){var n=null==e?void 0:e.id;return delete e.dialectURI,delete e.id,(0,h.iC)(n,e).then((function(){re()})).catch((function(e){S((0,u.V_)({description:(null==e?void 0:e.description)||t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.error.description"),level:s.QU.ERROR,message:(null==e?void 0:e.message)||t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.claimUpdateNotification.error.description")}))}))},se=function(e){var n,t=function(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=_(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return a=e.done,e},e:function(e){l=!0,r=e},f:function(){try{a||null==t.return||t.return()}finally{if(l)throw r}}}}(B);try{for(t.s();!(n=t.n()).done;){var i=n.value,o=le(i,e),r=o.isClaimUpdate,a=o.updatedClaimProperties,l=R(R({},i),{},{properties:a});r&&ce(l)}}catch(c){t.e(c)}finally{t.f()}},ue=function(e){var n=R({},e),t=B.filter((function(e){var t,i;return void 0!==n[null==e||null===(t=e.displayName)||void 0===t?void 0:t.toLowerCase()]&&n[null==e||null===(i=e.displayName)||void 0===i?void 0:i.toLowerCase()]})).map((function(e){return null==e?void 0:e.claimURI}));ne||(t=t.filter((function(e){return e!==I.Q.EMAIL_CLAIM_URI})));var i=function(e){var n=I.Q.USER_NAME_CLAIM_URI,t=[n].concat(w(e)).join(",");return{"account.multiattributelogin.handler.allowedattributes":t,"account.multiattributelogin.handler.enable":t!==n}}(t);ae(i,t)};return(0,p.useEffect)((function(){E.m8.location.state===b.jo.APPLICATION_STATE&&k(!0)}),[]),(0,p.useEffect)((function(){q||function(){var e,n;if(!(0,m.Z)(null==Z?void 0:Z.properties)&&!(0,m.Z)(B)){var t=J,i="true"===(null==Z||null===(e=Z.properties)||void 0===e?void 0:e.find((function(e){return"account.multiattributelogin.handler.enable"===e.name})).value),o=null==Z||null===(n=Z.properties)||void 0===n?void 0:n.find((function(e){return"account.multiattributelogin.handler.allowedattributes"===e.name})),r=null==o?void 0:o.value.split(",").map((function(e){return e.trim()}));t=R(R({},t),{},{email:i&&(null==r?void 0:r.includes(I.Q.EMAIL_CLAIM_URI))||!ne,mobile:i&&(null==r?void 0:r.includes(I.Q.MOBILE_CLAIM_URI))}),K(t)}}()}),[B,Z,q]),(0,p.useEffect)((function(){var e;ie&&te("true"===(null===(e=(0,O.t)(ie))||void 0===e?void 0:e.enableValidator))}),[ie]),(0,p.useEffect)((function(){G(!0),re(),oe(),G(!1)}),[]),p.createElement(p.Fragment,null,!q&&J?p.createElement(f.Xg,{pageTitle:t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.pageTitle"),title:p.createElement(p.Fragment,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.pageTitle")),description:p.createElement(p.Fragment,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.description")),"data-componentid":"".concat(n,"-page-layout"),backButton:{"data-testid":"".concat(n,"-page-back-button"),onClick:function(){M?E.m8.push(E.$x.getPaths().get("APPLICATIONS")):E.m8.push(E.$x.getPaths().get("LOGIN_AND_REGISTRATION"))},text:t(M?"extensions:manage.accountLogin.goBackToApplication":"governanceConnectors:goBackLoginAndRegistration")},bottomMargin:!1,contentTopMargin:!0,pageHeaderMaxWidth:!0},p.createElement(o.Z,{className:"mt-3"},p.createElement(f.pJ,{className:"form-wrapper",padded:"very"},p.createElement(d.l0,{id:T,initialValues:J,uncontrolledForm:!1,validate:null,onSubmit:function(e){return ue(e)}},p.createElement(c.Z,null,t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.loginIdentifierTypes")),p.createElement(f.v0,{warning:!0},p.createElement(y.Z,{className:"warning circle icon"}),t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.warning")),p.createElement(r.Z,{disablePadding:!0},null==B?void 0:B.map((function(e,o){var r=null==e?void 0:e.displayName.toLowerCase();return p.createElement(p.Fragment,null,p.createElement(a.Z,{key:o,disablePadding:!0,disabled:!ne&&"email"===r},p.createElement(d.gN.OxygenCheckbox,{disabled:!ne&&"email"===r,ariaLabel:r,key:o,name:r,required:!1,"data-componentid":"".concat(n,"-").concat(r,"-checkbox"),className:"alternative-login-identifier-checkbox"}),p.createElement(l.Z,{className:"alternative-login-identifier-item-text ",primary:null==e?void 0:e.displayName,secondary:p.createElement(i.Z,{className:"alternative-login-identifier-code"},null==e?void 0:e.claimURI)})),ne||"email"!==r?p.createElement(p.Fragment,null):p.createElement(f.v0,{info:!0,className:"alternative-login-identifier-info"},p.createElement(y.Z,{className:"info circle"}),t("extensions:manage.accountLogin.alternativeLoginIdentifierPage.info")))}))),p.createElement(d.gN.Button,{form:T,size:"small",buttonType:"primary_btn",ariaLabel:"Alternative Login Identifier update button",name:"update-button","data-testid":"".concat(n,"-submit-button"),disabled:Y,loading:Y,label:t("common:update"),hidden:null}))))):p.createElement(f.pO,null))};j.defaultProps={"data-componentid":"alternative-login-identifier-edit-page"};const M=j},69192:(e,n,t)=>{t.d(n,{Z:()=>u});var i=t(43112),o=t(31549),r=t(36993),a=t(14517),l=t(17273);const c="Code",s=e=>{const{className:n,children:t,filled:l,outlined:c}=e,s=(0,i.__rest)(e,["className","children","filled","outlined"]),u=(0,a.Z)("oxygen-code",{filled:l,outlined:c},n);return(0,o.jsx)(r.Z,Object.assign({component:"code",className:u},s,{children:t}))};s.displayName=(0,l.I)(c),s.muiName=c,s.defaultProps={filled:!0,outlined:!1};const u=s;var d,f,m;d='/**\n * Copyright (c) 2023, WSO2 LLC. (https://www.wso2.com). All Rights Reserved.\n *\n * WSO2 LLC. licenses this file to you under the Apache License,\n * Version 2.0 (the "License"); you may not use this file except\n * in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied. See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n.oxygen-code {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  font-size: inherit;\n  padding: 1px 3px;\n  border-radius: 5px; }\n  .oxygen-code.filled {\n    background-color: var(--oxygen-palette-customComponents-Code-background); }\n  .oxygen-code.outlined {\n    border: 1px solid var(--oxygen-palette-divider); }\n',f=document.getElementsByTagName("head")[0],(m=document.createElement("style")).setAttribute("type","text/css"),m.appendChild(document.createTextNode(d)),f.appendChild(m)}}]);