"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[45809,970,50583,33862,72387],{970:(t,e,n)=>{n.r(e),n.d(e,{updateMyAccountMFAOptions:()=>a.updateMyAccountMFAOptions,updateMyAccountStatus:()=>a.updateMyAccountStatus,updateTotpConfigOptions:()=>a.updateTotpConfigOptions,useMyAccountData:()=>a.useMyAccountData,useMyAccountStatus:()=>a.useMyAccountStatus,useTotpConfigData:()=>a.useTotpConfigData});var a=n(50583)},50583:(t,e,n)=>{n.r(e),n.d(e,{updateMyAccountMFAOptions:()=>p,updateMyAccountStatus:()=>l,updateTotpConfigOptions:()=>d,useMyAccountData:()=>A,useMyAccountStatus:()=>f,useTotpConfigData:()=>m});var a=n(34148),o=n(67442),r=n(93129),c=n(73508),i=n(61263),u=n(33862),s=a.AsgardeoSPAClient.getInstance().httpRequest.bind(a.AsgardeoSPAClient.getInstance()).bind(a.AsgardeoSPAClient.getInstance()),l=function(t){var e={data:{attributes:[{key:"enable",value:t}],name:"status"},headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.PUT,url:i.h.getState().config.endpoints.myAccountConfigMgt};return s(e).then((function(t){if(200!==t.status)throw new o.u(u.MyAccountManagementConstants.MYACCOUNT_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR,null,t.status,t.request,t,t.config);return Promise.resolve(t.data)})).catch((function(t){throw new o.u(u.MyAccountManagementConstants.MYACCOUNT_STATUS_UPDATE_ERROR,t.stack,t.code,t.request,t.response,t.config)}))},p=function(t){var e={data:{attributes:[{key:"email_otp_enabled",value:t.emailOtpEnabled},{key:"sms_otp_enabled",value:t.smsOtpEnabled},{key:"totp_enabled",value:t.totpEnabled},{key:"backup_code_enabled",value:t.backupCodeEnabled}],name:"myaccount-2FA-config"},headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.PUT,url:i.h.getState().config.endpoints.myAccountConfigMgt};return s(e).then((function(t){if(200!==t.status)throw new o.u(u.MyAccountManagementConstants.MYACCOUNT_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR,null,t.status,t.request,t,t.config);return Promise.resolve(t.data)})).catch((function(t){throw new o.u(u.MyAccountManagementConstants.MYACCOUNT_STATUS_UPDATE_ERROR,t.stack,t.code,t.request,t.response,t.config)}))},d=function(t){var e={data:{attributes:[{key:"enrolUserInAuthenticationFlow",value:t.totpEnrollmentEnabled}],name:"myaccount-TOTP-config"},headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.PUT,url:i.h.getState().config.endpoints.myAccountConfigMgt};return s(e).then((function(t){if(200!==t.status)throw new o.u(u.MyAccountManagementConstants.MYACCOUNT_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR,null,t.status,t.request,t,t.config);return Promise.resolve(t.data)})).catch((function(t){throw new o.u(u.MyAccountManagementConstants.MYACCOUNT_STATUS_UPDATE_ERROR,t.stack,t.code,t.request,t.response,t.config)}))},f=function(){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{},url:i.h.getState().config.endpoints.myAccountConfigMgt+"/status/enable"},e=(0,c.Z)(t,{shouldRetryOnError:!1}),n=e.data,a=e.error;return{data:n,error:a,isLoading:!n&&!a,isValidating:e.isValidating,mutate:e.mutate}},A=function(){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{},url:i.h.getState().config.endpoints.myAccountConfigMgt+"/myaccount-2FA-config"},e=(0,c.Z)(t,{shouldRetryOnError:!1}),n=e.data,a=e.error;return{data:n,error:a,isLoading:!n&&!a,isValidating:e.isValidating,mutate:e.mutate}},m=function(){var t={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{},url:i.h.getState().config.endpoints.myAccountConfigMgt+"/myaccount-TOTP-config"},e=(0,c.Z)(t,{shouldRetryOnError:!1}),n=e.data,a=e.error;return{data:n,error:a,isLoading:!n&&!a,isValidating:e.isValidating,mutate:e.mutate}}},33862:(t,e,n)=>{n.r(e),n.d(e,{CHANNEL_TYPE:()=>a.CHANNEL_TYPE,MyAccountAttributeTypes:()=>a.MyAccountAttributeTypes,MyAccountManagementConstants:()=>a.MyAccountManagementConstants,TotpConfigAttributeTypes:()=>a.TotpConfigAttributeTypes,VALID_SMS_OTP_PROVIDERS:()=>a.VALID_SMS_OTP_PROVIDERS});var a=n(72387)},72387:(t,e,n)=>{function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,i(a.key),a)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c(t,e,n){return(e=i(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}n.r(e),n.d(e,{CHANNEL_TYPE:()=>p,MyAccountAttributeTypes:()=>s,MyAccountManagementConstants:()=>u,TotpConfigAttributeTypes:()=>l,VALID_SMS_OTP_PROVIDERS:()=>d});var u=r((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}));c(u,"MYACCOUNT_STATUS_UPDATE_ERROR","An error occurred while updating status of the My Account Portal."),c(u,"MYACCOUNT_STATUS_UPDATE_INVALID_STATUS_CODE_ERROR","Received an invalid status code while updating status of the My Account Portal.");var s=function(t){return t.ENABLE="enable",t.EMAIL_OTP_ENABLED="email_otp_enabled",t.SMS_OTP_ENABLED="sms_otp_enabled",t.TOTP_ENABLED="totp_enabled",t.BACKUP_CODE_ENABLED="backup_code_enabled",t}({}),l=function(t){return t.ENROLL_USER_IN_AUTHENTICATION_FLOW="enrolUserInAuthenticationFlow",t}({}),p="SMSPublisher",d=["choreo","Twilio","Custom","Vonage"]},45809:(t,e,n)=>{n.r(e),n.d(e,{MyAccountSettingsPage:()=>g,default:()=>T});var a=n(93129),o=n(3356),r=n(86727),c=n(44194),i=n(10479),u=n(47245),s=n(89141),l=n(41193),p=n(62508),d=n(41206),f=n(24393),A=n(970);function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,o,r,c,i=[],u=!0,s=!1;try{if(r=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=r.call(n)).done)&&(i.push(a.value),i.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=n.return&&(c=n.return(),Object(c)!==c))return}finally{if(s)throw o}}return i}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}var g=function(t){var e=t["data-componentid"],n=(0,u.I0)(),y=(0,c.useRef)(null),g=(0,i.$)().t,T=m((0,c.useState)(!0),2),E=T[0],_=T[1],S=m((0,c.useState)(f.$x.DEFAULT_MY_ACCOUNT_STATUS),2),h=S[0],C=S[1],M=(0,A.useMyAccountStatus)(),b=M.data,v=M.isLoading,O=M.error;(0,c.useEffect)((function(){if(O)if(O.response&&O.response.data&&O.response.data.description){var t;if(404===O.response.status)return;n((0,o.V_)({description:null!==(t=O.response.data.description)&&void 0!==t?t:g("applications:myaccount.fetchMyAccountStatus.error.description"),level:a.QU.ERROR,message:g("applications:myaccount.fetchMyAccountStatus.error.message")}))}else n((0,o.V_)({description:g("applications:myaccount.fetchMyAccountStatus.genericError.description"),level:a.QU.ERROR,message:g("applications:myaccount.fetchMyAccountStatus.genericError.message")}))}),[O]),(0,c.useEffect)((function(){if(!1===v&&!0===E){var t=f.$x.DEFAULT_MY_ACCOUNT_STATUS;if(b){var e=b.value;e&&"false"===e&&(t=!1)}C(t),_(!1)}}),[v,E]);return c.createElement(r.Xg,{pageTitle:g("extensions:manage.myAccount.pageTitle"),title:g("extensions:manage.myAccount.pageTitle"),description:g("extensions:manage.myAccount.description"),"data-componentid":"".concat(e,"-page-layout")},c.createElement(d.R,{innerRef:y},c.createElement(r.Me,{showTopActionPanel:!1},v||E?c.createElement(s.Z.Row,{columns:1},c.createElement("div",null,c.createElement("div",{className:"ui card fluid settings-card","data-testid":"".concat(e,"-loading-card")},c.createElement("div",{className:"content no-padding"},c.createElement("div",{className:"header-section"},c.createElement(l.Z,null,c.createElement(l.Z.Header,null,c.createElement(l.Z.Line,{length:"medium"}),c.createElement(l.Z.Line,{length:"full"}))),c.createElement(p.Z,{hidden:!0}))),c.createElement("div",{className:"content extra extra-content"},c.createElement("div",{className:"action-button"},c.createElement(l.Z,null,c.createElement(l.Z.Line,{length:"very short"}))))),c.createElement(p.Z,{hidden:!0}))):c.createElement(s.Z.Row,{columns:1},c.createElement(s.Z.Column,{width:12},c.createElement(r.$0,{"data-componentid":"".concat(e,"-settings-section"),description:"Self-service portal for your users.",icon:null,header:"My Account",onPrimaryActionClick:function(){f.m8.push(f.$x.getPaths().get("MY_ACCOUNT_EDIT"))},primaryAction:"Configure",connectorEnabled:h},c.createElement(p.Z,{hidden:!0})))))))};g.defaultProps={"data-componentid":"my-account-settings-page"};const T=g}}]);