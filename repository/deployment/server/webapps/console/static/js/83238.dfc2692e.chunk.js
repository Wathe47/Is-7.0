"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[83238],{83238:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var l=a(24184),n=a(93129),i=a(3356),r=a(66112),c=a(86727),o=a(44194),u=a(10479),s=a(47245),d=a(26154),f=a(35542),m=a(24393),h=a(84870),v=a(16645);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,n,i,r,c=[],o=!0,u=!1;try{if(i=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(l=i.call(a)).done)&&(c.push(l.value),c.length!==t);o=!0);}catch(e){u=!0,n=e}finally{try{if(!o&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(u)throw n}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}var y=function(e){var t,a=e["data-testid"],p=(0,u.$)().t,y=(0,c.fQ)().getLink,b=[{key:0,text:p("common:name"),value:"displayName"},{key:1,text:p("claims:local.attributes.attributeURI"),value:"claimURI"}],S=(0,s.v9)((function(e){return e.config.ui.features})),C=(0,s.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),E=g((0,o.useState)(null),2),A=E[0],I=E[1],k=g((0,o.useState)(0),2),L=k[0],w=k[1],P=g((0,o.useState)(m.ru.DEFAULT_RESOURCE_LIST_ITEM_LIMIT),2),R=P[0],O=P[1],U=g((0,o.useState)(!1),2),_=U[0],x=U[1],T=g((0,o.useState)(""),2),M=T[0],Q=T[1],D=g((0,o.useState)(null),2),N=D[0],V=D[1],j=g((0,o.useState)(b[0]),2),F=j[0],$=j[1],z=g((0,o.useState)(!0),2),q=z[0],B=z[1],H=g((0,o.useState)(""),2),K=H[0],W=H[1],X=g((0,o.useState)(!0),2),Z=X[0],G=X[1],J=g((0,o.useState)(!1),2),Y=J[0],ee=J[1],te=g((0,r.cC)(),2),ae=te[0],le=te[1],ne=(0,s.I0)(),ie=(0,o.useRef)(!0),re=function(e,t,a,l){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!C;G(!0);var c={"exclude-identity-claims":r,filter:l||null,limit:e||null,offset:a||null,sort:t||null};(0,f.WN)(c).then((function(e){I(e),V((0,m.fS)(e,F.value,q))})).catch((function(e){var t,a;ne((0,i.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||p("claims:local.notifications.getClaims.genericError.description"),level:n.QU.ERROR,message:(null==e||null===(a=e.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.message)||p("claims:local.notifications.getClaims.genericError.message")}))})).finally((function(){G(!1)}))};(0,o.useEffect)((function(){ie.current?ie.current=!1:V((0,m.fS)(N,F.value,q))}),[F,q]),(0,o.useEffect)((function(){re(null,null,null,null,!C),(0,f.vR)("local").then((function(e){Q(e.dialectURI)})).catch((function(e){ne((0,i.V_)({description:(null==e?void 0:e.description)||p("claims:local.notifications.getLocalDialect.genericError.message"),level:n.QU.ERROR,message:(null==e?void 0:e.message)||p("claims:local.notifications.getLocalDialect.genericError.message")}))}))}),[]);var ce=function(e){var t=(0,m.gQ)(A,e,F.value,q);V(t),W(oe(e)),w(0),le()},oe=function(e){var t=null==e?void 0:e.split(" "),a="";if(t)switch(t[1]){case"eq":a="".concat(t[0]," equals to ").concat(t[2]);break;case"co":a="".concat(t[0]," containing ").concat(t[2]);break;case"sw":a="".concat(t[0]," starting with ").concat(t[2]);break;case"ew":a="".concat(t[0]," ending with ").concat(t[2])}return a};return o.createElement(o.Fragment,null,_?o.createElement(v.C$,{open:_,onClose:function(){x(!1)},update:re,claimURIBase:M,"data-testid":"".concat(a,"-add-local-claims-wizard")}):null,o.createElement(c.Xg,{action:(Z||!(!K&&(null==N?void 0:N.length)<=0))&&h.attributeConfig.attributes.addAttribute&&o.createElement(l.di,{when:null==S||null===(t=S.attributeDialects)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.create},o.createElement(c.KM,{onClick:function(){x(!0)},"data-testid":"".concat(a,"-list-layout-add-button")},o.createElement(d.Z,{name:"add"}),p("claims:local.pageLayout.local.action"))),isLoading:Z,title:p("claims:local.pageLayout.local.title"),pageTitle:p("claims:local.pageLayout.local.title"),description:o.createElement(o.Fragment,null,p(h.attributeConfig.attributes.description),o.createElement(c.eb,{link:y("manage.attributes.attributes.learnMore")},p("common:learnMore"))),backButton:{onClick:function(){m.m8.push(m.$x.getPaths().get("CLAIM_DIALECTS"))},text:p("claims:local.pageLayout.local.back")},"data-testid":"".concat(a,"-page-layout")},o.createElement(c.PS,{resetPagination:ae,advancedSearch:o.createElement(m.nC,{onFilter:ce,filterAttributeOptions:[{key:0,text:p("common:name"),value:"displayName"},{key:1,text:p("claims:local.attributes.attributeURI"),value:"claimURI"}],filterAttributePlaceholder:p("claims:local.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:p("claims:local.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:p("claims:local.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:p("claims:local.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:Y,"data-testid":"".concat(a,"-list-advanced-search")}),currentListSize:R,listItemLimit:R,onItemsPerPageDropdownChange:function(e,t){O(t.value)},onPageChange:function(e,t){w((t.activePage-1)*R)},onSortStrategyChange:function(e,t){$(b.filter((function(e){return e.value===t.value}))[0])},leftActionPanel:null,showPagination:!0,sortOptions:b,sortStrategy:F,showTopActionPanel:Z||!(!K&&(null==N?void 0:N.length)<=0),totalPages:Math.ceil((null==N?void 0:N.length)/R),totalListSize:null==N?void 0:N.length,onSortOrderChange:function(e){B(e)},"data-testid":"".concat(a,"-list-layout")},o.createElement(v.Sf,{advancedSearch:o.createElement(m.nC,{onFilter:ce,filterAttributeOptions:[{key:0,text:p("common:name"),value:"displayName"},{key:1,text:p("claims:local.attributes.attributeURI"),value:"claimURI"}],filterAttributePlaceholder:p("claims:local.advancedSearch.form.inputs.filterAttribute.placeholder"),filterConditionsPlaceholder:p("claims:local.advancedSearch.form.inputs.filterCondition.placeholder"),filterValuePlaceholder:p("claims:local.advancedSearch.form.inputs.filterValue.placeholder"),placeholder:p("claims:local.advancedSearch.placeholder"),defaultSearchAttribute:"displayName",defaultSearchOperator:"co",triggerClearQuery:Y,"data-testid":"".concat(a,"-list-advanced-search")}),showTableHeaders:!0,isLoading:Z,list:function(e,t,a){return null==e?void 0:e.slice(a,a+t)}(N,R,L),localClaim:v.RH.LOCAL,update:re,onEmptyListPlaceholderActionClick:function(){return x(!0)},onSearchQueryClear:function(){ee(!Y),W(""),V(A)},searchQuery:K,"data-testid":"".concat(a,"-list"),featureConfig:S}))))};y.defaultProps={"data-testid":"local-claims"};const b=y}}]);