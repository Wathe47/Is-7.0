"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[92820],{92820:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappings:()=>i.AttributeMappings,SetupGuideTab:()=>r.SetupGuideTab,UserStoreGeneralSettings:()=>a.UserStoreGeneralSettings});var r=n(41050),i=n(14710),a=n(2490)},14710:(e,t,n)=>{n.r(t),n.d(t,{AttributeMappings:()=>U});var r=n(93129),i=n(3356),a=n(66112),l=n(86727),s=n(99759),o=n(44194),u=n(10479),c=n(47245),m=n(62508),d=n(19980),p=n(89141),f=n(12638),v=n(35542),E=n(24393),g=n(28897),h=n(37313),b=n(8889);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,l,s=[],o=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);o=!0);}catch(e){u=!0,i=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var U=function(e){var t,n,S,U,A=e.userStore,w=e.userStoreId,R=e["data-testid"],M=(0,u.$)().t,C=(0,c.I0)(),Z=(0,l.fQ)().getLink,I=(0,l.kH)().isMobileViewport,N=(0,c.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),x=y((0,o.useState)(null),2),_=x[0],T=x[1],O=y((0,o.useState)(null),2),k=O[0],L=O[1],G=y((0,o.useState)(null),2),V=G[0],j=G[1],Q=y((0,o.useState)(!1),2),q=Q[0],D=Q[1];(0,o.useEffect)((function(){X(null,null,null,null,!N)}),[]),(0,o.useEffect)((function(){if(_){var e=[];_.map((function(t){t.properties.map((function(n){"USER_CUSTOM_ATTRIBUTE"===n.key&&"TRUE"===n.value&&e.push(t)}))})),j(e),L((0,s.Z)(_,e))}}),[_]);var X=function(e,t,n,a,l){D(!0);var s={"exclude-identity-claims":l,filter:a||null,limit:e||null,offset:n||null,sort:t||null};(0,v.WN)(s).then((function(e){T((0,E.fS)(e,b.RemoteUserStoreConstants.DISPLAY_NAME_VALUE,!0))})).catch((function(e){var t,n;C((0,i.V_)({description:(null==e||null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.description)||M("claims:local.notifications.getClaims.genericError.description"),level:r.QU.ERROR,message:(null==e||null===(n=e.response)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.message)||M("claims:local.notifications.getClaims.genericError.message")}))})).finally((function(){D(!1)}))},$=function(e){var t="";return e.attributeMapping.forEach((function(e){(e.userstore===(null==A?void 0:A.name.toUpperCase())||""===t&&e.userstore===b.RemoteUserStoreConstants.PRIMARY_USER_STORE_NAME)&&(t=e.mappedAttribute)})),t},H=function(e){var t=[];e.forEach((function(e,n){t.push({claimURI:n,mappedAttribute:e})})),function(e){(0,g.TU)(w,e).then((function(){C((0,i.V_)({description:M("userstores:notifications.updateUserstore.success.description"),level:r.QU.SUCCESS,message:M("userstores:notifications.updateUserstore.success.message")})),C((0,i.V_)({description:M("userstores:notifications.updateDelay.description"),level:r.QU.WARNING,message:M("userstores:notifications.updateDelay.message")}))})).catch((function(e){C((0,i.V_)({description:(null==e?void 0:e.description)||M("userstores:notifications.updateUserstore.genericError.description"),level:r.QU.ERROR,message:(null==e?void 0:e.message)||M("userstores:notifications.updateUserstore.genericError.message")}))}))}(t)};return o.createElement(o.Fragment,null,q?o.createElement(l.pO,null):o.createElement(l.pJ,{padded:"very"},o.createElement(l.X6,{as:"h3"},"Update Attribute Mappings",o.createElement(l.X6,{subHeading:!0,as:"h6"},M("extensions:manage.features.userStores.edit.attributeMappings.description"),o.createElement(l.eb,{link:Z("manage.userStores.attributeMappings.learnMore")},M("extensions:common.learnMore")))),o.createElement(m.Z,{hidden:!0}),o.createElement(a.Es,{onSubmit:function(e){H(e)}},o.createElement(l.X6,{as:"h5"},"Custom Attributes"),o.createElement(d.Z,{className:"attribute-mapping-section",padded:"very"},q?o.createElement(l.pO,null):V&&V.length>0?o.createElement(p.Z,{width:10},null==V?void 0:V.map((function(e,t){return o.createElement(p.Z.Row,{key:t,columns:2,verticalAlign:"middle"},o.createElement(p.Z.Column,{width:6},o.createElement(f.Z.Content,null,null==e?void 0:e.displayName,o.createElement(l.xv,{display:"inline",styles:{color:"red"}},"*"),o.createElement(f.Z.Subheader,null,o.createElement("code",{className:"inline-code compact transparent"},null==e?void 0:e.claimURI)))),o.createElement(p.Z.Column,{width:6},o.createElement(a.gN,{name:null==e?void 0:e.claimURI,requiredErrorMessage:M("extensions:manage.features.userStores.edit.attributeMappings.validations.empty"),type:"text",required:!0,minLength:3,maxLength:50,"data-testid":"".concat(R,"-user-store-name-input"),width:14,hint:"This will appear as the name of the remote user store that you connect.",value:$(e)})))}))):o.createElement(l.$J,{title:"No Custom Attributes",subtitle:["There are no custom attributes created in the system."]})),null!==(t=(null==V?void 0:V.length)>0&&"false"===(null==A||null===(n=A.properties)||void 0===n||null===(n=n.find((function(e){return e.name===h.rr})))||void 0===n?void 0:n.value))&&void 0!==t?t:o.createElement(l.KM,{type:"submit"},M("common:update")),o.createElement(m.Z,{hidden:!0}),o.createElement(m.Z,null),o.createElement(l.X6,{as:"h5"},"Local Attributes"),o.createElement(d.Z,{className:"attribute-mapping-section",padded:"very"},q?o.createElement(l.pO,null):k&&k.length>0?o.createElement(p.Z,{width:10},null==k?void 0:k.map((function(e,t){return o.createElement(p.Z.Row,{key:t,columns:2,verticalAlign:"middle"},o.createElement(p.Z.Column,{width:6},o.createElement(f.Z.Content,null,null==e?void 0:e.displayName,o.createElement(l.xv,{display:"inline",styles:{color:"red"}},"*"),o.createElement(f.Z.Subheader,null,o.createElement("code",{className:"inline-code compact transparent"},null==e?void 0:e.claimURI)))),o.createElement(p.Z.Column,{width:6},o.createElement(a.gN,{name:null==e?void 0:e.claimURI,requiredErrorMessage:M("extensions:manage.features.userStores.edit.attributeMappings.validations.empty"),type:"text",required:!0,minLength:3,maxLength:50,"data-testid":"".concat(R,"-user-store-name-input"),width:14,hint:"This will appear as the name of the remote user store that you connect.",value:$(e)})))}))):o.createElement(l.$J,{title:"No Custom Attributes",subtitle:["There are no custom attributes created in the system."]})),o.createElement(l.GI,{trigger:o.createElement("div",{className:I?"mb-1x mt-1x inline-button button-width":"inline-button"},o.createElement(l.KM,{type:"submit",disabled:!("false"===(null==A||null===(S=A.properties)||void 0===S||null===(S=S.find((function(e){return e.name===h.rr})))||void 0===S?void 0:S.value))},M("common:update"))),content:M("extensions:manage.features.userStores.edit.attributeMappings.disable.buttonDisableHint"),size:"mini",wide:!0,disabled:!("false"!==(null==A||null===(U=A.properties)||void 0===U||null===(U=U.find((function(e){return e.name===h.rr})))||void 0===U?void 0:U.value))}))))}}}]);