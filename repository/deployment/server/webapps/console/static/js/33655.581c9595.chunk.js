(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[33655],{3536:(e,n,t)=>{"use strict";t.d(n,{Z:()=>a});var r=t(93129),i=t(73508),o=t(61263);const a=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a={headers:{Accept:"application/json","Content-Type":"application/json"},method:r.f2.GET,params:{attributes:t,filter:n},url:o.h.getState().config.endpoints.apiResourceCollections},l=(0,i.Z)(e?a:null,{shouldRetryOnError:!1}),s=l.data,c=l.error;return{data:s,error:c,isLoading:!c&&!s,isValidating:l.isValidating,mutate:l.mutate}}},33655:(e,n,t)=>{"use strict";t.d(n,{Z:()=>P});var r=t(10642),i=t(29767),o=t(47783),a=t(5746),l=t(56066),s=t(21221),c=t(29173),u=t(2659),d=t(10657),m=t(15118),p=t(99774),b=t(62410),f=t(93591),v=t(8534),y=t(46440),Z=t(17),E=t(67127),g=t(44194),h=t(10479),N=t(47245),L=t(3536),R=t(79532),O=function(e){return e.TENANT="tenant",e.ORGANIZATION="organization",e}({}),S=t(45030),C=t(51835),w=t.n(C),x=t(27975),I=t.n(x),z=t(55900),X=t.n(z),W=t(21555),A=t.n(W),_=t(3621),j=t.n(_),k=t(5062),Q=t.n(k),U=t(60714),G=t.n(U),Y={};Y.styleTagTransform=Q(),Y.setAttributes=A(),Y.insert=X().bind(null,"head"),Y.domAPI=I(),Y.insertStyleElement=j();w()(G(),Y);G()&&G().locals&&G().locals;function F(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,l=[],s=!0,c=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=o.call(t)).done)&&(l.push(r.value),l.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw i}}return l}}(e,n)||B(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,n){if(e){if("string"==typeof e)return T(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(e,n):void 0}}function T(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var M="tenant-permissions",V="organization-permissions",D=function(e){var n,t,C,w,x,I,z=e.isReadOnly,X=e.defaultExpandedIfPermissionsAreSelected,W=e.initialValues,A=e.onPermissionsChange,_=e["data-componentid"],j=(0,h.$)().t,k=(0,N.v9)((function(e){var n;return null==e||null===(n=e.config)||void 0===n||null===(n=n.ui)||void 0===n?void 0:n.legacyMode})),Q=(0,L.Z)(!0,"type eq tenant","apiResources").data,U=(0,L.Z)(!0,"type eq organization","apiResources").data,G=J((0,g.useState)([]),2),Y=G[0],B=G[1],T=J((0,g.useState)(W||{organization:{},tenant:{}}),2),D=T[0],P=T[1];(0,g.useEffect)((function(){if(W&&(P(W),X)){var e=[];(0,E.Z)(W.tenant)||e.push(M),(0,E.Z)(W.organization)||e.push(V),B(e)}}),[W]);var H=(0,g.useMemo)((function(){var e;if(!Q)return null;var n=(0,y.Z)(Q),t=[];return null!=k&&k.rolesV1?t.push(R.S.ROLE_API_RESOURCES_COLLECTION_NAME):t.push(R.S.ROLE_V1_API_RESOURCES_COLLECTION_NAME),n.apiResourceCollections=null==n||null===(e=n.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!t.includes(null==e?void 0:e.name)})),n}),[Q]),q=(0,g.useMemo)((function(){var e;if(!U)return null;var n=(0,y.Z)(U),t=[];return null!=k&&k.rolesV1?t.push(R.S.ORG_ROLE_API_RESOURCES_COLLECTION_NAME):t.push(R.S.ORG_ROLE_V1_API_RESOURCES_COLLECTION_NAME),n.apiResourceCollections=null==n||null===(e=n.apiResourceCollections)||void 0===e?void 0:e.filter((function(e){return!t.includes(null==e?void 0:e.name)})),n}),[U]),$=function(e){return function(n,t){B(t?[].concat(F(Y),[e]):Y.filter((function(n){return n!==e})))}},K=function(e,n){var t=(0,y.Z)(D);n===O.TENANT?e.target.checked?t.tenant=((null==H?void 0:H.apiResourceCollections)||[]).reduce((function(e,n){return e[n.id]={permissions:(0,S.Z)(n.apiResources.read),read:!0,write:!1},e}),{}):t.tenant={}:e.target.checked?t.organization=((null==q?void 0:q.apiResourceCollections)||[]).reduce((function(e,n){return e[n.id]={permissions:(0,S.Z)(n.apiResources.read),read:!0,write:!1},e}),{}):t.organization={},P(t),ee(t)},ee=function(e){var n=new Set;Object.keys(e).forEach((function(t){var r=e[t];Object.keys(r).forEach((function(e){var t=r[e];t.permissions&&t.permissions.length>0&&t.permissions.forEach((function(e){n.add(JSON.stringify(e))}))}))}));var t=Array.from(n).map((function(e){return JSON.parse(e)}));A(t)},ne=function(e,n,t){var r=n.id,i=n.apiResources,o=(0,y.Z)(D);e.target.checked?o[t][r]={permissions:(0,S.Z)(i.read),read:!0,write:!1}:delete o[t][r],P(o),ee(o)},te=function(e,n,t,r){var i=n.id,o=n.apiResources,a=(0,y.Z)(D);a[r][i]={permissions:(0,S.Z)(o[t]),read:"read"===t,write:"write"===t},P(a),ee(a)};return g.createElement("div",{className:"create-console-role-wizard-permissions-form","data-componentid":_},g.createElement("div",{className:"accordion-container"},g.createElement(d.Z,{elevation:0,expanded:Y.includes(M),onChange:$(M),className:"tenant-permissions-accordion"},g.createElement(p.Z,{expandIcon:g.createElement(u.v4,null),"aria-controls":"tenant-permissions-content",id:"tenant-permissions-header"},g.createElement(b.Z,{readOnly:z,disabled:z,color:"primary",checked:Object.keys(D.tenant).length===(null==H||null===(n=H.apiResourceCollections)||void 0===n?void 0:n.length),onChange:function(e){K(e,O.TENANT)},inputProps:{"aria-label":"Select all tenant permissions"}}),g.createElement(v.Z,{className:"permissions-accordion-label"},j("consoleSettings:roles.add.tenantPermissions.label")),g.createElement(v.Z,{variant:"body2"},null==H||null===(t=H.apiResourceCollections)||void 0===t?void 0:t.length," Permissions")),g.createElement(m.Z,null,g.createElement(a.Z,{component:f.Z,elevation:0},g.createElement(r.Z,{className:"permissions-table",size:"small","aria-label":"tenant permissions table"},g.createElement(i.Z,null,null==H||null===(C=H.apiResourceCollections)||void 0===C?void 0:C.map((function(e){var n;return g.createElement(l.Z,{key:e.id,className:"permissions-table-data-row"},g.createElement(o.Z,{padding:"checkbox"},g.createElement(b.Z,{readOnly:z,disabled:z,color:"primary",checked:Object.keys(D.tenant).includes(e.id),onChange:function(n){return ne(n,e,O.TENANT)},inputProps:{"aria-label":"Select ".concat(e.displayName," permission")}})),g.createElement(o.Z,{component:"th",scope:"row"},e.displayName),g.createElement(o.Z,{align:"right"},g.createElement(c.Z,{disabled:z,value:Object.keys(D.tenant).includes(e.id)?null!==(n=(0,Z.Z)(D.tenant,e.id))&&void 0!==n&&n.write?"write":"read":null,exclusive:!0,onChange:function(n,t){t&&te(0,e,t,O.TENANT)},"aria-label":"text alignment",size:"small"},g.createElement(s.Z,{value:"read","aria-label":"left aligned"},j("consoleSettings:roles.permissionLevels.view")),g.createElement(s.Z,{value:"write","aria-label":"right aligned"},j("consoleSettings:roles.permissionLevels.edit")))))})))))))),g.createElement("div",{className:"accordion-container"},g.createElement(d.Z,{elevation:0,expanded:Y.includes(V),onChange:$(V),className:"organization-permissions-accordion"},g.createElement(p.Z,{expandIcon:g.createElement(u.v4,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},g.createElement(b.Z,{readOnly:z,disabled:z,color:"primary",checked:Object.keys(D.organization).length===(null==q||null===(w=q.apiResourceCollections)||void 0===w?void 0:w.length),onChange:function(e){K(e,O.ORGANIZATION)},inputProps:{"aria-label":"Select all organization permissions"}}),g.createElement(v.Z,{className:"permissions-accordion-label"},j("consoleSettings:roles.add.organizationPermissions.label")),g.createElement(v.Z,{variant:"body2"},null==q||null===(x=q.apiResourceCollections)||void 0===x?void 0:x.length," Permissions")),g.createElement(m.Z,null,g.createElement(a.Z,{component:f.Z,elevation:0},g.createElement(r.Z,{className:"permissions-table",size:"small","aria-label":"organization permissions table"},g.createElement(i.Z,null,null==q||null===(I=q.apiResourceCollections)||void 0===I?void 0:I.map((function(e){var n;return g.createElement(l.Z,{key:e.id,className:"permissions-table-data-row"},g.createElement(o.Z,{padding:"checkbox"},g.createElement(b.Z,{readOnly:z,disabled:z,color:"primary",checked:Object.keys(D.organization).includes(e.id),onChange:function(n){return ne(n,e,O.ORGANIZATION)},inputProps:{"aria-label":"Select ".concat(e.displayName," permission")}})),g.createElement(o.Z,{component:"th",scope:"row"},e.displayName),g.createElement(o.Z,{align:"right"},g.createElement(c.Z,{disabled:z,value:Object.keys(D.organization).includes(e.id)?null!==(n=(0,Z.Z)(D.organization,e.id))&&void 0!==n&&n.write?"write":"read":null,exclusive:!0,onChange:function(n,t){te(0,e,t,O.ORGANIZATION)},"aria-label":"text alignment",size:"small"},g.createElement(s.Z,{value:"read","aria-label":"left aligned"},j("consoleSettings:roles.permissionLevels.view")),g.createElement(s.Z,{value:"write","aria-label":"right aligned"},j("consoleSettings:roles.permissionLevels.edit")))))})))))))))};D.defaultProps={"data-componentid":"create-console-role-wizard-basic-info-form"};const P=D},79532:(e,n,t)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function o(e,n,t){return n&&i(e.prototype,n),t&&i(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,n,t){return(n=l(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){var n=function(e,n){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==r(n)?n:n+""}t.d(n,{S:()=>s});var s=o((function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}));a(s,"ADD_NEW_ROLE_FORM_ID","add-new-console-role-wizard-form"),a(s,"ROLE_V1_API_RESOURCES_COLLECTION_NAME","rolesV1"),a(s,"ROLE_API_RESOURCES_COLLECTION_NAME","roles"),a(s,"ORG_ROLE_V1_API_RESOURCES_COLLECTION_NAME","org_rolesV1"),a(s,"ORG_ROLE_API_RESOURCES_COLLECTION_NAME","org_roles")},45030:(e,n,t)=>{"use strict";t.d(n,{Z:()=>r});const r=function(e){return e.map((function(e){return e.scopes.map((function(e){return{value:e.name}}))})).reduce((function(e,n){return e.concat(n)}),[])}},60714:e=>{e.exports=[[e.id,".create-console-role-wizard-permissions-form{margin-top:20px}.create-console-role-wizard-permissions-form .oxygen-accordion{border:1px solid var(--oxygen-palette-divider);margin:10px 0}.create-console-role-wizard-permissions-form .oxygen-accordion .permissions-accordion-label{width:40%;flex-shrink:0}.create-console-role-wizard-permissions-form .oxygen-accordion .permissions-table .permissions-table-data-row:last-child td,.create-console-role-wizard-permissions-form .oxygen-accordion .permissions-table .permissions-table-data-row:last-child th{border:none}.create-console-role-wizard-permissions-form .oxygen-accordion .oxygen-accordion-summary .MuiAccordionSummary-content{display:flex;flex-direction:row;flex-wrap:nowrap;align-content:center;align-items:center;justify-content:flex-start}.create-console-role-wizard-permissions-form .accordion-container .oxygen-accordion.Mui-expanded:first-of-type{margin-top:10px}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNyZWF0ZS1jb25zb2xlLXJvbGUtd2l6YXJkLXBlcm1pc3Npb25zLWZvcm0uc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2Q0FBNkMsZUFBZSxDQUFDLCtEQUErRCw4Q0FBOEMsQ0FBQyxhQUFhLENBQUMsNEZBQTRGLFNBQVMsQ0FBQyxhQUFhLENBQUMsd1BBQXdQLFdBQVcsQ0FBQyxzSEFBc0gsWUFBWSxDQUFDLGtCQUFrQixDQUFDLGdCQUFnQixDQUFDLG9CQUFvQixDQUFDLGtCQUFrQixDQUFDLDBCQUEwQixDQUFDLCtHQUErRyxlQUFlIiwiZmlsZSI6ImNyZWF0ZS1jb25zb2xlLXJvbGUtd2l6YXJkLXBlcm1pc3Npb25zLWZvcm0uc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5jcmVhdGUtY29uc29sZS1yb2xlLXdpemFyZC1wZXJtaXNzaW9ucy1mb3Jte21hcmdpbi10b3A6MjBweH0uY3JlYXRlLWNvbnNvbGUtcm9sZS13aXphcmQtcGVybWlzc2lvbnMtZm9ybSAub3h5Z2VuLWFjY29yZGlvbntib3JkZXI6MXB4IHNvbGlkIHZhcigtLW94eWdlbi1wYWxldHRlLWRpdmlkZXIpO21hcmdpbjoxMHB4IDB9LmNyZWF0ZS1jb25zb2xlLXJvbGUtd2l6YXJkLXBlcm1pc3Npb25zLWZvcm0gLm94eWdlbi1hY2NvcmRpb24gLnBlcm1pc3Npb25zLWFjY29yZGlvbi1sYWJlbHt3aWR0aDo0MCU7ZmxleC1zaHJpbms6MH0uY3JlYXRlLWNvbnNvbGUtcm9sZS13aXphcmQtcGVybWlzc2lvbnMtZm9ybSAub3h5Z2VuLWFjY29yZGlvbiAucGVybWlzc2lvbnMtdGFibGUgLnBlcm1pc3Npb25zLXRhYmxlLWRhdGEtcm93Omxhc3QtY2hpbGQgdGQsLmNyZWF0ZS1jb25zb2xlLXJvbGUtd2l6YXJkLXBlcm1pc3Npb25zLWZvcm0gLm94eWdlbi1hY2NvcmRpb24gLnBlcm1pc3Npb25zLXRhYmxlIC5wZXJtaXNzaW9ucy10YWJsZS1kYXRhLXJvdzpsYXN0LWNoaWxkIHRoe2JvcmRlcjpub25lfS5jcmVhdGUtY29uc29sZS1yb2xlLXdpemFyZC1wZXJtaXNzaW9ucy1mb3JtIC5veHlnZW4tYWNjb3JkaW9uIC5veHlnZW4tYWNjb3JkaW9uLXN1bW1hcnkgLk11aUFjY29yZGlvblN1bW1hcnktY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtd3JhcDpub3dyYXA7YWxpZ24tY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0fS5jcmVhdGUtY29uc29sZS1yb2xlLXdpemFyZC1wZXJtaXNzaW9ucy1mb3JtIC5hY2NvcmRpb24tY29udGFpbmVyIC5veHlnZW4tYWNjb3JkaW9uLk11aS1leHBhbmRlZDpmaXJzdC1vZi10eXBle21hcmdpbi10b3A6MTBweH0iXX0= */","",""]]}}]);