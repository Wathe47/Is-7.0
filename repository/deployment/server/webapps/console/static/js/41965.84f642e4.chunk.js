"use strict";(self.webpackChunk_wso2is_console=self.webpackChunk_wso2is_console||[]).push([[41965,20540],{41965:(e,t,n)=>{n.r(t),n.d(t,{default:()=>an});var i=n(54833),a=n(93129),o=n(3356),l=n(86727),r=n(46440),c=n(17),s=n(67127),u=n(44194),d=n(10479),p=n(47245),m=n(37077),f=n(98170),v=n(24393),g=n(73019),b=n(76316),E=n(76004),y=n.n(E),h=n(71551),C=n(77757),I=n(89141),S=n(6814),A=n(5043),O=n(80254),R=n(59673),w=n(66528),U=n(12950),j=n(26154),P=n(39114),T=n(10909),_=n(19980),N=n(89041),M=n(48166);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},L.apply(this,arguments)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var k=[M.Q.GROUPS_CLAIM_NAME,M.Q.ROLES_CLAIM_NAME,M.Q.APPLICATION_ROLES_CLAIM_NAME,M.Q.GROUPS_CLAIM_URI,M.Q.ROLES_CLAIM_URI,M.Q.APPLICATION_ROLES_CLAIM_URI],x=function(e){var t=e.claimURI,n=e.displayName,i=e.localClaimDisplayName,a=e.localDialect,o=e.updateMapping,r=e.addToMapping,c=e.selectMandatory,p=e.selectRequested,m=e.isDefaultMappingChanged,f=e.mapping,v=e.initialMandatory,g=e.initialRequested,b=e.claimMappingOn,E=e.claimMappingError,y=e.readOnly,h=e.deleteAttribute,C=e.subject,I=e.label,S=e.isOIDCMapping,A=e.duplicatedMappingValues,O=e.onlyOIDCConfigured,R=e["data-testid"],T=(0,d.$)().t,_=D((0,u.useState)(!1),2),N=_[0],M=_[1],Z=D((0,u.useState)(!1),2),x=Z[0],F=Z[1],H=D((0,u.useState)(!1),2),q=H[0],V=H[1],z=D((0,u.useState)(!0),2),$=z[0],G=z[1],W=D((0,u.useState)(t),2),B=W[0],Q=W[1],X=D((0,u.useState)(B),1)[0],K="http://wso2.org/claims";(0,u.useEffect)((function(){V(v)}),[v]),(0,u.useEffect)((function(){G(g)}),[g]),(0,u.useEffect)((function(){(0,s.Z)(null==f?void 0:f.applicationClaim)&&(0,s.Z)(f)&&F(E)}),[E]),(0,u.useEffect)((function(){M(b),Q(t),f&&(r(t,b),null!=f&&f.applicationClaim?(Q(null==f?void 0:f.applicationClaim),o(t,null==f?void 0:f.applicationClaim),m(!0)):o(t,X))}),[b]);var Y=function(){return!(!t||!k.includes(t))||(O?C&&q||y||S:C||y||S)};return u.createElement(w.Z.Row,{"data-testid":R},!a&&u.createElement(w.Z.Cell,null),u.createElement(w.Z.Cell,null,u.createElement("div",null,a?n:i),S?u.createElement(l.kW,{warning:!0,popup:!0},T("applications:edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMappingHint")):"",u.createElement(l.GI,{content:S&&t.startsWith(K)?T("applications:edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t,inverted:!0,trigger:a?u.createElement(l.EK,{compact:!0,withBackground:!1},S&&t.startsWith(K)?T("applications:edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t):u.createElement(l.EK,null,S&&t.startsWith(K)?T("applications:edit.sections.attributes.selection.mappingTable.listItem.faultyAttributeMapping"):t),position:"bottom left"}),u.createElement(l.kW,{warning:!0,hidden:!I},I)),a&&N&&u.createElement(u.Fragment,null,u.createElement(w.Z.Cell,{error:x},u.createElement(U.Z,{placeholder:T("applications:edit.sections.attributes.selection.mappingTable.listItem.fields.claim.placeholder",{name:n}),value:N?B:X,onChange:!y&&function(e){var n,i=null===(n=e.target)||void 0===n?void 0:n.value.replace(/[^\w+$:/.]/g,"");Q(i),o(t,i,!0),F((0,s.Z)(i)),E&&!(0,s.Z)(i)&&F(!1),m(!0)},disabled:!N,readOnly:y,required:!0,error:x||A.includes(B)||A.includes(X)}))),!a&&u.createElement(w.Z.Cell,L({},a&&!N&&{textAlign:"center"},a&&N&&{textAlign:"center"},!a&&{textAlign:"center"}),u.createElement(P.Z,{checked:g||$||C,onClick:y||C?function(){return null}:function(){a||($?(p(t,!1),G(!1),c(t,!1),V(!1)):(G(!0),p(t,!0)))},disabled:!!N&&!q,readOnly:C||y||S})),u.createElement(w.Z.Cell,L({},a&&!N&&{textAlign:"center"},a&&N&&{textAlign:"center"},!a&&{textAlign:"center"}),u.createElement(P.Z,{checked:v||q||C&&!O,onClick:Y()?function(){return null}:function(){a?q?(c(t,!1),V(!1)):(V(!0),c(t,!0)):q?(c(t,!1),V(!1)):(V(!0),c(t,!0),G(!0),p(t,!0))},disabled:!!N&&!$,readOnly:Y()})),y&&!S||!h?null:u.createElement(w.Z.Cell,{textAlign:"right"},u.createElement(l.GI,{trigger:u.createElement(j.Z,{link:!0,className:"list-icon pr-4",size:"large",color:"grey",name:"trash alternate",onClick:h}),position:"top right",content:T("common:remove"),inverted:!0})))},F=n(47018);function H(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var $=function(e){var t=e.selectedClaims,n=e.showAddModal,i=e.setShowAddModal,a=e.availableClaims,o=e.setAvailableClaims,r=e.setInitialSelectedClaims,c=e.updateMappings,s=e["data-testid"],p=(0,d.$)().t,m=q((0,u.useState)([]),2),f=m[0],v=m[1],g=q((0,u.useState)([]),2),b=g[0],E=g[1],y=q((0,u.useState)([]),2),h=y[0],C=y[1],I=q((0,u.useState)(!1),2),S=I[0],R=I[1];(0,u.useEffect)((function(){E(S?h:[])}),[S]),(0,u.useEffect)((function(){if(n){if(t.length>0){var e=(0,A.Z)((0,O.Z)(t,a),"displayName");v(e),C(e)}else{var i=(0,A.Z)(a,"displayName");v(i),C(i)}E(t)}else v([]),C([]),E([])}),[n]);return u.createElement(F.Z,{open:n,size:"large",className:"user-roles attribute-modal","data-testid":s},u.createElement(F.Z.Header,null,p("applications:edit.sections.attributes.selection.addWizard.header"),u.createElement(l.X6,{subHeading:!0,ellipsis:!0,as:"h6"},p("applications:edit.sections.attributes.selection.addWizard.subHeading"))),u.createElement(F.Z.Content,{image:!0},u.createElement(l.IX,{selectionComponent:!0,searchPlaceholder:p("applications:edit.sections.attributes.selection.addWizard.steps.select.transfer.searchPlaceholders.attribute"),handleHeaderCheckboxChange:function(){R(!S)},isHeaderCheckboxChecked:S,handleUnelectedListSearch:function(e){var n=e.target.value;if(n.length>0){var i=f.filter((function(e){return-1!==e.displayName.toLowerCase().indexOf(n.toLowerCase())})),o=f.filter((function(e){return-1!==e.claimURI.toLowerCase().indexOf(n.toLowerCase())}));C((0,A.Z)((0,O.Z)(i,o),"displayName"))}else t.length>0?C((0,A.Z)((0,O.Z)(t,a),"displayName")):C((0,A.Z)(f,"displayName"))},"data-testid":"".concat(s,"-transfer-component")},u.createElement(l.Jv,{selectionComponent:!0,isListEmpty:!(h.length>0),listType:"unselected","data-testid":"".concat(s,"-unselected-transfer-list"),emptyPlaceholderDefaultContent:p("transferList:list.emptyPlaceholders.default")},null==h?void 0:h.map((function(e,t){return u.createElement(l.qT,{handleItemChange:function(){return function(e){var t=H(b);null!=t&&t.includes(e)?(t.splice(t.indexOf(e),1),E(t)):(e.requested=!0,t.push(e),E(t))}(e)},key:e.claimURI,listItem:e.displayName,listItemId:e.id,listItemIndex:e.claimURI,isItemChecked:b.includes(e),showSecondaryActions:!1,showListSubItem:!0,listSubItem:u.createElement(l.EK,{compact:!0,withBackground:!1},e.claimURI),"data-testid":"".concat(s,"-unselected-transfer-list-item-").concat(t)})}))))),u.createElement(F.Z.Actions,null,u.createElement(l.Qj,{onClick:function(){i(!1)},"data-testid":"".concat(s,"-cancel-button")},p("common:cancel")),u.createElement(l.KM,{onClick:function(){var e=H(b),n=t.filter((function(t){return!(null!=e&&e.includes(t))})),a=e.filter((function(e){return!(null!=t&&t.includes(e))}));c(a,n),r(e),o(H(f)),i(!1)},"data-testid":"".concat(s,"-save-button")},p("common:save"))))};$.defaultProps={"data-testid":"application-attribute-selection-wizard"};var G=n(84870),W=n(45481);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){var i;return i=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=B(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==B(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||ee(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ne=function(e){var t=e.claims,n=e.setClaims,i=e.externalClaims,a=e.selectedClaims,o=e.setExternalClaims,r=e.selectedExternalClaims,c=e.setSelectedClaims,s=e.setSelectedExternalClaims,m=e.selectedDialect,f=e.selectedSubjectValue,g=e.setClaimMapping,b=e.createMapping,E=e.removeMapping,y=e.getCurrentMapping,h=e.updateClaimMapping,C=e.addToClaimMapping,S=e.claimConfigurations,M=e.claimMappingOn,L=e.defaultSubjectAttribute,D=e.showClaimMappingRevertConfirmation,Z=e.setClaimMappingOn,k=e.claimMappingError,F=e.readOnly,H=e.updateMappings,q=e.isUserAttributesLoading,V=e.setUserAttributesLoading,z=e.onlyOIDCConfigured,B=e.duplicatedMappingValues,Q=e["data-testid"],K=(0,d.$)().t,ee=(0,l.fQ)().getLink,te=J((0,u.useState)([]),2),ne=te[0],ie=te[1],ae=J((0,u.useState)([]),2),oe=ae[0],le=ae[1],re=J((0,u.useState)(!1),2),ce=re[0],se=re[1],ue=J((0,u.useState)([]),2),de=ue[0],pe=ue[1],me=J((0,u.useState)([]),2),fe=me[0],ve=me[1],ge=J((0,u.useState)(!1),2),be=ge[0],Ee=ge[1],ye=J((0,u.useState)(!1),2),he=ye[0],Ce=ye[1],Ie=J((0,u.useState)(!1),2),Se=Ie[0],Ae=Ie[1],Oe=J((0,u.useState)(),2),Re=Oe[0],we=Oe[1],Ue=(0,u.useRef)(!1),je=v.lD.getInstance(),Pe=(0,p.v9)((function(e){return e.config})),Te=J((0,u.useState)(i),1)[0];(0,u.useEffect)((function(){var e,t=Y(fe);null==S||null===(e=S.claimMappings)||void 0===e||e.map((function(e){if(!fe.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))){var n=oe.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}));n&&t.push(n)}})),s(t),ve(t)}),[S]),(0,u.useEffect)((function(){be&&S&&(m.localDialect&&(ne.length>0||a.length>0)&&V(!1),!m.localDialect&&(oe.length>0||r.length>0)&&V(!1))}),[ne,oe,S,be]);var _e=function(e,t){if(m.localDialect){var n=Y(a);n.forEach((function(n){n.claimURI===e&&(n.mandatory=t)})),c(n)}else{var i=Y(r);i.forEach((function(n){n.claimURI===e&&(n.mandatory=t)})),s(i)}},Ne=function(e,t){if(m.localDialect){var n=Y(a);n.forEach((function(n){n.claimURI===e&&(n.requested=t)})),c(n)}},Me=function(){var e,t=[];"CUSTOM"===(null==S?void 0:S.dialect)?null===(e=S.claimMappings)||void 0===e||e.map((function(e){t.push(e.localClaim.uri)})):"LOCAL"===(null==S?void 0:S.dialect)&&S.requestedClaims.map((function(e){t.push(e.claim.uri)}));return t},Le=function(e){var t;if("CUSTOM"===S.dialect){var n,i=null===(n=S.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===n?void 0:n.applicationClaim;if(i){var a=S.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===i}));if(a)return a.mandatory}}return null===(t=S.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.mandatory},De=function(e){if("CUSTOM"===S.dialect){var t,n=null===(t=S.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.applicationClaim;return!!(n?S.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===n})):S.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))}return!0},Ze=function(){var e,t;return(null==S||null===(e=S.subject)||void 0===e||null===(e=e.claim)||void 0===e?void 0:e.uri)===L&&(null===(t=S.requestedClaims)||void 0===t?void 0:t.findIndex((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===L})))<0},ke=function(){je.publish("application-user-attribute-click-add"),Ce(!0)};(0,u.useEffect)((function(){t&&ie(Y(G.applicationConfig.attributeSettings.attributeSelection.getClaims(t))),i&&le(Y(G.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(i)))}),[t,i]),(0,u.useEffect)((function(){a&&pe(Y(a)),r&&ve(Y(r))}),[a,r]),(0,u.useEffect)((function(){Ue.current||(Ee(!1),function(){if(V(!0),m.localDialect){var e=Me(),a=[],l=[];if(G.applicationConfig.attributeSettings.attributeSelection.getClaims(t).map((function(t){if(!e.includes(t.claimURI)||t.claimURI===L&&Ze())l.push(t);else{var n=X(X({},t),{},{mandatory:Le(t.claimURI),requested:De(t.claimURI)});a.push(n)}})),c(a),n(l),ie(l),"CUSTOM"===(null==S?void 0:S.dialect)){var r=[];S.claimMappings.map((function(e){if(e&&e.localClaim&&(e.localClaim.uri!==L||!Ze())){var t={addMapping:!0,applicationClaim:e.applicationClaim,localClaim:{displayName:e.localClaim.displayName,id:e.localClaim.id,uri:e.localClaim.uri}};r.push(t)}})),g(r)}else{var u=[];a.map((function(e){var t={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};u.push(t)})),g(u)}Ee(!0)}else{var d,p=Me(),f=[],v=[];G.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(i).map((function(e){if(p.includes(e.mappedLocalClaimURI)){var t=X(X({},e),{},{mandatory:Le(e.mappedLocalClaimURI),requested:!0});f.push(t)}else v.push(e)}));var b=Y(fe);null==S||null===(d=S.claimMappings)||void 0===d||d.map((function(e){null==t||t.map((function(t){if(e.localClaim.uri===t.claimURI){var n={claimDialectURI:t.dialectURI,claimURI:t.claimURI,id:t.id,localClaimDisplayName:t.displayName,mandatory:t.mandatory,mappedLocalClaimURI:e.localClaim.uri,requested:t.requested};f.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))||f.push(n)}}))})),ve(b),s(f),o(v),le(v),Ee(!0)}}(),Ue.current=!0)}),[S]);var xe,Fe,He=function(e){if(m.localDialect){var l=a.find((function(t){return t.claimURI===e}));c(a.filter((function(t){return t.claimURI!==e}))),t.find((function(t){return t.claimURI===e}))||n([l].concat(Y(t))),M&&E(e)}else{var u=r.find((function(t){return t.mappedLocalClaimURI===e}));s(r.filter((function(t){return t.mappedLocalClaimURI!==e}))),ve(fe.filter((function(t){return t.mappedLocalClaimURI!==e})));var d=i.find((function(t){return t.mappedLocalClaimURI===e}));d||o([u].concat(Y(i)))}},qe=function(e){we(e),f===Ve(e)&&L!==e?Ae(!0):He(e)},Ve=function(e){if(M){var t=y(e);return void 0!==t?t.applicationClaim:e}return e},ze=function(e){var t=!1;return null==Te||Te.map((function(n){n.mappedLocalClaimURI!==e.mappedLocalClaimURI&&e.mappedLocalClaimURI!==L||(t=!0)})),t};return!q&&S&&be?u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{"data-testid":Q},u.createElement(I.Z.Column,{computer:16,tablet:16,largeScreen:12,widescreen:12},u.createElement(l.X6,{as:"h4"},K("applications:edit.sections.attributes.selection.heading")),u.createElement(l.X6,{as:"h6",color:"grey"},K("applications:edit.sections.attributes.selection.description"),(Fe=void 0,Fe=m.localDialect?ee("develop.applications.editApplication.samlApplication.attributes.learnMore"):ee("develop.applications.editApplication.oidcApplication.attributes.learnMore"),u.createElement(l.eb,{link:Fe},K("common:learnMore")))),a.length>0||r.length>0?u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{className:"user-role-edit-header-segment clearing attributes"},u.createElement(w.Z,{"data-testid":"".concat(Q,"-action-bar"),basic:"very",compact:!0},u.createElement(w.Z.Body,null,u.createElement(w.Z.Row,null,u.createElement(w.Z.Cell,{collapsing:!0,width:"6"},u.createElement(U.Z,{icon:u.createElement(j.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var t=e.target.value;t.length>0?function(e){if(m.localDialect){var t=a.filter((function(t){return-1!==t.displayName.toLowerCase().indexOf(e.toLowerCase())})),n=a.filter((function(t){return-1!==t.claimURI.toLowerCase().indexOf(e.toLowerCase())}));pe((0,A.Z)((0,O.Z)(t,n),"displayName"))}else{var i=r.filter((function(t){return-1!==t.localClaimDisplayName.toLowerCase().indexOf(e.toLowerCase())})),o=r.filter((function(t){return-1!==t.claimURI.toLowerCase().indexOf(e.toLowerCase())}));ve((0,A.Z)((0,O.Z)(i,o),"localClaimDisplayName"))}}(t):m.localDialect?pe(a):ve(r)},placeholder:K("applications:edit.sections.attributes.selection.mappingTable.searchPlaceholder"),floated:"left",size:"small","data-testid":"".concat(Q,"-search")})),m.localDialect&&u.createElement(w.Z.Cell,{textAlign:"right"},u.createElement(P.Z,{toggle:!0,checked:M,onChange:function(){M?ce?D(!0):Z(!1):Z(!0)},label:K("applications:edit.sections.attributes.selection.mappingTable.actions.enable"),readOnly:F,"data-testid":"".concat(Q,"-cliam-mapping-toggle")})),!F&&u.createElement(w.Z.Cell,{textAlign:"right"},u.createElement(T.Z,{size:"medium",icon:"pencil",floated:"right",onClick:ke,"data-testid":"".concat(Q,"-update-button")})))))),B.length>0&&u.createElement(l.v0,{type:"error",content:K("applications:notifications.updateClaimConfig.error.description")}),u.createElement(_.Z,{className:"user-role-edit-header-segment attributes"},u.createElement(I.Z.Row,null,m.localDialect?u.createElement(w.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(Q,"-list"),fixed:!0},u.createElement(w.Z.Header,null,M?u.createElement(w.Z.Row,null,u.createElement(w.Z.HeaderCell,{width:"8"},u.createElement("strong",null,K("applications:edit.sections.attributes.selection.mappingTable.columns.attribute"))),u.createElement(w.Z.HeaderCell,{width:"8"},u.createElement("strong",null,K("applications:edit.sections.attributes.selection.mappingTable.columns.appAttribute")),u.createElement(l.kW,{icon:"info circle",popup:!0},K("applications:edit.sections.attributes.selection.mappingTable.mappedAtributeHint"))),u.createElement(w.Z.HeaderCell,{width:"4",textAlign:"center"},u.createElement("strong",null,K("applications:edit.sections.attributes.selection.mappingTable.columns.mandatory")),u.createElement(l.kW,{icon:"info circle",popup:!0},K("applications:edit.sections.attributes.selection.mandatoryAttributeHint",{productName:Pe.ui.productName}))),u.createElement(w.Z.HeaderCell,{width:"2"})):u.createElement(w.Z.Row,null,u.createElement(w.Z.HeaderCell,{width:"10"},u.createElement("strong",null,K("applications:edit.sections.attributes.selection.mappingTable.columns.attribute"))),u.createElement(w.Z.HeaderCell,{width:"8",textAlign:"center"},u.createElement("strong",null,K("applications:edit.sections.attributes.selection.mappingTable.columns.mandatory")),u.createElement(l.kW,{icon:"info circle",popup:!0},K("applications:edit.sections.attributes.selection.mandatoryAttributeHint",{productName:Pe.ui.productName}))),u.createElement(w.Z.HeaderCell,{width:"2"}))),u.createElement(w.Z.Body,null,null==de?void 0:de.map((function(e){return u.createElement(x,{key:e.id,claimURI:e.claimURI,displayName:e.displayName,mappedURI:e.claimURI,localDialect:m.localDialect,updateMapping:h,addToMapping:C,mapping:y(e.claimURI),isDefaultMappingChanged:se,initialMandatory:f===Ve(e.claimURI)||e.mandatory,initialRequested:e.requested,selectMandatory:_e,selectRequested:Ne,claimMappingOn:M,claimMappingError:k,readOnly:F,subject:f===Ve(e.claimURI),deleteAttribute:function(){qe(e.claimURI)},duplicatedMappingValues:B,"data-testid":e.claimURI})})))):u.createElement(w.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(Q,"-list"),fixed:!0},u.createElement(w.Z.Header,null,u.createElement(w.Z.Row,null,u.createElement(w.Z.HeaderCell,{width:"10"},u.createElement("strong",null,K("applications:edit.sections.attributes.selection.mappingTable.columns.attribute"))),u.createElement(w.Z.HeaderCell,{textAlign:"center",width:"8"},u.createElement("strong",null,K("applications:edit.sections.attributes.selection.mappingTable.columns.mandatory")),u.createElement(l.kW,{icon:"info circle",popup:!0},K("applications:edit.sections.attributes.selection.mandatoryAttributeHint",{productName:Pe.ui.productName}))),u.createElement(w.Z.HeaderCell,{width:"2"}))),u.createElement(w.Z.Body,null,null==fe?void 0:fe.map((function(e){return u.createElement(x,{key:e.id,claimURI:e.claimURI,displayName:e.claimURI,mappedURI:e.mappedLocalClaimURI,localDialect:m.localDialect,initialMandatory:f===e.mappedLocalClaimURI&&!z||e.mandatory,selectMandatory:_e,initialRequested:e.requested,"data-testid":e.claimURI,readOnly:f===e.mappedLocalClaimURI&&!z||!ze(e)||F,localClaimDisplayName:e.localClaimDisplayName,deleteAttribute:function(){return qe(e.mappedLocalClaimURI)},subject:f===e.mappedLocalClaimURI&&!z,isOIDCMapping:!ze(e)})}))))))):u.createElement(_.Z,null,u.createElement(l.$J,{title:G.applicationConfig.attributeSettings.attributeSelection.showAttributePlaceholderTitle&&K("applications:placeholders.emptyAttributesList.title"),subtitle:[K("applications:placeholders.emptyAttributesList.subtitles")],action:!F&&u.createElement(l.KM,{basic:!0,onClick:ke},u.createElement(j.Z,{name:"plus"}),K("applications:placeholders.emptyAttributesList.action")),image:(0,v.jF)().emptyList,imageSize:"tiny","data-testid":"".concat(Q,"-empty-placeholder")})),!F&&G.applicationConfig.attributeSettings.attributeSelection.showShareAttributesHint(m)?u.createElement(l.kW,null,u.createElement(R.c,{i18nKey:"applications:edit.sections.attributes.selection.attributeComponentHint"},"Manage the user attributes you want to share with this application via",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("OIDC_SCOPES"))}}," OpenID Connect Scopes."),"You can map additional attributes under",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",W.Q.OIDC))}}," Attribute."))):u.createElement(l.kW,null,u.createElement(R.c,{i18nKey:"applications:edit.sections.attributes.selection.attributeComponentHintAlt"},"Manage the user attributes you want to share with this application. You can add new attributes and mappings by navigating to",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("LOCAL_CLAIMS"))}}," Attribute."))))),m.localDialect?u.createElement($,{selectedClaims:a,setSelectedClaims:pe,setInitialSelectedClaims:c,showAddModal:he,setShowAddModal:Ce,availableClaims:G.applicationConfig.attributeSettings.attributeSelection.getClaims(t),setAvailableClaims:n,createMapping:b,removeMapping:E,updateMappings:H,"data-testid":"".concat(Q,"-wizard")}):u.createElement(N.K,{selectedExternalClaims:r,setSelectedExternalClaims:ve,setInitialSelectedExternalClaims:s,showAddModal:he,setShowAddModal:Ce,availableExternalClaims:G.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(i),setAvailableExternalClaims:o,"data-testid":"".concat(Q,"-wizard-other-dialects")}),(xe=t.find((function(e){return e.claimURI===L})),u.createElement(l.cV,{onClose:function(){return Ae(!1)},type:"negative",open:Se,primaryAction:K("common:confirm"),secondaryAction:K("common:cancel"),onSecondaryActionClick:function(){Ae(!1)},onPrimaryActionClick:function(){He(Re),Ae(!1)},"data-testid":"".concat(Q,"-delete-confirmation-modal"),closeOnDimmerClick:!1},u.createElement(l.cV.Header,{"data-testid":"".concat(Q,"-delete-confirmation-modal-header")},K("applications:confirmations.removeApplicationUserAttribute.header")),u.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(Q,"-delete-confirmation-modal-message")},K("applications:confirmations.removeApplicationUserAttribute.subHeader")),u.createElement(l.cV.Content,{"data-testid":"".concat(Q,"-delete-confirmation-modal-content")},u.createElement(R.c,{i18nKey:"applications:confirmations.removeApplicationUserAttribute.content",i18nOptions:{default:null==xe?void 0:xe.displayName}},"If you remove this, the subject attribute will be set to the ",u.createElement("strong",null,null==xe?void 0:xe.displayName)))))):null};ne.defaultProps={"data-testid":"application-attribute-selection"};var ie=n(12638);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){var i;return i=function(e,t){if("object"!=ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=ae(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==ae(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e){return function(e){if(Array.isArray(e))return de(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){if(e){if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var pe=function(e){var t=e.claims,n=e.externalClaims,i=e.externalClaimsGroupedByScopes,a=e.setExternalClaimsGroupedByScopes,o=e.setExternalClaims,r=e.unfilteredExternalClaimsGroupedByScopes,c=e.setUnfilteredExternalClaimsGroupedByScopes,s=e.selectedExternalClaims,m=e.selectedDialect,f=e.setSelectedExternalClaims,g=e.selectedSubjectValue,b=e.claimConfigurations,E=e.defaultSubjectAttribute,y=e.readOnly,h=e.isUserAttributesLoading,S=e.setUserAttributesLoading,A=e.onlyOIDCConfigured,O=e["data-testid"],P=e["data-componentid"],T=(0,d.$)().t,_=(0,l.fQ)().getLink,N="openid",M=se((0,u.useState)([]),2),L=M[0],D=M[1],Z=se((0,u.useState)([]),2),k=Z[0],F=Z[1],H=se((0,u.useState)([]),2),q=H[0],V=H[1],z=se((0,u.useState)(""),2),$=z[0],B=z[1],Q=se((0,u.useState)(!1),2),X=Q[0],K=Q[1],Y=(0,u.useRef)(!1),J=(0,p.v9)((function(e){return e.config})),ee=se((0,u.useState)(n),1)[0],te=se((0,u.useState)([N]),2),ne=te[0],ae=te[1];(0,u.useEffect)((function(){var e,t=ce(k);null==b||null===(e=b.claimMappings)||void 0===e||e.map((function(e){if(!k.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}))){var n=L.find((function(t){return(null==t?void 0:t.mappedLocalClaimURI)===e.localClaim.uri}));n&&t.push(n)}})),f(t),F(t)}),[b]),(0,u.useEffect)((function(){if(0!=r.length){var e=[N];r.map((function(t){t.selected&&""!==t.name&&e.push(t.name)})),ae(e)}}),[r]),(0,u.useEffect)((function(){X&&b&&(L.length>0||s.length>0)&&S(!1)}),[L,b,X]),(0,u.useEffect)((function(){n&&D(ce(G.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(n)))}),[n]),(0,u.useEffect)((function(){s&&F(ce(s))}),[s]),(0,u.useEffect)((function(){Y.current||(K(!1),fe(),Y.current=!0)}),[b]);var oe,re=function(e,t){var n=ce(r);n.forEach((function(n){n.claims.forEach((function(n){n.claimURI===e&&(n.mandatory=t)}))})),a(n),c(n),me($)},ue=function(e,t){var n=ce(r);n.forEach((function(n){var i=!1;n.claims.forEach((function(n){n.claimURI===e&&(n.requested=t),n.requested&&(i=!0)})),n.selected=i})),a(n),c(n),me($)},de=function(e,t){var n;null===(n=ce(r).find((function(e){if(e.name===t.value)return e.selected=t.checked,e})))||void 0===n||n.claims.map((function(e){ue(e.claimURI,t.checked),t.checked||re(e.claimURI,t.checked)}))},pe=function(e){var t;if("CUSTOM"===b.dialect){var n,i=null===(n=b.claimMappings.find((function(t){var n;return(null==t||null===(n=t.localClaim)||void 0===n?void 0:n.uri)===e})))||void 0===n?void 0:n.applicationClaim;if(i){var a=b.requestedClaims.find((function(e){var t;return(null==e||null===(t=e.claim)||void 0===t?void 0:t.uri)===i}));if(a)return a.mandatory}}return null===(t=b.requestedClaims.find((function(t){var n;return(null==t||null===(n=t.claim)||void 0===n?void 0:n.uri)===e})))||void 0===t?void 0:t.mandatory},me=function(e){if(""!==e){var t=r.filter((function(t){var n,i;return-1!==(null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(i=t.displayName)||void 0===i?void 0:i.toLowerCase().indexOf(e.toLowerCase()))})),n=ce(r),i=[],o=[];n.forEach((function(n){var a=n.claims.filter((function(t){var n,i,a,o;return-1!==(null===(n=t.claimURI)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(i=t.claimDialectURI)||void 0===i?void 0:i.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(a=t.localClaimDisplayName)||void 0===a?void 0:a.toLowerCase().indexOf(e.toLowerCase()))||-1!==(null===(o=t.mappedLocalClaimURI)||void 0===o?void 0:o.toLowerCase().indexOf(e.toLowerCase()))}));if(void 0!==a&&0!==a.length){i.includes(n.name)||i.push(n.name);var l=le(le({},n),{},{claims:a});o.push(l)}t.map((function(e){e.name===n.name&&0===a.length&&o.push(n)}))})),a(o),V(i)}},fe=function(){var e;S(!0);var i,a,l=(a=[],"CUSTOM"===(null==b?void 0:b.dialect)?null===(i=b.claimMappings)||void 0===i||i.map((function(e){a.push(e.localClaim.uri)})):"LOCAL"===(null==b?void 0:b.dialect)&&b.requestedClaims.map((function(e){a.push(e.claim.uri)})),a),r=[],c=[];G.applicationConfig.attributeSettings.attributeSelection.getExternalClaims(n).map((function(e){if(l.includes(e.mappedLocalClaimURI)){var t=le(le({},e),{},{mandatory:pe(e.mappedLocalClaimURI),requested:!0});r.push(t)}else c.push(e)}));var s=ce(k);null==b||null===(e=b.claimMappings)||void 0===e||e.map((function(e){null==t||t.map((function(t){if(e.localClaim.uri===t.claimURI){var n={claimDialectURI:t.dialectURI,claimURI:t.claimURI,id:t.id,localClaimDisplayName:t.displayName,mandatory:t.mandatory,mappedLocalClaimURI:t.claimURI,requested:t.requested};r.find((function(t){var n;return(null==t?void 0:t.mappedLocalClaimURI)===(null==e||null===(n=e.localClaim)||void 0===n?void 0:n.uri)}))||r.push(n)}}))})),F(s),f(r),D(c),o(c.concat(r)),K(!0)},ve=function(e){var t=!1;return null==ee||ee.map((function(n){n.mappedLocalClaimURI!==e.mappedLocalClaimURI&&e.mappedLocalClaimURI!==E||(t=!0)})),t},ge=function(e){return e.claims.map((function(e){return e.mappedLocalClaimURI})).includes(g)&&g!==E},be=function(e){var t=e.claims.find((function(e){return e.mappedLocalClaimURI==g})).localClaimDisplayName;return t.charAt(0).toUpperCase()+t.slice(1)},Ee=function(e){var t;return u.createElement(ie.Z,{image:!0,as:"h6",className:"header-with-icon","data-testid":"".concat(O,"-item-heading"),"data-componentId":"".concat(P,"-item-heading")},u.createElement(l.JT,{image:u.createElement(l.Xo,{name:e.displayName,size:"mini","data-testid":"".concat(O,"-item-image-inner"),"data-componentId":"".concat(P,"-item-image-inner")}),size:"mini",spaced:"right","data-testid":"".concat(O,"-item-image"),"data-componentId":"".concat(P,"-item-image")}),""===e.name?u.createElement(ie.Z.Content,{className:"align-self-center"},u.createElement(l.kW,{warning:!0,popup:!0,compact:!0},T("applications:edit.sections.attributes.selection.scopelessAttributes.hint")),e.displayName,u.createElement(ie.Z.Subheader,null," "+(null!==(t=e.description)&&void 0!==t?t:""))):u.createElement(ie.Z.Content,{className:ge(e)?"align-self-center":null},ge(e)&&u.createElement(l.kW,{warning:!0,popup:!0,compact:!0},u.createElement(R.c,{i18nKey:"applications:edit.sections.attributes.selection.subjectAttributeSelectedHint",tOptions:{subjectattribute:be(e)}})),e.displayName,u.createElement(ie.Z.Subheader,null,u.createElement(l.EK,{withBackground:!0},e.name))))},ye=function(e){return u.createElement(w.Z,{singleLine:!0,compact:!0,"data-testid":"".concat(O,"-list"),"data-componentId":"".concat(P,"-list"),fixed:!0},u.createElement(w.Z.Header,{className:"table-header-oidc-user-attribute"},u.createElement(w.Z.Row,null,u.createElement(w.Z.HeaderCell,{width:"1"}),u.createElement(w.Z.HeaderCell,{width:"10"},T("applications:edit.sections.attributes.selection.mappingTable.columns.attribute")),u.createElement(w.Z.HeaderCell,{textAlign:"center",width:"4"},T("applications:edit.sections.attributes.selection.mappingTable.columns.requested")),u.createElement(w.Z.HeaderCell,{width:"4"},T("applications:edit.sections.attributes.selection.mappingTable.columns.mandatory"),u.createElement(l.kW,{icon:"info circle",popup:!0},T("applications:edit.sections.attributes.selection.mandatoryAttributeHint",{productName:J.ui.productName}))))),u.createElement(w.Z.Body,null,u.createElement(u.Fragment,null,e.map((function(e){return u.createElement(x,{key:e.id,"data-testid":"".concat(O,"-").concat(e.claimURI),claimURI:e.claimURI,displayName:e.claimURI,mappedURI:e.mappedLocalClaimURI,localDialect:m.localDialect,initialMandatory:g===e.mappedLocalClaimURI&&!A||e.mandatory,selectMandatory:re,selectRequested:ue,initialRequested:e.requested,readOnly:g===e.mappedLocalClaimURI&&!A||!ve(e)||y,localClaimDisplayName:e.localClaimDisplayName,subject:g===e.mappedLocalClaimURI&&g!==E,isOIDCMapping:!ve(e),onlyOIDCConfigured:A})})))))},he=function(e){var t=ce(q);null!=q&&q.includes(e.name)?t=t.filter((function(t){return t!==e.name})):t.push(e.name),V(t)},Ce=function(e){return[{checked:e.selected,defaultChecked:e.selected,disabled:ge(e),onChange:de,popoverText:e.selected?T("applications:edit.sections.attributes.selection.mappingTable.listItem.actions.removeScopeRequested"):T("applications:edit.sections.attributes.selection.mappingTable.listItem.actions.makeScopeRequested"),type:"checkbox popup",value:e.name}]};return!h&&b&&X?u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{"data-testid":O,"data-componentid":P},u.createElement(I.Z.Column,{computer:16,tablet:16,largeScreen:12,widescreen:12},u.createElement(l.X6,{as:"h4"},T("applications:edit.sections.attributes.selection.heading")),u.createElement(l.X6,{as:"h6",color:"grey"},T("applications:edit.sections.attributes.selection.description"),(oe=_("develop.applications.editApplication.oidcApplication.attributes.learnMore"),u.createElement(l.eb,{link:oe},T("common:learnMore")))),u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{className:"user-role-edit-header-segment clearing attributes"},u.createElement(w.Z,{"data-testid":"".concat(O,"-action-bar"),"data-componentid":"".concat(P,"-action-bar"),basic:"very",compact:!0},u.createElement(w.Z.Body,null,u.createElement(w.Z.Row,null,u.createElement(w.Z.Cell,{collapsing:!0,width:"16"},u.createElement(U.Z,{icon:u.createElement(j.Z,{name:"search"}),iconPosition:"left",onChange:function(e){var t=e.target.value;B(t),t.length>0?me(t):(V([]),a(r))},placeholder:T("applications:edit.sections.attributes.selection.mappingTable.searchPlaceholder"),floated:"left",size:"small","data-testid":"".concat(O,"-search"),"data-componentid":"".concat(P,"-search")})),u.createElement(w.Z.Cell,{textAlign:"right"}))))),u.createElement(I.Z.Row,{className:"mb-5"},0!==i.length?u.createElement(l.el,{fluid:!0,"data-testid":"".concat(O,"-oidc-scopes"),"data-componentid":"".concat(P,"-oidc-scopes"),viewType:"table-view"},i.map((function(e){if(""!==e.name)return u.createElement(u.Fragment,{key:e.name},u.createElement(l.el.Title,{id:e.name,"data-testid":"".concat(O,"-").concat(e.name,"-title"),"data-componentid":"".concat(P,"-").concat(e.name,"\n                                                                                    -title"),active:(null==q?void 0:q.includes(e.name))||!1,accordionIndex:e.name,onClick:function(){return he(e)},content:Ee(e),hideChevron:!1,actions:Ce(e),disabled:y}),u.createElement(l.el.Content,{active:(null==q?void 0:q.includes(e.name))||!1,"data-testid":"".concat(O,"-").concat(e.name,"-content"),"data-componentid":"".concat(P,"-").concat(e.name,"\n                                                                                    -content"),children:ye(e.claims),disabled:y}))}))):u.createElement(l.$J,{image:(0,v.jF)().emptySearch,imageSize:"tiny",title:T("applications:edit.sections.attributes.emptySearchResults.title"),subtitle:[T("applications:edit.sections.attributes.emptySearchResults.subtitles.0",{searchQuery:$}),T("applications:edit.sections.attributes.emptySearchResults.subtitles.1")],"data-testid":"".concat(O,"-empty-search-placeholder")})),u.createElement(I.Z.Row,null,u.createElement(l.el,{fluid:!0,"data-testid":"".concat(O,"-oidc-scopes"),"data-componentid":"".concat(P,"-oidc-scopes"),viewType:"table-view"},i.map((function(e){if(""===e.name)return u.createElement(u.Fragment,{key:e.name},u.createElement(l.el.Title,{id:e.name,"data-testid":"".concat(O,"-").concat(e.name,"-title"),"data-componentid":"".concat(P,"-").concat(e.name,"\n                                                                    -title"),active:(null==q?void 0:q.includes(e.name))||!1,accordionIndex:e.name,onClick:function(){return he(e)},content:Ee(e),hideChevron:!1,actions:Ce(e),disabled:y}),u.createElement(l.el.Content,{active:(null==q?void 0:q.includes(e.name))||!1,"data-testid":"".concat(O,"-").concat(e.name,"-content"),"data-componentid":"".concat(P,"-").concat(e.name,"\n                                                                    -content"),children:ye(e.claims),disabled:y}))}))))),u.createElement(l.kW,null,u.createElement(R.c,{i18nKey:"applications:edit.sections.attributes.selection.attributeComponentHint"},"Use",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("OIDC_SCOPES"))}}," OpenID Connect Scopes"),"to manage user attribute to a scope. You can add new attributes by navigating to",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("ATTRIBUTE_MAPPINGS").replace(":type",W.Q.OIDC))}},"Attributes."))))),u.createElement(I.Z.Row,{className:"mt-5"},u.createElement(I.Z.Column,null,u.createElement(I.Z.Row,null,u.createElement(C.Z,null,u.createElement(C.Z.Field,null,u.createElement("div",{className:"display-flex"},u.createElement(l.OR,{className:"copy-input spaced",value:ne.join(" "),"data-componentid":"".concat(P,"-selected-scope-area")}))))))),u.createElement(l.kW,null,u.createElement(R.c,{i18nKey:"applications:edit.sections.attributes.selection.selectedScopesComponentHint"},"Request these scopes from your application to retrieve the user attributes you selected."),_("develop.applications.editApplication.attributeManagement.manageOIDCScopes")&&u.createElement(l.eb,{link:_("develop.applications.editApplication.attributeManagement.manageOIDCScopes")},T("applications:edit.sections.attributes.selection.howToUseScopesHint")))):null};pe.defaultProps={"data-componentid":"application-attribute-selection-oidc","data-testid":"application-attribute-selection-oidc"};var me=n(24184),fe=n(62508),ve=n(14045),ge=n(20812),be=n(61763),Ee=n(6776),ye=n(9261);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){var i;return i=function(e,t){if("object"!=he(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=he(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==he(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Re=function(e){var t,n,i,a,o,r,c=e.applicationTemplateId,m=e.claimConfigurations,f=e.dropDownOptions,v=e.setSubmissionValues,g=e.setSelectedValue,b=e.defaultSubjectAttribute,E=e.triggerSubmission,y=e.initialSubject,h=e.initialRole,C=e.claimMappingOn,I=e.readOnly,S=e.technology,A=e.onlyOIDCConfigured,O=e.oidcInitialValues,w=e["data-componentid"],U=(0,d.$)().t,T=(0,be.Z)().UIConfig,_=(0,p.v9)((function(e){var t;return null===(t=e.config.ui.features)||void 0===t||null===(t=t.applications)||void 0===t?void 0:t.disabledFeatures})),N=Ae((0,u.useState)(),2),M=N[0],L=N[1],D=Ae((0,u.useState)(),2),Z=D[0],k=D[1],x=Ae((0,u.useState)(null!=O&&O.subject?O.subject.subjectType:ye.UH.PUBLIC),2),F=x[0],H=x[1],q=Ae((0,u.useState)(!1),2),V=q[0],z=q[1],$=Ae((0,u.useState)(null==y?void 0:y.useMappedLocalSubject),2),W=$[0],B=$[1],Q=Ae((0,u.useState)(null==y?void 0:y.mappedLocalSubjectMandatory),2),X=Q[0],K=Q[1];(0,u.useEffect)((function(){if(C&&f&&f.length>0)if(Z){var e=f.findIndex((function(e){return(null==e?void 0:e.key)===Z}));if(e>-1){var t;L(null===(t=f[e])||void 0===t?void 0:t.value)}else{var n,i,a=f.findIndex((function(e){return(null==e?void 0:e.key)===b}));L(a>-1?null===(n=f[a])||void 0===n?void 0:n.value:null===(i=f[0])||void 0===i?void 0:i.value)}}else if(M){var o,l=null===(o=f.find((function(e){return(null==e?void 0:e.value)===M})))||void 0===o?void 0:o.key;l&&(k(l),L(M))}else{var r,c;L((null==y||null===(r=y.claim)||void 0===r?void 0:r.uri)||(null===(c=f[0])||void 0===c?void 0:c.value))}else if(M)f&&f.length>0&&f.findIndex((function(e){return(null==e?void 0:e.value)===M}))<0&&L(b);else{var s,u;L((null==y||null===(s=y.claim)||void 0===s?void 0:s.uri)||(null===(u=f[0])||void 0===u?void 0:u.value))}}),[f]),(0,u.useEffect)((function(){F||H(ye.UH.PUBLIC)}),[]),(0,u.useEffect)((function(){M&&(g(M),z(M!==b))}),[M]),(0,u.useEffect)((function(){if(M&&f){var e,t=null===(e=f.find((function(e){return(null==e?void 0:e.value)===M})))||void 0===e?void 0:e.key;k(t)}}),[M]);var Y,J,ee=function(e,t){var n="";return e.map((function(e){e.value===t&&(n=t)})),n},te=function(){return ne()||(0,s.Z)(f)},ne=function(){var e;return!G.applicationConfig.attributeSettings.advancedAttributeSettings.showSubjectAttribute||A&&!(null!=T&&null!==(e=T.legacyMode)&&void 0!==e&&e.applicationOIDCSubjectIdentifier)||A&&!V};return h&&y?u.createElement(ge.l0,{id:"application-attributes-advance-settings-form",uncontrolledForm:!0,initialValues:!A&&{oidcInitialValues:O,subjectAttribute:M},validate:function(e){var t={sectorIdentifierURI:void 0};return null!=e&&e.sectorIdentifierURI&&!ve.URLUtils.isHttpsUrl(e.sectorIdentifierURI)&&(t.sectorIdentifierURI=U("applications:forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.validations.invalid")),t},onSubmit:function(e){!function(e){var t,n,i,a,o,l={oidc:Ie(Ie({},O),{},{subject:{sectorIdentifierUri:e.sectorIdentifierURI,subjectType:F}}),role:{claim:ee(f,e.roleAttribute),includeUserDomain:!!e.role,mappings:[]},subject:{claim:(i=f,a=e.subjectAttribute,o=b,V&&(o=ee(i,a)),o),includeTenantDomain:!!e.subjectIncludeTenantDomain,includeUserDomain:!!e.subjectIncludeUserDomain,mappedLocalSubjectMandatory:X,useMappedLocalSubject:W}},r=G.applicationConfig.attributeSettings.advancedAttributeSettings;!r.showIncludeUserstoreDomainSubject&&delete l.subject.includeUserDomain,!r.showIncludeTenantDomain&&delete l.subject.includeTenantDomain,!r.showValidateLinkedLocalAccount&&delete l.subject.useMappedLocalSubject,!r.showMandateLinkedLocalAccount&&delete l.subject.mappedLocalSubjectMandatory,!r.showRoleMapping&&delete l.role.mappings,!r.showIncludeUserstoreDomainRole&&l.role.includeUserDomain,!r.showRoleAttribute&&delete l.role.claim,null!=l&&null!==(t=l.subject)&&void 0!==t&&t.claim&&""!==(null==l||null===(n=l.subject)||void 0===n?void 0:n.claim)||(l.subject.claim=m.subject.claim.uri),v(l)}(e)},triggerSubmit:function(e){return E(e)}},(!(null!=_&&_.includes("applications.attributes.alternativeSubjectIdentifier"))||!(null!=_&&_.includes("applications.attributes.subjectType")))&&u.createElement(u.Fragment,null,u.createElement(fe.Z,null),u.createElement(l.X6,{hidden:!G.applicationConfig.attributeSettings.advancedAttributeSettings.showSubjectAttribute,as:"h4"},U("applications:forms.advancedAttributeSettings.sections.subject.heading"))),A&&!(null!=_&&_.includes("applications.attributes.alternativeSubjectIdentifier"))&&u.createElement(u.Fragment,null,u.createElement(P.Z,{name:"enableAlternativeSubjectIdentifier",ariaLabel:U("applications:forms.advancedAttributeSettings.sections.subject.fields.alternateSubjectAttribute.label"),"data-componentid":"".concat(w,"-reassign-subject-attribute-checkbox"),checked:V,label:U("applications:forms.advancedAttributeSettings.sections.subject.fields.alternateSubjectAttribute.label"),onClick:function(e,t){return n=null==t?void 0:t.checked,z(n),void L(b);var n},disabled:I}),u.createElement(l.kW,null,u.createElement(R.c,{i18nKey:U("applications:forms.advancedAttributeSettings.sections.subject.fields.alternateSubjectAttribute.hint")},"This option will allow to use an alternate attribute as the subject identifier instead of the ",u.createElement(l.EK,{withBackground:!0},"userid"),"."))),!ne()&&(0,s.Z)(f)&&u.createElement(l.v0,{info:!0},u.createElement(j.Z,{name:"info circle"}),U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.info")),u.createElement(ge.gN.Dropdown,{ariaLabel:"Subject attribute",name:"subjectAttribute",label:U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.label"),placeholder:U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.placeholder"),required:C,value:M,options:f,hidden:te(),readOnly:I,"data-testid":"".concat(w,"-subject-attribute-dropdown"),listen:function(e){L(e?null==e?void 0:e.toString():e)},enableReinitialize:!0,hint:1!==S.length&&c!==Ee.jo.CUSTOM_APPLICATION_OIDC&&c!==Ee.jo.CUSTOM_APPLICATION_SAML?u.createElement(l.kW,{compact:!0},U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hint")):"oauth2"===(null===(Y=S[0])||void 0===Y?void 0:Y.type)||c===Ee.jo.CUSTOM_APPLICATION_OIDC?u.createElement(l.kW,{compact:!0},u.createElement(R.c,{i18nKey:"applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hintOIDC"},"Select which of the shared attributes you want to use as the subject identifier of the user. This represents the ",u.createElement(l.EK,{withBackground:!0},"sub")," claim of the",u.createElement(l.EK,{withBackground:!0},"id_token"),".")):"samlsso"===(null===(J=S[0])||void 0===J?void 0:J.type)||c===Ee.jo.CUSTOM_APPLICATION_SAML?u.createElement(l.kW,{compact:!0},u.createElement(R.c,{i18nKey:"applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hintSAML"},"Select which of the shared attributes you want to use as the subject identifier of the user. This represents the ",u.createElement(l.EK,{withBackground:!0},"subject")," element of the SAML assertion.")):u.createElement(l.kW,{compact:!0},U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectAttribute.hint"))}),u.createElement(ge.gN.CheckboxLegacy,{ariaLabel:"Subject include user domain",name:"subjectIncludeUserDomain",label:U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeUserDomain.label"),required:!1,value:null!=y&&y.includeUserDomain?["includeUserDomain"]:[],readOnly:I,"data-testid":"".concat(w,"-subject-iInclude-user-domain-checkbox"),hidden:(null==_?void 0:_.includes("applications.attributes.alternativeSubjectIdentifier"))||te(),hint:U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeUserDomain.hint")}),u.createElement(ge.gN.CheckboxLegacy,{ariaLabel:"Subject include tenant domain",name:"subjectIncludeTenantDomain",label:U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeTenantDomain.label"),required:!1,value:null!=y&&y.includeTenantDomain?["includeTenantDomain"]:[],readOnly:I,"data-testid":"".concat(w,"-subject-include-tenant-domain-checkbox"),hidden:(null==_?void 0:_.includes("applications.attributes.alternativeSubjectIdentifier"))||te(),hint:U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectIncludeTenantDomain.hint")}),u.createElement(fe.Z,{hidden:!0}),A&&!(null!=_&&_.includes("applications.attributes.subjectType"))&&u.createElement("div",null,u.createElement(l.xv,null,U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectType.label")),Object.keys(ye.UH).map((function(e,t){var n=ye.UH[e];return u.createElement(u.Fragment,null,u.createElement(ge.gN.Radio,{key:t,ariaLabel:"Subject type ".concat(n),name:"subjectType",value:n,label:U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectType."+n+".label"),hint:n===ye.UH.PAIRWISE&&U("applications:forms.advancedAttributeSettings.sections.subject.fields.subjectType."+n+".hint"),checked:F===n,listen:function(){H(n)},readOnly:I,"data-componentId":"".concat(w,"-subject-type-").concat(n,"-radio")}))}))),F===ye.UH.PAIRWISE&&u.createElement(ge.gN.Input,{ariaLabel:"Sector Identifier URI",inputType:"url",name:"sectorIdentifierURI",label:U("applications:forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.label"),required:!1,placeholder:U("applications:forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.placeholder"),hint:U("applications:forms.advancedAttributeSettings.sections.subject.fields.sectorIdentifierURI.hint"),readOnly:I,maxLength:200,minLength:3,width:16,initialValue:null==O||null===(t=O.subject)||void 0===t?void 0:t.sectorIdentifierUri,"data-componentId":"".concat(w,"-sector-identifier-uri")}),G.applicationConfig.attributeSettings.advancedAttributeSettings.isLinkedAccountsEnabled(c)&&u.createElement(u.Fragment,null,u.createElement(fe.Z,null),u.createElement(l.X6,{as:"h4"},U("applications:forms.advancedAttributeSettings.sections.linkedAccounts.heading")),u.createElement(l.X6,{as:"h6",color:"grey"},U("applications:forms.advancedAttributeSettings.sections.linkedAccounts.descriptionFederated"))),u.createElement(ge.gN.CheckboxLegacy,{listen:function(e){B(e)},disabled:X,ariaLabel:"Validate linked local account",name:"validateLinkedLocalAccount",label:U("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.validateLocalAccount.label"),required:!1,value:W?["useMappedLocalSubject"]:[],readOnly:I,"data-testid":"".concat(w,"-validate-linked-local-account-checkbox"),hidden:!G.applicationConfig.attributeSettings.advancedAttributeSettings.isLinkedAccountsEnabled(c)||!G.applicationConfig.attributeSettings.advancedAttributeSettings.showValidateLinkedLocalAccount,hint:U("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.validateLocalAccount.hint")}),G.applicationConfig.attributeSettings.advancedAttributeSettings.isLinkedAccountsEnabled(c)&&G.applicationConfig.attributeSettings.advancedAttributeSettings.showMandateLinkedLocalAccount?u.createElement("div",{className:"ml-3"},u.createElement(ge.gN.CheckboxLegacy,{listen:function(e){K(e)},disabled:!W,ariaLabel:"Mandate linked local account",name:"mandateLinkedLocalAccount",label:U("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.mandateLocalAccount.label"),required:!1,value:X?["mappedLocalSubjectMandatory"]:[],readOnly:I,"data-testid":"".concat(w,"-mandate-linked-local-account-checkbox"),hint:U("applications:forms.advancedAttributeSettings.sections.linkedAccounts.fields.mandateLocalAccount.hint")})):null,u.createElement(fe.Z,{hidden:!G.applicationConfig.attributeSettings.advancedAttributeSettings.showRoleAttribute||!(null!=T&&null!==(n=T.legacyMode)&&void 0!==n&&n.roleMapping)}),G.applicationConfig.attributeSettings.advancedAttributeSettings.showRoleAttribute&&(null==T||null===(i=T.legacyMode)||void 0===i?void 0:i.roleMapping)&&u.createElement(u.Fragment,null,u.createElement(l.X6,{as:"h4"},U("applications:forms.advancedAttributeSettings.sections.role.heading"))),u.createElement(ge.gN.Dropdown,{ariaLabel:"Role attribute",name:"roleAttribute",label:U("applications:forms.advancedAttributeSettings.sections.role.fields.roleAttribute.label"),required:C,value:null==h||null===(a=h.claim)||void 0===a?void 0:a.uri,options:f,readOnly:I,"data-testid":"".concat(w,"-role-attribute-dropdown"),hidden:!G.applicationConfig.attributeSettings.advancedAttributeSettings.showRoleAttribute||!(null!=T&&null!==(o=T.legacyMode)&&void 0!==o&&o.roleMapping),hint:U("applications:forms.advancedAttributeSettings.sections.role.fields.roleAttribute.hint")}),u.createElement(ge.gN.CheckboxLegacy,{ariaLabel:"Role",name:"role",label:U("applications:forms.advancedAttributeSettings.sections.role.fields.role.label"),required:!1,value:null!=h&&h.includeUserDomain?["includeUserDomain"]:[],readOnly:I,"data-testid":"".concat(w,"-role-checkbox"),hidden:!G.applicationConfig.attributeSettings.advancedAttributeSettings.showIncludeUserstoreDomainRole||!(null!=T&&null!==(r=T.legacyMode)&&void 0!==r&&r.roleMapping),hint:U("applications:forms.advancedAttributeSettings.sections.role.fields.role.hint")})):null};Re.defaultProps={"data-componentid":"application-advanced-attribute-settings-form"};var we=n(66112),Ue=n(12742);function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Te=function(e){var t,n=e.initialMappings,i=e.readOnly,r=e.onChange,c=e["data-testid"],s=(0,d.$)().t,m=(0,be.Z)().UIConfig,f=(0,p.I0)(),v=je((0,u.useState)(),2),g=v[0],b=v[1];return(0,u.useEffect)((function(){(0,Ue.Sd)(null).then((function(e){if(200===e.status){var t=e.data;b(t.Resources)}})).catch((function(){f((0,o.V_)({description:s("roles:notifications.fetchRoles.genericError.description"),level:a.QU.ERROR,message:s("roles:notifications.fetchRoles.genericError.message")}))}))}),[n]),u.createElement(u.Fragment,null,(null==m||null===(t=m.legacyMode)||void 0===t?void 0:t.roleMapping)&&u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:10},u.createElement(l.X6,{as:"h5"},s("applications:edit.sections.attributes.roleMapping.heading")),u.createElement(we.e9,{bottomMargin:!1,data:n?n.map((function(e){return{key:e.localRole.includes("/")?e.localRole.split("/")[1]:e.localRole,value:e.applicationRole}})):[],keyType:"dropdown",keyData:g?g.filter((function(e){return!(e.displayName.includes("Application/")||e.displayName.includes("Internal/"))})).map((function(e){return{id:e.displayName,value:e.displayName}})):[],keyName:s("applications:edit.sections.attributes.forms.fields.dynamic.localRole.label"),valueName:s("applications:edit.sections.attributes.forms.fields.dynamic.applicationRole.label"),keyRequiredMessage:s("applications:edit.sections.attributes.forms.fields.dynamic.localRole.validations.empty"),valueRequiredErrorMessage:s("applications:edit.sections.attributes.forms.fields.dynamic.applicationRole.validations.empty"),duplicateKeyErrorMsg:s("applications:edit.sections.attributes.forms.fields.dynamic.applicationRole.validations.duplicate"),readOnly:i,"data-testid":"".concat(c,"-dynamic-field"),listen:function(e){if(r){var t,n=null!==(t=null==e?void 0:e.map((function(e){return{applicationRole:e.value,localRole:e.key.includes("/")?e.key:"Internal/"+e.key}})))&&void 0!==t?t:[];r(n)}}}))))};Te.defaultProps={"data-testid":"application-role-mapping"};var _e=n(35542),Ne=n(19661),Me=n(6606),Le=n(78537);function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){var i;return i=function(e,t){if("object"!=De(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=De(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==De(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(e){return function(e){if(Array.isArray(e))return Ve(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||qe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var ze="http://wso2.org/claims/userid",$e=function(e){var t,n,r,m,f,g,b,E,y=e.appId,h=e.applicationTemplateId,C=e.technology,S=e.featureConfig,O=e.claimConfigurations,R=e.onlyOIDCConfigured,w=e.onUpdate,U=e.readOnly,j=e.inboundProtocolConfig,P=e["data-componentid"],_=(0,d.$)().t,N=(0,p.I0)(),M=(0,p.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.ui)||void 0===t?void 0:t.enableIdentityClaims})),L=He((0,u.useState)(""),2),D=L[0],Z=L[1],k=He((0,u.useState)([]),2),x=k[0],F=k[1],H=He((0,u.useState)(),2),q=H[0],V=H[1],z=He((0,u.useState)(null),2),$=z[0],W=z[1],B=He((0,u.useState)(null),2),Q=B[0],X=B[1],K=He((0,u.useState)([]),2),Y=K[0],J=K[1],ee=He((0,u.useState)(!0),2),te=ee[0],ie=ee[1],ae=He((0,u.useState)([]),2),oe=ae[0],le=ae[1],re=He((0,u.useState)([]),2),ce=re[0],se=re[1],ue=He((0,u.useState)([]),2),de=ue[0],ve=ue[1],ge=He((0,u.useState)(!0),2),be=ge[0],Ee=ge[1],he=He((0,u.useState)([]),2),Ce=he[0],Ie=he[1],Se=He((0,u.useState)([]),2),Ae=Se[0],Oe=Se[1],we=He((0,u.useState)(!1),2),Ue=we[0],je=we[1],Pe=He((0,u.useState)([]),2),De=Pe[0],Ze=Pe[1],xe=He((0,u.useState)(!1),2),qe=xe[0],Ve=xe[1],$e=He((0,u.useState)(!1),2),Ge=$e[0],We=$e[1],Be=He((0,u.useState)(),2),Qe=Be[0],Xe=Be[1],Ke=He((0,u.useState)(),2),Ye=Ke[0],Je=Ke[1],et=He((0,u.useState)(null!==(t=null==O||null===(n=O.role)||void 0===n?void 0:n.mappings)&&void 0!==t?t:[]),2),tt=et[0],nt=et[1],it=He((0,u.useState)(!0),2),at=it[0],ot=it[1],lt=He((0,u.useState)(void 0),2),rt=lt[0],ct=lt[1],st=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),ut=v.lD.getInstance(),dt=(0,Me.KD)(),pt=dt.data,mt=dt.isLoading,ft=dt.isValidating,vt=He((0,u.useState)([]),2),gt=vt[0],bt=vt[1];(0,u.useEffect)((function(){var e=de.filter((function(e){return 0!==oe.filter((function(t){return t.claimURI===e.mappedLocalClaimURI})).length}));e.forEach((function(e){var t=e.mappedLocalClaimURI,n=oe.filter((function(e){return e.claimURI===t}));n&&n[0]&&n[0].displayName&&(e.localClaimDisplayName=n[0].displayName)})),se(e)}),[oe,de]),(0,u.useEffect)((function(){if(!mt&&!ft)return W(pt),It(),St(),void Ot()}),[mt,ft,pt]),(0,u.useEffect)((function(){Ct()}),[ce]),(0,u.useEffect)((function(){(0,s.Z)(x)||(ie(!0),R?At("http://wso2.org/oidc/claim"):(ie(!1),At(D)))}),[R,x]),(0,u.useEffect)((function(){if(Qe){var e=wt();null!==e&&Pt(e)}}),[Qe]),(0,u.useEffect)((function(){"CUSTOM"===(null==O?void 0:O.dialect)&&Ve(!0)}),[O]);var Et,yt=function(e){var t=ce.find((function(t){return t.claimURI===e}));if(t){var n,i=null===(n=O.requestedClaims.find((function(e){var n;return(null==e||null===(n=e.claim)||void 0===n?void 0:n.uri)===t.mappedLocalClaimURI})))||void 0===n?void 0:n.mandatory;if(void 0!==i)return i}return!1},ht=function(e){var t=ce.find((function(t){return t.claimURI===e}));return!!t&&void 0!==O.requestedClaims.find((function(e){var n;return(null==e||null===(n=e.claim)||void 0===n?void 0:n.uri)===t.mappedLocalClaimURI}))},Ct=function(){var e=Fe(ce),t=[],n=[];if(null!=$&&0!==$.length&&0!==oe.length){$.map((function(i){if("openid"!==i.name){var a=[],o=!1;i.claims.map((function(t){e.map((function(e){if(t===e.claimURI){var i=ke(ke({},e),{},{mandatory:yt(e.claimURI),requested:ht(e.claimURI)});i.requested&&(o=!0),a.push(i),n.push(e)}}))}));var l=ke(ke({},i),{},{claims:a,selected:o});t.push(l)}}));var i=e.filter((function(e){return!n.includes(e)})),a=[],o=!1;i.map((function(e){var t=ht(e.claimURI);a.push(ke(ke({},e),{},{mandatory:yt(e.claimURI),requested:ht(e.claimURI)})),o=t})),t.push({claims:a,description:_("applications:edit.sections.attributes.selection.scopelessAttributes.description"),displayName:_("applications:edit.sections.attributes.selection.scopelessAttributes.displayName"),name:_("applications:edit.sections.attributes.selection.scopelessAttributes.name"),selected:o})}J((0,A.Z)(t,"name")),X((0,A.Z)(t,"name")),Ee(!1)},It=function(){ot(!0);var e={"exclude-identity-claims":!M,filter:null,limit:null,offset:null,sort:null};(0,_e.WN)(e).then((function(e){le(e)})).catch((function(){N((0,o.V_)({description:_("claims:local.notifications.fetchLocalClaims.genericError.description"),level:a.QU.ERROR,message:_("claims:local.notifications.fetchLocalClaims.genericError.message")}))})).finally((function(){ot(!1)}))},St=function(){(0,_e.jp)(null).then((function(e){F(e)})).catch((function(){N((0,o.V_)({description:_("claims:dialects.notifications.fetchDialects.genericError.description"),level:a.QU.ERROR,message:_("claims:dialects.notifications.fetchDialects.genericError.message")}))}))},At=function(e){if(null!==e){var t=(l=e,r="",x.map((function(e){e.dialectURI===l&&(r=e.id)})),r),n=!0;e!==D&&(n=!1),V({dialectURI:e,id:t,localDialect:n}),n||null!==(i=t)&&(0,_e.gR)(i,null).then((function(e){ie(!0),Ee(!0),ve(e)})).catch((function(){N((0,o.V_)({description:_("claims:external.notifications.fetchExternalClaims.genericError.description"),level:a.QU.ERROR,message:_("claims:external.notifications.fetchExternalClaims.genericError.message")}))})).finally((function(){ie(!1)}))}var i,l,r},Ot=function(){var e;(0,s.Z)(D)&&Z((e="http://wso2.org/claims",(0,_e.WN)(null).then((function(t){var n=t.slice(0,1)[0].dialectURI;(0,s.Z)(n)||(e=n)})),e))},Rt=function(){var e=[];if(q.localDialect){if(qe){var t=!1,n=[],i=Fe(De);if(De.map((function(e){if(e&&e.localClaim){var i={key:null==e?void 0:e.localClaim.uri,text:u.createElement(Ne.EP,{key:e.localClaim.id,displayName:e.applicationClaim?e.applicationClaim:e.localClaim.uri,claimURI:e.localClaim.uri,value:e.applicationClaim}),value:e.applicationClaim};e.localClaim.uri===ze&&(t=!0),n.push(i)}})),0===i.length||!t){var a=oe.filter((function(e){return e.claimURI===ze}))[0];if(null!=a){var o={key:a.claimURI,text:u.createElement(Ne.EP,{key:a.id,displayName:a.displayName,claimURI:a.claimURI,value:a.claimURI}),value:a.claimURI};n.push(o)}}return(0,A.Z)(n,"key")}var l=!1;if(Ce.map((function(t){var n={key:t.claimURI,text:u.createElement(Ne.EP,{key:t.id,displayName:t.displayName,claimURI:t.claimURI,value:t.claimURI}),value:t.claimURI};e.push(n),t.claimURI===ze&&(l=!0)})),!l){var r=oe.filter((function(e){return e.claimURI===ze}))[0];if(null!=r){var c={key:r.claimURI,text:u.createElement(Ne.EP,{key:r.id,displayName:r.displayName,claimURI:r.claimURI,value:r.claimURI}),value:r.claimURI};e.push(c)}}}else{var s=!1;if(Y.map((function(t){null==t||t.claims.map((function(t){if(t.requested){var n={key:t.claimURI,text:u.createElement(Ne.EP,{key:t.id,displayName:t.localClaimDisplayName,claimURI:t.claimURI,value:t.mappedLocalClaimURI}),value:t.mappedLocalClaimURI};e.push(n),t.mappedLocalClaimURI===ze&&(s=!0)}}))})),!s){var d=[].concat(Fe(ce),Fe(Ae)).filter((function(e){return e.mappedLocalClaimURI===ze}))[0];if(null!=d){var p={key:d.claimURI,text:u.createElement(Ne.EP,{key:d.id,displayName:d.localClaimDisplayName,claimURI:d.claimURI,value:d.mappedLocalClaimURI}),value:d.mappedLocalClaimURI};e.push(p)}}}return(0,A.Z)(e,"value")},wt=function(){var e=[],t=!0;return We(!1),Fe(De).map((function(n){if(n.addMapping)if((0,s.Z)(null==n?void 0:n.applicationClaim))We(!0),t=!1;else{var i,a={applicationClaim:null==n?void 0:n.applicationClaim,localClaim:{uri:null==n||null===(i=n.localClaim)||void 0===i?void 0:i.uri}};e.push(a)}})),t?e:null},Ut=function(e){var t,n,i=null==e?void 0:e.subject.includeUserDomain;return R&&"string"==typeof(null==e||null===(t=e.subject)||void 0===t?void 0:t.claim)&&(null==e||null===(n=e.subject)||void 0===n?void 0:n.claim)===ze&&(i=!1),i},jt=function(e){var t,n,i=null==e?void 0:e.subject.includeTenantDomain;return R&&"string"==typeof(null==e||null===(t=e.subject)||void 0===t?void 0:t.claim)&&(null==e||null===(n=e.subject)||void 0===n?void 0:n.claim)===ze&&(i=!1),i},Pt=function(e){var t,n=!1,i=[],l=null==Qe||null===(t=Qe.subject)||void 0===t?void 0:t.claim;if(q.localDialect?Ce.map((function(t){var n,a,o,r,c=e.length>0?(n=t.claimURI,r=n,(a=e).length>0&&(r=null===(o=a.find((function(e){var t;return(null==e||null===(t=e.localClaim)||void 0===t?void 0:t.uri)===n})))||void 0===o?void 0:o.applicationClaim),r):null;if(c){if(t.requested){var s={claim:{uri:c},mandatory:l&&c===l.toString()?G.applicationConfig.attributeSettings.makeSubjectMandatory:t.mandatory};i.push(s)}}else{var u={claim:{uri:t.claimURI},mandatory:l&&t.claimURI===l.toString()?G.applicationConfig.attributeSettings.makeSubjectMandatory:t.mandatory};i.push(u)}})):Y.map((function(e){null==e||e.claims.map((function(e){if(e.requested){var t={claim:{uri:e.mappedLocalClaimURI},mandatory:e.mandatory};i.find((function(e){return e.claim.uri===t.claim.uri}))||i.push(t)}}))})),e.findIndex((function(e){return e.localClaim.uri===ze}))<0&&l&&l.toString()===ze&&(n=!0),e.length>0&&n){var r={applicationClaim:ze,localClaim:{uri:ze}};e.push(r)}var c={claimConfiguration:{claimMappings:e.length>0?e:[],dialect:e.length>0?"CUSTOM":"LOCAL",requestedClaims:i,role:{claim:{uri:null==Qe?void 0:Qe.role.claim},includeUserDomain:null==Qe?void 0:Qe.role.includeUserDomain,mappings:tt.length>0?tt:[]},subject:{claim:{uri:null==Qe?void 0:Qe.subject.claim},includeTenantDomain:jt(Qe),includeUserDomain:Ut(Qe),mappedLocalSubjectMandatory:null==Qe?void 0:Qe.subject.mappedLocalSubjectMandatory,useMappedLocalSubject:null==Qe?void 0:Qe.subject.useMappedLocalSubject}}},u=null==Qe?void 0:Qe.oidc;(0,s.Z)(c.claimConfiguration.claimMappings)&&delete c.claimConfiguration.claimMappings,(0,s.Z)(c.claimConfiguration.role.mappings)&&delete c.claimConfiguration.role.mappings,G.applicationConfig.attributeSettings.roleMapping||delete c.claimConfiguration.role,G.applicationConfig.excludeSubjectClaim&&R&&delete c.claimConfiguration.subject;var d=function(){N((0,o.V_)({description:_("applications:notifications.updateClaimConfig.genericError.description"),level:a.QU.ERROR,message:_("applications:notifications.updateClaimConfig.genericError.message")}))},p=function(){w(y),N((0,o.V_)({description:_("applications:notifications.updateClaimConfig.success.description"),level:a.QU.SUCCESS,message:_("applications:notifications.updateClaimConfig.success.message")}))};if(!R||c.claimConfiguration.subject.claim.uri===ze||c.claimConfiguration.requestedClaims.map((function(e){return e.claim.uri})).includes(c.claimConfiguration.subject.claim.uri)){var m=!(null==C||!C.find((function(e){return e.type===ye.AI.OAUTH2})));(0,Le.aA)(y,c).then((function(){m?(0,Le.lp)(y,u,ye.AI.OIDC).then(p).catch(d):p()})).catch(d)}else N((0,o.V_)({description:_("applications:notifications.updateClaimConfig.mistmatchAlternativesubjectIdentifierError.description"),level:a.QU.ERROR,message:_("applications:notifications.updateClaimConfig.mistmatchAlternativesubjectIdentifierError.message")}))},Tt=function(e){e?(Ve(!0),je(!1)):(Ve(!1),je(!1))};return te||!q||at&&(0,s.Z)(ce)||be?u.createElement(l.pJ,{padded:"very"},u.createElement(l.pO,{inline:"centered",active:!0})):u.createElement(l.pJ,{padded:"very"},u.createElement(I.Z,{className:"claim-mapping"},u.createElement("div",{className:"form-container with-max-width"},u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:12},R?u.createElement(pe,{claims:oe,externalClaims:ce,externalClaimsGroupedByScopes:Q,setExternalClaimsGroupedByScopes:X,unfilteredExternalClaimsGroupedByScopes:Y,setUnfilteredExternalClaimsGroupedByScopes:J,setExternalClaims:se,selectedExternalClaims:Ae,setSelectedExternalClaims:Oe,selectedDialect:q,selectedSubjectValue:Ye,claimMapping:De,claimConfigurations:O,defaultSubjectAttribute:ze,readOnly:U||!(0,i.Xr)(null==S?void 0:S.applications,null==S||null===(r=S.applications)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.update,st),isUserAttributesLoading:rt,setUserAttributesLoading:ct,onlyOIDCConfigured:R,"data-testid":"".concat(P,"-attribute-selection-oidc"),"data-componentid":"".concat(P,"-attribute-selection-oidc")}):u.createElement(ne,{claims:oe,setClaims:le,externalClaims:ce,setExternalClaims:se,selectedClaims:Ce,selectedExternalClaims:Ae,setSelectedClaims:Ie,setSelectedExternalClaims:Oe,selectedDialect:q,selectedSubjectValue:Ye,claimMapping:De,setClaimMapping:Ze,createMapping:function(e){if(q.localDialect){var t=Fe(De);e.map((function(e){var n={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};t.some((function(t){return t.localClaim.uri===e.claimURI}))||t.push(n),Ze(t)}))}},removeMapping:function(e){var t,n=Fe(De);n.map((function(n){n.localClaim.uri===e&&(t=n)})),t&&(n.splice(n.indexOf(t),1),Ze(n))},updateMappings:function(e,t){if(q.localDialect){var n=Fe(De);e.map((function(e){var t={addMapping:!1,applicationClaim:"",localClaim:{displayName:e.displayName,id:e.id,uri:e.claimURI}};n.some((function(t){return t.localClaim.uri===e.claimURI}))||n.push(t)})),t.map((function(e){var t;n.map((function(n){n.localClaim.uri===e.claimURI&&(t=n)})),t&&n.splice(n.indexOf(t),1)})),Ze(n)}},getCurrentMapping:function(e){var t;return Fe(De).map((function(n){n.localClaim.uri===e&&(t=n)})),t},updateClaimMapping:function(e,t,n){var i=Fe(De),a={},o=[];i.forEach((function(i){i.localClaim.uri===e&&(i.applicationClaim=t),n&&(a[i.applicationClaim]?o.push(i.applicationClaim):a[i.applicationClaim]=!0)})),n&&bt(o),Ze(i)},addToClaimMapping:function(e,t){var n=Fe(De);n.forEach((function(n){n.localClaim.uri===e&&(n.addMapping=t)})),Ze(n)},claimConfigurations:O,claimMappingOn:qe,defaultSubjectAttribute:ze,showClaimMappingRevertConfirmation:je,setClaimMappingOn:Ve,claimMappingError:Ge,readOnly:U||!(0,i.Xr)(null==S?void 0:S.applications,null==S||null===(m=S.applications)||void 0===m||null===(m=m.scopes)||void 0===m?void 0:m.update,st),isUserAttributesLoading:rt,setUserAttributesLoading:ct,onlyOIDCConfigured:R,duplicatedMappingValues:gt,"data-testid":"".concat(P,"-attribute-selection")})))),!1===rt?u.createElement(I.Z,null,u.createElement(I.Z.Row,{columns:1},u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:16},u.createElement(Re,{dropDownOptions:function(){var e=[];if(e=Rt(),R){var t=e.findIndex((function(e){return(null==e?void 0:e.value)===ze}));e=e.filter((function(e,n){return n!==t}))}return e}(),triggerSubmission:function(e){Et=e},claimConfigurations:O,setSubmissionValues:Xe,setSelectedValue:Je,defaultSubjectAttribute:ze,initialRole:null==O?void 0:O.role,initialSubject:null==O?void 0:O.subject,claimMappingOn:qe,readOnly:U||!(0,i.Xr)(null==S?void 0:S.applications,null==S||null===(f=S.applications)||void 0===f||null===(f=f.scopes)||void 0===f?void 0:f.update,st),technology:C,applicationTemplateId:h,onlyOIDCConfigured:R,oidcInitialValues:(0,c.Z)(j,ye.AI.OIDC)?j[ye.AI.OIDC]:void 0,"data-testid":"".concat(P,"-advanced-attribute-settings-form")}))),u.createElement(l.cV,{onClose:function(){return je(!1)},type:"warning",open:Ue,primaryAction:_("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmPrimaryAction"),secondaryAction:_("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmSecondaryAction"),onSecondaryActionClick:function(){return Tt(!0)},onPrimaryActionClick:function(){return Tt(!1)}},u.createElement(l.cV.Header,null,_("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationHeading")),u.createElement(l.cV.Message,{warning:!0},_("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationMessage")),u.createElement(l.cV.Content,null,_("applications:edit.sections.attributes.selection.mappingTable.mappingRevert.confirmationContent"))),!U&&G.applicationConfig.attributeSettings.roleMapping&&u.createElement(Te,{onChange:nt,initialMappings:null==O||null===(g=O.role)||void 0===g?void 0:g.mappings,readOnly:U||!(0,i.Xr)(null==S?void 0:S.applications,null==S||null===(b=S.applications)||void 0===b||null===(b=b.scopes)||void 0===b?void 0:b.update,st),"data-testid":"".concat(P,"-role-mapping")}),!U&&u.createElement(me.di,{when:null==S||null===(E=S.applications)||void 0===E||null===(E=E.scopes)||void 0===E?void 0:E.update},u.createElement(fe.Z,{hidden:!0}),u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:16},u.createElement(T.Z,{primary:!0,size:"small",onClick:function(){ut.publish("application-user-attribute-click-update-button");var e=new Set(De.map((function(e){return e.applicationClaim})));qe&&e.size!==De.length?N((0,o.V_)({description:_("applications:notifications.updateClaimConfig.error.description",{description:"Mapped user attributes cannot be duplicated."}),level:a.QU.ERROR,message:_("applications:notifications.updateClaimConfig.error.message")})):Et()},"data-testid":"".concat(P,"-submit-button")},_("common:update")))))):null)};$e.defaultProps={"data-componentid":"application-attribute-settings"};var Ge=n(84902),We=n(97474),Be=n(79734);function Qe(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||Ke(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Je=function(e){var t,n=e.appId,r=e.provisioningConfigurations,c=e.onUpdate,s=e.featureConfig,m=e.defaultActiveIndexes,f=e.readOnly,g=e["data-testid"],b=(0,d.$)().t,E=(0,Ge.z)().isSuperOrganization,y=(0,p.I0)(),h=Xe((0,u.useState)([]),2),C=h[0],S=h[1],A=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),O=Xe((0,u.useState)(m),2),R=O[0],w=O[1],U=Xe((0,u.useState)(!1),2),j=U[0],P=U[1];return(0,u.useEffect)((function(){if(!f){var e=[];e.push({id:"PRIMARY",name:"PRIMARY"}),E()?(0,We.ow)().then((function(t){e.push.apply(e,Qe(t.data)),S(e)})).catch((function(){S(e)})):S(e)}}),[]),u.createElement(u.Fragment,null,u.createElement(l.X6,{as:"h4"},b("applications:edit.sections.provisioning.inbound.heading")),u.createElement(l.X6,{subHeading:!0,as:"h6"},b("applications:edit.sections.provisioning.inbound.subHeading")),u.createElement(fe.Z,{hidden:!0}),u.createElement(I.Z,null,u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,u.createElement(v.Us,{globalActions:[],authenticators:[{content:u.createElement(Be.yM,{config:r,onSubmit:function(e){P(!0),(0,Le.TH)(n,e).then((function(){y((0,o.V_)({description:b("applications:notifications.updateInboundProvisioningConfig.success.description"),level:a.QU.SUCCESS,message:b("applications:notifications.updateInboundProvisioningConfig.success.message")})),c(n)})).catch((function(){y((0,o.V_)({description:b("applications:notifications.updateInboundProvisioningConfig.genericError.description"),level:a.QU.ERROR,message:b("applications:notifications.updateInboundProvisioningConfig.genericError.message")}))})).finally((function(){P(!1)}))},useStoreList:C,readOnly:f||!(0,i.Xr)(null==s?void 0:s.applications,null==s||null===(t=s.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update,A),"data-testid":"".concat(g,"-form"),isSubmitting:j}),id:"scim",title:"SCIM"}],accordionActiveIndexes:R,accordionIndex:0,handleAccordionOnClick:function(e,t){if(t){var n=Qe(R);if(n.includes(t.accordionIndex)){var i=n.indexOf(t.accordionIndex);n.splice(i,1)}else n.push(t.accordionIndex);w(n)}},"data-testid":"".concat(g,"-inbound-connector-accordion")})))))};Je.defaultProps={"data-testid":"application-inbound-provisioning-configurations",defaultActiveIndexes:[-1]};var et=n(71759),tt=n(45330);function nt(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||at(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||at(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){if(e){if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var lt=function(e){var t,n,i=e.application,r=e.onUpdate,c=e.readOnly,s=e.defaultActiveIndexes,m=e["data-testid"],f=(0,d.$)().t,g=(0,p.I0)(),b=it((0,u.useState)(!1),2),E=b[0],y=b[1],h=it((0,u.useState)(!1),2),C=h[0],S=h[1],A=it((0,u.useState)(!1),2),O=A[0],w=A[1],U=it((0,u.useState)(void 0),2),P=U[0],T=U[1],N=it((0,u.useState)(s),2),M=N[0],L=N[1],D=it((0,l.ZK)(),3),Z=D[0],k=D[1],x=D[2],F=it((0,u.useState)(void 0),2),H=F[0],q=F[1];(0,u.useEffect)((function(){P||(0,et.SN)().then((function(e){T(e.identityProviders)}))}),[]);var V=function(e,t){if(t){var n=nt(M);if(n.includes(t.accordionIndex)){var i=n.indexOf(t.accordionIndex);n.splice(i,1)}else n.push(t.accordionIndex);L(n)}},z=function(e){!function(e,t){w(!0),(0,Le.TH)(e,t).then((function(){g((0,o.V_)({description:f("applications:notifications.updateApplication.success.description"),level:a.QU.SUCCESS,message:f("applications:notifications.updateApplication.success.message")})),r(i.id)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?g((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:f("applications:notifications.updateApplication.error.message")})):g((0,o.V_)({description:f("applications:notifications.updateApplication.genericError.description"),level:a.QU.ERROR,message:f("applications:notifications.updateApplication.genericError.message")}))})).finally((function(){w(!1)}))}(i.id,function(e){var t,n=null==i||null===(t=i.provisioningConfigurations)||void 0===t?void 0:t.outboundProvisioningIdps,a=n.find((function(t){return t.idp===e.idp&&t.connector===e.connector}));return n.splice(n.indexOf(a),1),n.push(e),{provisioningConfigurations:{outboundProvisioningIdps:n}}}(e))};return u.createElement(u.Fragment,null,u.createElement(l.X6,{as:"h4"},f("applications:edit.sections.provisioning.outbound.heading")),u.createElement(l.X6,{subHeading:!0,as:"h6"},f("applications:edit.sections.provisioning.outbound.subHeading")),u.createElement(fe.Z,{hidden:!0}),(null==i||null===(t=i.provisioningConfigurations)||void 0===t||null===(t=t.outboundProvisioningIdps)||void 0===t?void 0:t.length)>0?u.createElement(I.Z,null,!c&&u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,u.createElement(l.KM,{floated:"right",onClick:function(){return y(!0)},"data-testid":"".concat(m,"-new-idp-button")},u.createElement(j.Z,{name:"add"}),f("applications:edit.sections.provisioning.outbound.actions.addIdp")))),u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,null==i||null===(n=i.provisioningConfigurations)||void 0===n||null===(n=n.outboundProvisioningIdps)||void 0===n?void 0:n.map((function(e,t){return u.createElement(v.Us,{key:e.idp,globalActions:!c&&[{icon:"trash alternate",onClick:function(){S(!0),q(e)},type:"icon"}],authenticators:[{content:u.createElement(tt.GH,{initialValues:e,triggerSubmit:null,onSubmit:function(e){z(e)},idpList:P,isEdit:!0,"data-testid":"".concat(m,"-form"),isSubmitting:O}),id:null==e?void 0:e.idp,title:null==e?void 0:e.idp}],accordionActiveIndexes:M,accordionIndex:t,handleAccordionOnClick:V,"data-testid":"".concat(m,"-outbound-connector-accordion")})}))))):u.createElement(I.Z,null,u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,{width:16},u.createElement(_.Z,null,u.createElement(l.$J,{title:f("applications:placeholders.emptyOutboundProvisioningIDPs.title"),image:(0,v.jF)().emptyList,subtitle:[f("applications:placeholders.emptyOutboundProvisioningIDPs.subtitles")],imageSize:"tiny",action:!c&&u.createElement(l.KM,{onClick:function(){return y(!0)}},u.createElement(j.Z,{name:"add"}),f("applications:placeholders.emptyOutboundProvisioningIDPs.action"))}))))),H&&u.createElement(l.cV,{onClose:function(){return S(!1)},type:"negative",open:C,assertion:null==H?void 0:H.idp,assertionHint:u.createElement("p",null,u.createElement(R.c,{i18nKey:"applications:confirmations.deleteOutboundProvisioningIDP.assertionHint",tOptions:{name:null==H?void 0:H.idp}},"Please type ",u.createElement("strong",null,null==H?void 0:H.idp)," to confirm.")),assertionType:"input",primaryAction:"Confirm",secondaryAction:"Cancel",onSecondaryActionClick:function(){S(!1),k(null)},onPrimaryActionClick:function(){return function(e){var t,n=null==i||null===(t=i.provisioningConfigurations)||void 0===t?void 0:t.outboundProvisioningIdps,l=nt(n);l.splice(n.indexOf(e),1);var c={provisioningConfigurations:{outboundProvisioningIdps:l}};(0,Le.TH)(i.id,c).then((function(){g((0,o.V_)({description:f("applications:notifications.updateApplication.success.description"),level:a.QU.SUCCESS,message:f("applications:notifications.updateApplication.success.message")})),r(i.id),S(!1)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?g(k({description:e.response.data.description,level:a.QU.ERROR,message:f("applications:notifications.updateApplication.error.message")})):g(k({description:f("applications:notifications.updateApplication.genericError.description"),level:a.QU.ERROR,message:f("applications:notifications.updateApplication.genericError.message")}))}))}(H)},"data-testid":"".concat(m,"-connector-delete-confirmation-modal"),closeOnDimmerClick:!1},u.createElement(l.cV.Header,{"data-testid":"".concat(m,"-connector-delete-confirmation-modal-header")},f("applications:confirmations.deleteOutboundProvisioningIDP.header")),u.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(m,"-connector-delete-confirmation-modal-message")},f("applications:confirmations.deleteOutboundProvisioningIDP.message")),u.createElement(l.cV.Content,{"data-testid":"".concat(m,"-connector-delete-confirmation-modal-content")},u.createElement("div",{className:"modal-alert-wrapper"}," ",Z&&x),f("applications:confirmations.deleteOutboundProvisioningIDP.content"))),E&&u.createElement(tt.g3,{closeWizard:function(){return y(!1)},application:i,onUpdate:r,"data-testid":"".concat(m,"-idp-create-wizard")}))};lt.defaultProps={"data-testid":"application-outbound-provisioning-configurations",defaultActiveIndexes:[-1]};var rt=function(e){var t,n,a=e.application,o=e.featureConfig,r=e.provisioningConfigurations,c=e.onUpdate,s=e.readOnly,d=e["data-componentid"],m=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),f=(0,u.useMemo)((function(){var e;return(null==a||null===(e=a.provisioningConfigurations)||void 0===e||null===(e=e.outboundProvisioningIdps)||void 0===e?void 0:e.length)>0}),[a]);return u.createElement(l.pJ,{padded:"very"},u.createElement(I.Z,null,u.createElement(I.Z.Row,{columns:1},u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:12},u.createElement(Je,{appId:a.id,provisioningConfigurations:r,onUpdate:c,readOnly:s||!(0,i.Xr)(null==o?void 0:o.applications,null==o||null===(t=o.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update,m),"data-testid":"".concat(d,"-inbound-configuration")}))),f&&u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,{mobile:16,tablet:16,computer:12},u.createElement(lt,{application:a,provisioningConfigurations:r,onUpdate:c,readOnly:s||!(0,i.Xr)(null==o?void 0:o.applications,null==o||null===(n=o.applications)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update,m),"data-testid":"".concat(d,"-outbound-configuration")})))))};rt.defaultProps={"data-componentid":"provisioning-settings"};var ct=n(13639),st=n(39521);function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var pt=function(e){var t,n,r,c,s,m=e.appId,f=e.name,v=e.description,g=e.discoverability,b=e.featureConfig,E=e.hiddenFields,y=e.imageUrl,h=e.accessUrl,C=e.isLoading,I=e.onDelete,S=e.onUpdate,A=e.readOnly,O=e.isManagementApp,w=e.application,U=e["data-componentid"],j=(0,p.I0)(),P=(0,d.$)().t,T=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),_=(0,p.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t?void 0:t.ui})),N=ut((0,u.useState)(!1),2),M=N[0],L=N[1],D=ut((0,u.useState)(!1),2),Z=D[0],k=D[1],x=ut((0,u.useState)(!1),2),F=x[0],H=x[1];return C?u.createElement(l.pJ,{padded:"very"},u.createElement(l.pO,{inline:"centered",active:!0})):u.createElement(u.Fragment,null,u.createElement(l.pJ,{padded:"very"},u.createElement(Be.DU,{name:f,appId:m,application:w,description:v,discoverability:g,onSubmit:function(e){k(!0),(0,Le.hN)(e).then((function(){j((0,o.V_)({description:P("applications:notifications.updateApplication.success.description"),level:a.QU.SUCCESS,message:P("applications:notifications.updateApplication.success.message")})),S(m)})).catch((function(e){e.response&&e.response.data&&e.response.data.description?j((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:P("applications:notifications.updateApplication.error.message")})):j((0,o.V_)({description:P("applications:notifications.updateApplication.genericError.description"),level:a.QU.ERROR,message:P("applications:notifications.updateApplication.genericError.message")}))})).finally((function(){k(!1)}))},imageUrl:y,accessUrl:h,hiddenFields:E,readOnly:A||!(0,i.Xr)(null==b?void 0:b.applications,null==b||null===(t=b.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update,T),hasRequiredScope:(0,i.Xr)(null==b?void 0:b.applications,null==b||null===(n=b.applications)||void 0===n||null===(n=n.scopes)||void 0===n?void 0:n.update,T),"data-testid":"".concat(U,"-form"),isSubmitting:Z,isManagementApp:O})),u.createElement(fe.Z,{hidden:!0}),(0,i.Xr)(null==b?void 0:b.applications,null==b||null===(r=b.applications)||void 0===r||null===(r=r.scopes)||void 0===r?void 0:r.update,T)?_.systemAppsIdentifiers.includes(f)?null:G.applicationConfig.editApplication.showDangerZone(w)?null!=w&&null!==(c=w.advancedConfigurations)&&void 0!==c&&c.fragment?null:u.createElement(me.di,{when:null==b||null===(s=b.applications)||void 0===s||null===(s=s.scopes)||void 0===s?void 0:s.delete},u.createElement(l.v9,{sectionHeader:P("applications:dangerZoneGroup.header")},u.createElement(l.cN,{actionTitle:P("applications:dangerZoneGroup.deleteApplication.actionTitle"),header:P("applications:dangerZoneGroup.deleteApplication.header"),subheader:P("applications:dangerZoneGroup.deleteApplication.subheader"),onActionClick:function(){return L(!0)},"data-testid":"".concat(U,"-danger-zone")}))):null:null,u.createElement(l.cV,{onClose:function(){return L(!1)},type:"negative",open:M,assertionHint:P("applications:confirmations.deleteApplication.assertionHint"),assertionType:"checkbox",primaryAction:P("common:confirm"),secondaryAction:P("common:cancel"),onSecondaryActionClick:function(){return L(!1)},onPrimaryActionClick:function(){return H(!0),void(0,Le.rw)(m).then((function(){H(!1),j((0,o.V_)({description:P("applications:notifications.deleteApplication.success.description"),level:a.QU.SUCCESS,message:P("applications:notifications.deleteApplication.success.message")})),L(!1),I()})).catch((function(e){H(!1),e.response&&e.response.data&&e.response.data.description?j((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:P("applications:notifications.deleteApplication.error.message")})):j((0,o.V_)({description:P("applications:notifications.deleteApplication.genericError.description"),level:a.QU.ERROR,message:P("applications:notifications.deleteApplication.genericError.message")}))}))},closeOnDimmerClick:!1,primaryActionLoading:F,"data-testid":"".concat(U,"-application-delete-confirmation-modal")},st.y.isChoreoApplication(w)?u.createElement(u.Fragment,null,u.createElement(l.cV.Header,{"data-testid":"".concat(U,"-application-delete-confirmation-modal-header")},P("applications:confirmations.deleteChoreoApplication.header")),u.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(U,"-application-delete-confirmation-modal-message")},P("applications:confirmations.deleteChoreoApplication.message")),u.createElement(l.cV.Content,{"data-testid":"".concat(U,"-application-delete-confirmation-modal-content")},u.createElement(R.c,{i18nKey:"applications:confirmations.deleteChoreoApplication.content"},"Deleting this application will break the authentication flows and cause the associated Choreo application to be unusable with its credentials.",u.createElement("b",null,"Proceed at your own risk.")))):u.createElement(u.Fragment,null,u.createElement(l.cV.Header,{"data-testid":"".concat(U,"-application-delete-confirmation-modal-header")},P("applications:confirmations.deleteApplication.header")),u.createElement(l.cV.Message,{attached:!0,negative:!0,"data-testid":"".concat(U,"-application-delete-confirmation-modal-message")},P("applications:confirmations.deleteApplication.message")),u.createElement(l.cV.Content,{"data-testid":"".concat(U,"-application-delete-confirmation-modal-content")},P("applications:confirmations.deleteApplication.content")))))};pt.defaultProps={"data-componentid":"application-general-settings"};var mt=n(52391);function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var gt=function(e){var t,n=e.appId,r=e.advancedConfigurations,c=e.featureConfig,s=e.onUpdate,m=e.readOnly,f=e.template,v=e["data-componentid"],g=(0,d.$)().t,b=(0,p.I0)(),E=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),y=ft((0,u.useState)(!1),2),h=y[0],C=y[1];return u.createElement(l.pJ,{className:"advanced-configuration-section",padded:"very"},u.createElement(Be.jw,{config:r,onSubmit:function(e){C(!0),(0,Le.TH)(n,e).then((function(){b((0,o.V_)({description:g("applications:notifications.updateAdvancedConfig.success.description"),level:a.QU.SUCCESS,message:g("applications:notifications.updateAdvancedConfig.success.message")})),s(n)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?b((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:g("applications:notifications.updateAdvancedConfig.error.message")})):b((0,o.V_)({description:g("applications:notifications.updateAdvancedConfig.genericError.description"),level:a.QU.ERROR,message:g("applications:notifications.updateAdvancedConfig.genericError.message")}))})).finally((function(){C(!1)}))},readOnly:m||!(0,i.Xr)(null==c?void 0:c.applications,null==c||null===(t=c.applications)||void 0===t||null===(t=t.scopes)||void 0===t?void 0:t.update,E),template:f,onAlertFired:function(e){b((0,o.V_)(e))},"data-testid":"".concat(v,"-form"),isSubmitting:h}))};gt.defaultProps={"data-componentid":"application-advanced-settings"};var bt=function(e){var t=e.application,n=e.onUpdate,i=e.readOnly;return u.createElement(l.pJ,{className:"advanced-configuration-section",padded:"very"},u.createElement(Be.u4,{application:t,onApplicationSharingCompleted:function(){return n(null==t?void 0:t.id)},readOnly:i}))};bt.defaultProps={"data-componentid":"application-shared-access"};var Et=n(89608),yt=n(56514),ht=n(34148),Ct=n(65735);function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return St(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var At=ht.AsgardeoSPAClient.getInstance(),Ot=function(e){var t,n=(0,d.$)().t,i=(0,p.I0)(),r=(0,p.v9)((function(e){return e.config.ui.features})),c=e.oidcConfigurations,s=e.templateId,m=e["data-testid"],f=It((0,u.useState)(void 0),2),v=f[0],g=f[1];return(0,u.useEffect)((function(){void 0===v&&At.getOIDCServiceEndpoints().then((function(e){g({authorize:null==e?void 0:e.authorizationEndpoint,jwks:null==e?void 0:e.jwksUri,logout:null==e?void 0:e.endSessionEndpoint,oidcSessionIFrame:null==e?void 0:e.checkSessionIframe,revoke:null==e?void 0:e.revocationEndpoint,token:null==e?void 0:e.tokenEndpoint})})).catch((function(){i((0,o.V_)({description:n("applications:notifications.fetchOIDCServiceEndpoints.genericError.description"),level:a.QU.ERROR,message:n("applications:notifications.fetchOIDCServiceEndpoints.genericError.message")}))}))})),u.createElement(C.Z,null,u.createElement(I.Z,{verticalAlign:"middle"},u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-introspection-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.issuer"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.tokenEndpoint,"data-testid":"".concat(m,"-introspection-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.wellKnown,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-introspection-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.wellKnown"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.wellKnownEndpoint,"data-testid":"".concat(m,"-introspection-readonly-input")}))),s!==Ee.jo.M2M_APP_TEMPLATE_ID&&u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.authorize,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-authorize-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.authorize"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.authorizeEndpoint,"data-testid":"".concat(m,"-authorize-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.token,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-token-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.token"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.tokenEndpoint,"data-testid":"".concat(m,"-token-readonly-input")}))),s!==Ee.jo.M2M_APP_TEMPLATE_ID&&u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.userInfo,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-userInfo-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.userInfo"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.userEndpoint,"data-testid":"".concat(m,"-userInfo-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.introspect,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-introspection-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.introspection"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.introspectionEndpoint,"data-testid":"".concat(m,"-introspection-readonly-input")}))),s!==Ee.jo.M2M_APP_TEMPLATE_ID&&u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.jwks,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-jwks-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.jwks"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.jwksEndpoint,"data-testid":"".concat(m,"-jwks-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.revoke,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-token-revoke-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.revoke"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.tokenRevocationEndpoint,"data-testid":"".concat(m,"-token-revoke-readonly-input")}))),s!==Ee.jo.M2M_APP_TEMPLATE_ID&&u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.logout,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-logout-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.endSession"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.endSessionEndpoint,"data-testid":"".concat(m,"-logout-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.par,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-pushed-authorization-request-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.pushedAuthorizationRequest"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.pushedAuthorizationRequestEndpoint,"data-testid":"".concat(m,"-pushed-authorization-request-readonly-input")})))),(null==r||null===(t=r.server)||void 0===t?void 0:t.enabled)&&u.createElement(u.Fragment,null,(s===Ee.jo.CUSTOM_APPLICATION_OIDC||s===Ee.jo.TEMPLATE_IDS.get("oidcWeb")||s===Ee.jo.TEMPLATE_IDS.get("spa"))&&u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.sessionIframe,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(m,"-session-iframe-label")},n("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.sessionIframe"))),u.createElement(I.Z.Column,{mobile:8,computer:10},u.createElement(l.OR,{value:null==c?void 0:c.sessionIframeEndpoint,"data-testid":"".concat(m,"-session-iframe-readonly-input")}))))))};Ot.defaultProps={"data-testid":"applications-help-panel-oidc-configs"};var Rt=n(2659),wt=n(12887),Ut=function(e){var t,n,i=e.samlConfigurations,a=e["data-testid"],o=(0,d.$)().t,r=v.h.getState().config.deployment.tenant,c=(0,p.v9)((function(e){return e.config.ui.features}));return u.createElement(C.Z,null,u.createElement(I.Z,{verticalAlign:"middle"},u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(a,"-issuer-label")},o("applications:helpPanel.tabs.start.content.samlConfigurations.labels.issuer"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==i?void 0:i.issuer,"data-testid":"".concat(a,"-issuer-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:u.createElement(Rt.XT,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(a,"-sso-label")},o("applications:helpPanel.tabs.start.content.samlConfigurations.labels.sso"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==i?void 0:i.ssoUrl,"data-testid":"".concat(a,"-sso-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.logout,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(a,"-slo-label")},o("applications:helpPanel.tabs.start.content.samlConfigurations.labels.slo"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==i?void 0:i.sloUrl,"data-testid":"".concat(a,"-slo-readonly-input")}))),(null==c||null===(t=c.server)||void 0===t?void 0:t.enabled)&&u.createElement(u.Fragment,null,u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.destination,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(a,"-destination-url-label")},o("applications:helpPanel.tabs.start.content.samlConfigurations.labels.destinationURL"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==i||null===(n=i.destinationURLs)||void 0===n||null===(n=n.toString())||void 0===n?void 0:n.replace(/,/g,", "),"data-testid":"".concat(a,"-destination-url-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:u.createElement(Rt.hb,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(a,"-artifact-resolution-url-label")},o("applications:helpPanel.tabs.start.content.samlConfigurations.labels.artifactResolutionUrl"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==i?void 0:i.artifactResolutionUrl,"data-testid":"".concat(a,"-artifact-resolution-url-readonly-input")})))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.certificate,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(a,"-certificate-label")},o("applications:helpPanel.tabs.start.content.samlConfigurations.labels.certificate"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(T.Z,{"data-testid":"".concat(a,"-certificate-button"),className:"idp-certificate-download-button",basic:!0,size:"tiny",color:"orange",onClick:function(){return ve.CertificateManagementUtils.exportCertificate(r,null==i?void 0:i.certificate)}},u.createElement(j.Z,{name:"download"}),o("applications:helpPanel.tabs.start.content.samlConfigurations.buttons.certificate")))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:u.createElement(Rt.$l,{className:"icon"}),size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-testid":"".concat(a,"-metadata-label")},o("applications:helpPanel.tabs.start.content.samlConfigurations.labels.metadata"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(T.Z,{"data-testid":"".concat(a,"-metadata-button"),basic:!0,size:"tiny",color:"orange",onClick:function(){var e=new Blob([null==i?void 0:i.metadata],{type:"text/xml"});(0,wt.saveAs)(e,"SAML-Metadata.xml")}},u.createElement(j.Z,{name:"download"}),o("applications:helpPanel.tabs.start.content.samlConfigurations.buttons.metadata"))))))};Ut.defaultProps={"data-testid":"applications-help-panel-saml-configs"};var jt=function(e){var t=e.oidcConfigurations,n=e["data-componentid"],i=(0,d.$)().t;return u.createElement(u.Fragment,null,u.createElement(I.Z,{verticalAlign:"middle"},u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.par,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-componentid":"".concat(n,"-mtls-pushed-authorization-request-label")},i("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.pushedAuthorizationRequest"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==t?void 0:t.mtlsPushedAuthorizationRequestEndpoint,"data-componentid":"".concat(n,"-mtls-pushed-authorization-request-readonly-input")}))),u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:6},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.token,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-componentid":"".concat(n,"-mtls-token-label")},i("applications:helpPanel.tabs.start.content.oidcConfigurations.labels.token"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:10},u.createElement(l.OR,{value:null==t?void 0:t.mtlsTokenEndpoint,"data-componentid":"".concat(n,"-mtls-token-readonly-input")})))))};jt.defaultProps={"data-componentid":"applications-help-panel-mtls-oidc-configs"};var Pt=n(67442),Tt=n(93474);function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Mt=function(e){var t=e["data-componentid"],n=(0,d.$)().t,i=(0,p.I0)(),r=_t((0,u.useState)(void 0),2),c=r[0],s=r[1],m=(0,Tt.x)(),f=m.data,v=m.isLoading,g=m.error;(0,u.useEffect)((function(){f instanceof Pt.u||g?b():f&&s({passiveStsUrl:f.passiveSTSUrl})}),[f]);var b=function(){i((0,o.V_)({description:n("wsFederationConfig:notifications.getConfiguration.error.description"),level:a.QU.ERROR,message:n("wsFederationConfig:notifications.getConfiguration.error.message")}))};return!v&&u.createElement(C.Z,null,u.createElement(I.Z,{verticalAlign:"middle"},u.createElement(I.Z.Row,{columns:2},u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:5},u.createElement(l.dn,{icon:(0,Ct.RO)().endpoints.issuer,size:"micro",square:!0,transparent:!0,inline:!0,className:"left-icon",verticalAlign:"middle",spaced:"right"}),u.createElement("label",{"data-componentid":"".concat(t,"-issuer-label")},n("applications:helpPanel.tabs.start.content.wsFedConfigurations.labels.passiveSTSUrl"))),u.createElement(I.Z.Column,{mobile:8,tablet:8,computer:11},u.createElement(l.OR,{value:null==c?void 0:c.passiveStsUrl,"data-componentid":"".concat(t,"-passive-sts-readonly-input")})))))};function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Mt.defaultProps={"data-componentid":"applications-help-panel-ws-federation-configs"};var Zt=function(e){var t=e.appId,n=e.inboundProtocols,i=e.isOIDCConfigLoading,a=e.isSAMLConfigLoading,o=e.templateId,r=e["data-componentid"],c=(0,p.v9)((function(e){return e.application.oidcConfigurations})),s=(0,p.v9)((function(e){return e.application.samlConfigurations})),m=(0,d.$)().t,f=(0,l.fQ)().getLink,g=Lt((0,u.useState)(!1),2),b=g[0],E=g[1],y=Lt((0,u.useState)(!1),2),h=y[0],C=y[1],S=Lt((0,u.useState)(!1),2),A=S[0],O=S[1],R=Lt((0,u.useState)(!1),2),w=R[0],U=R[1],j=void 0!==c.mtlsTokenEndpoint;return(0,u.useEffect)((function(){null!=n&&n.length>0&&n.map((function(e){"oauth2"==e.type&&(E(!0),U(i)),"samlsso"==e.type&&(C(!0),U(a)),"passivests"==e.type&&O(!0)}))}),[n]),(0,u.useEffect)((function(){o===Ee.jo.CUSTOM_APPLICATION_PASSIVE_STS&&O(!0)}),[o]),w?u.createElement(l.pJ,{padded:"very"},u.createElement(l.pO,{inline:"centered",active:!0})):u.createElement(l.pJ,{loading:w,padded:"very","data-testid":r},u.createElement(I.Z,{className:"form-container with-max-width"},u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,(b||o===Et.id||o===Ee.jo.CUSTOM_APPLICATION_OIDC)&&u.createElement(u.Fragment,null,u.createElement(l.X6,{ellipsis:!0,as:"h4"},m("applications:edit.sections.info.oidcHeading")),u.createElement(l.X6,{as:"h6",color:"grey",compact:!0},m("applications:edit.sections.info.oidcSubHeading"),u.createElement(l.eb,{link:o===yt.id?f("develop.applications.editApplication.singlePageApplication.info.learnMore"):f("develop.applications.editApplication.oidcApplication.info.learnMore")},m("common:learnMore"))),u.createElement(fe.Z,{hidden:!0}),u.createElement(Ot,{oidcConfigurations:c,templateId:o}),G.applicationConfig.advancedConfigurations.showMtlsAliases&&j&&u.createElement(u.Fragment,null,u.createElement(l.X6,{ellipsis:!0,as:"h4"},m("applications:edit.sections.info.mtlsOidcHeading")),u.createElement(l.X6,{as:"h6",color:"grey",compact:!0},m("applications:edit.sections.info.mtlsOidcSubHeading"),"Navigate to",u.createElement(l.rU,{external:!1,onClick:function(){v.m8.push(v.$x.getPaths().get("APPLICATION_SIGN_IN_METHOD_EDIT").replace(":id",t).replace(":tabName","#tab=".concat(1)))}}," protocol "),"tab to configure MTLS and certificate token binding."),u.createElement(fe.Z,{hidden:!0}),u.createElement(jt,{oidcConfigurations:c,templateId:o}))),b&&h?u.createElement(u.Fragment,null,u.createElement(fe.Z,{className:"x2",hidden:!0})):null,(h||o===Ee.jo.CUSTOM_APPLICATION_SAML)&&u.createElement(u.Fragment,null,u.createElement(l.X6,{ellipsis:!0,as:"h4"},m("applications:edit.sections.info.samlHeading")),u.createElement(l.X6,{as:"h6",color:"grey",compact:!0},m("applications:edit.sections.info.samlSubHeading"),u.createElement(l.eb,{link:f("develop.applications.editApplication.samlApplication.info.learnMore")},m("common:learnMore"))),u.createElement(fe.Z,{hidden:!0}),u.createElement(Ut,{samlConfigurations:s})),A&&u.createElement(u.Fragment,null,u.createElement(l.X6,{ellipsis:!0,as:"h4"},m("applications:edit.sections.info.wsFedHeading")),u.createElement(l.X6,{as:"h6",color:"grey",compact:!0},m("applications:edit.sections.info.wsFedSubHeading"),u.createElement(l.eb,{link:f("develop.applications.editApplication.wsFedApplication.info.learnMore")},m("common:learnMore"))),u.createElement(fe.Z,{hidden:!0}),u.createElement(Mt,null))))))};Zt.defaultProps={"data-componentid":"application-server-endpoints"};var kt=n(66651),xt=n(20540),Ft=n(9958),Ht=n(32459);function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){$t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e,t,n){var i;return i=function(e,t){if("object"!=qt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=qt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==qt(i)?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e){return function(e){if(Array.isArray(e))return Qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||Bt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){if(e){if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(e,t):void 0}}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Xt=function(e){var t,n,r=e.application,c=e.featureConfig,m=e.isLoading,f=e.setIsLoading,g=e.getConfiguredInboundProtocolsList,b=e.getConfiguredInboundProtocolConfigs,E=e.onDelete,A=e.onUpdate,O=e.template,R=e.readOnly,w=e.urlSearchParams,U=e["data-componentid"],j=(0,d.$)().t,P=(0,Ge.z)().isSuperOrganization,T=(0,p.I0)(),_=(0,be.Z)().UIConfig,N=(0,p.v9)((function(e){return e.application.meta.inboundProtocols})),M=(0,p.v9)((function(e){return e.application.oidcConfigurations})),L=(0,p.v9)((function(e){return e.application.samlConfigurations})),D=(0,p.v9)((function(e){return e.config.ui.isClientSecretHashEnabled})),Z=(0,p.v9)((function(e){return e.auth.tenantDomain})),k=(0,p.v9)((function(e){return e.organization.isFirstLevelOrganization})),x=(0,p.v9)((function(e){var t;return null==e||null===(t=e.organization)||void 0===t?void 0:t.organizationType})),F=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),H=Wt((0,u.useState)(!0),2),q=H[0],V=H[1],z=Wt((0,u.useState)(void 0),2),$=z[0],W=z[1],B=Wt((0,u.useState)(void 0),2),Q=B[0],X=B[1],K=Wt((0,u.useState)(!1),2),Y=K[0],J=K[1],ee=Wt((0,u.useState)(void 0),2),te=ee[0],ne=ee[1],ie=Wt((0,u.useState)([]),2),ae=ie[0],oe=ie[1],le=Wt((0,u.useState)(!1),2),re=le[0],ce=le[1],se=Wt((0,u.useState)(!1),2),ue=se[0],de=se[1],pe=Wt((0,u.useState)(!1),2),me=pe[0],fe=pe[1],ve=Wt((0,u.useState)({clientId:"",clientSecret:""}),2),ge=ve[0],he=ve[1],Ce=Wt((0,u.useState)(!1),2),Ie=Ce[0],Se=Ce[1],Ae=Wt((0,u.useState)(!1),2),Oe=Ae[0],Re=Ae[1],we=Wt((0,u.useState)(void 0),2),Ue=we[0],je=we[1],Pe=Wt((0,u.useState)(void 0),2),Te=Pe[0],_e=Pe[1],Ne=Wt((0,u.useState)(void 0),2),Me=Ne[0],De=Ne[1],Ze=Wt((0,u.useState)(!1),2),ke=Ze[0],xe=Ze[1],Fe=(0,kt.Z)().legacyAuthzRuntime,He=v.lD.getInstance(),qe=(null==r||null===(t=r.advancedConfigurations)||void 0===t?void 0:t.fragment)||!1,Ve=Gt(null!==(n=null==_?void 0:_.hiddenAuthenticators)&&void 0!==n?n:[]),ze=(0,p.v9)((function(e){var t;return null===(t=e.config.ui.features.applications)||void 0===t?void 0:t.disabledFeatures})),We=Ee.jo.MY_ACCOUNT_CLIENT_ID===(null==r?void 0:r.clientId)&&!(null!=ze&&ze.includes("applications.myaccount.simplifiedSettings")),Be=(0,Ge.z)().isSubOrganization,Qe=function(e){de(!0),A(e)},Xe=function(){var e=[],t=[];if(!te&&G.applicationConfig.editApplication.extendTabs&&(null==r?void 0:r.templateId)!==Ee.jo.CUSTOM_APPLICATION_OIDC&&(null==r?void 0:r.templateId)!==Ee.jo.CUSTOM_APPLICATION_PASSIVE_STS&&(null==r?void 0:r.templateId)!==Ee.jo.CUSTOM_APPLICATION_SAML)return[];if(te&&te.length>0&&t.push.apply(t,Gt(te)),c){var n,a,o,l,s,d,p,m,f,v,g,b,E;if(!Fe&&We&&e.push({componentId:"overview",menuItem:j("applications:myaccount.overview.tabName"),render:it}),(0,i.cr)(null==c?void 0:c.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_GENERAL_SETTINGS"))&&!Be()&&(Fe||!We))G.applicationConfig.editApplication.isTabEnabledForApp(null==Q||null===(s=Q.oidc)||void 0===s?void 0:s.clientId,ye.wF.GENERAL,Z)&&e.push({componentId:"general",menuItem:u.createElement(h.Z.Item,{"data-tourid":"general"},j("applications:edit.sections.general.tabName")),render:function(){var e;return G.applicationConfig.editApplication.getOveriddenTab(null==Q||null===(e=Q.oidc)||void 0===e?void 0:e.clientId,ye.wF.GENERAL,at(),null==r?void 0:r.name,null==r?void 0:r.id,Z)}});if((0,i.cr)(null==c?void 0:c.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ACCESS_CONFIG"))&&!qe&&(Fe||!We))G.applicationConfig.editApplication.isTabEnabledForApp(null==Q||null===(d=Q.oidc)||void 0===d?void 0:d.clientId,ye.wF.PROTOCOL,Z)&&e.push({componentId:"protocol",menuItem:j("applications:edit.sections.access.tabName"),render:ot});if((0,i.cr)(null==c?void 0:c.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ATTRIBUTE_MAPPING"))&&!qe&&!ke&&(null!=_&&null!==(n=_.legacyMode)&&void 0!==n&&n.applicationSystemAppsSettings||(null==r?void 0:r.name)!==Ee.jo.MY_ACCOUNT_APP_NAME))G.applicationConfig.editApplication.isTabEnabledForApp(null==Q||null===(p=Q.oidc)||void 0===p?void 0:p.clientId,ye.wF.USER_ATTRIBUTES,Z)&&e.push({componentId:"user-attributes",menuItem:u.createElement(h.Z.Item,{"data-tourid":"attributes"},j("applications:edit.sections.attributes.tabName")),render:function(){var e;return G.applicationConfig.editApplication.getOveriddenTab(null==Q||null===(e=Q.oidc)||void 0===e?void 0:e.clientId,ye.wF.USER_ATTRIBUTES,lt(),null==r?void 0:r.name,null==r?void 0:r.id,Z)}});if((0,i.cr)(null==c?void 0:c.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_SIGN_ON_METHOD_CONFIG"))&&!ke)G.applicationConfig.editApplication.isTabEnabledForApp(null==Q||null===(m=Q.oidc)||void 0===m?void 0:m.clientId,ye.wF.SIGN_IN_METHOD,Z)&&e.push({componentId:"sign-in-method",menuItem:u.createElement(h.Z.Item,{"data-tourid":"sign-in-methods"},j("applications:edit.sections.signOnMethod.tabName")),render:ut});if(G.applicationConfig.editApplication.showProvisioningSettings&&(0,i.cr)(null==c?void 0:c.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_PROVISIONING_SETTINGS"))&&!qe&&!ke&&(null!=_&&null!==(a=_.legacyMode)&&void 0!==a&&a.applicationSystemAppsSettings||(null==r?void 0:r.name)!==Ee.jo.MY_ACCOUNT_APP_NAME))G.applicationConfig.editApplication.isTabEnabledForApp(null==Q||null===(f=Q.oidc)||void 0===f?void 0:f.clientId,ye.wF.PROVISIONING,Z)&&e.push({componentId:"provisioning",menuItem:j("applications:edit.sections.provisioning.tabName"),render:ft});if((0,i.cr)(null==c?void 0:c.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_ADVANCED_SETTINGS"))&&!qe&&!ke&&(null!=_&&null!==(o=_.legacyMode)&&void 0!==o&&o.applicationSystemAppsSettings||(null==r?void 0:r.name)!==Ee.jo.MY_ACCOUNT_APP_NAME))G.applicationConfig.editApplication.isTabEnabledForApp(null==Q||null===(v=Q.oidc)||void 0===v?void 0:v.clientId,ye.wF.ADVANCED,Z)&&e.push({componentId:"advanced",menuItem:u.createElement(h.Z.Item,{"data-tourid":"advanced"},j("applications:edit.sections.advanced.tabName")),render:dt});if((0,i.cr)(null==c?void 0:c.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_SHARED_ACCESS"))&&(null==r?void 0:r.templateId)!=Ee.jo.CUSTOM_APPLICATION_PASSIVE_STS&&!qe&&!ke&&G.applicationConfig.editApplication.showApplicationShare&&(k||window.AppUtils.getConfig().organizationName)&&(0,i.Xr)(null==c?void 0:c.applications,null==c||null===(l=c.applications)||void 0===l||null===(l=l.scopes)||void 0===l?void 0:l.update,F)&&x!==Ht.$B.SUBORGANIZATION&&!Ee.jo.SYSTEM_APPS.includes(null==r?void 0:r.clientId))G.applicationConfig.editApplication.isTabEnabledForApp(null==Q||null===(g=Q.oidc)||void 0===g?void 0:g.clientId,ye.wF.INFO,Z)&&(null==_||null===(b=_.legacyMode)||void 0===b?void 0:b.organizations)&&e.push({componentId:"shared-access",menuItem:j("applications:edit.sections.sharedAccess.tabName"),render:vt});if((0,i.cr)(null==c?void 0:c.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT_INFO"))&&!qe&&(Fe||!We))G.applicationConfig.editApplication.isTabEnabledForApp(null==Q||null===(E=Q.oidc)||void 0===E?void 0:E.clientId,ye.wF.INFO,Z)&&e.push({componentId:"info",menuItem:{content:j("applications:edit.sections.info.tabName"),icon:"info circle grey"},render:yt});return t.forEach((function(t){e.splice(t.index,0,t)})),e}return[{componentId:"general",menuItem:j("applications:edit.sections.general.tabName"),render:at},{componentId:"protocol",menuItem:j("applications:edit.sections.access.tabName"),render:ot},{componentId:"user-attributes",menuItem:j("applications:edit.sections.attributes.tabName"),render:lt},{componentId:"sign-in-method",menuItem:j("applications:edit.sections.signOnMethod.tabName"),render:ut},G.applicationConfig.editApplication.showProvisioningSettings&&{componentId:"provisioning",menuItem:j("applications:edit.sections.provisioning.tabName"),render:ft},{componentId:"advanced",menuItem:j("applications:edit.sections.advanced.tabName"),render:dt},{componentId:"shared-access",menuItem:j("applications:edit.sections.sharedAccess.tabName"),render:vt},{componentId:"info",menuItem:{content:j("applications:edit.sections.info.tabName"),icon:"info circle grey"},render:yt}]},Ke=(0,u.useMemo)((function(){return Xe()}),[te,null==r?void 0:r.templateId]);(0,u.useEffect)((function(){if(O){var e=0;if(G.applicationConfig.editApplication.extendTabs&&(e=1),_e(e),(0,s.Z)(window.location.hash)){if(w.get(Ee.jo.APP_STATE_STRONG_AUTH_PARAM_KEY)!==Ee.jo.APP_STATE_STRONG_AUTH_PARAM_VALUE)return void Ye(e);var t=null==Ke?void 0:Ke.findIndex((function(e){return e.componentId===Ee.jo.SIGN_IN_METHOD_TAB_URL_FRAG}));-1!==t&&Je(t)}}}),[O,Ke]),(0,u.useEffect)((function(){(null==O?void 0:O.id)===ye.u.M2M_APPLICATION&&xe(!0)}),[O]),(0,u.useEffect)((function(){if(void 0!==Me&&!window.location.hash.includes(ye.El.VIEW)&&!(0,s.Z)(window.location.hash)){var e=window.location.hash.split("#"+ye.El.TAB_INDEX);if(2===e.length&&(0,s.Z)(e[0])&&/^\d+$/.test(e[1])){var t=parseInt(e[1],10);if(t===Ue)return;Je(t)}else if(window.location.hash.includes(Ee.jo.SIGN_IN_METHOD_TAB_URL_FRAG)){var n=null==Ke?void 0:Ke.findIndex((function(e){return e.componentId===Ee.jo.SIGN_IN_METHOD_TAB_URL_FRAG}));Je(n)}else Ye(Te)}}),[window.location.hash,Me]),(0,u.useEffect)((function(){var e=[];P()&&(0,v.ZY)().then((function(t){t.map((function(t){e.push(t.url)})),oe(e)})).catch((function(e){var t;null!=e&&null!==(t=e.response)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.description?T((0,o.V_)({description:e.response.data.description,level:a.QU.ERROR,message:j("applications:notifications.fetchAllowedCORSOrigins.error.message")})):T((0,o.V_)({description:j("applications:notifications.fetchAllowedCORSOrigins.genericError.description"),level:a.QU.ERROR,message:j("applications:notifications.fetchAllowedCORSOrigins.genericError.message")}))}))}),[re]),(0,u.useEffect)((function(){(0,s.Z)(N)&&(J(!0),st.y.getInboundProtocols(S.oK,!1).finally((function(){J(!1)})))}),[N]),(0,u.useEffect)((function(){null!=r&&r.inboundProtocols&&null!=r&&r.id&&et(r.id)}),[JSON.stringify(null==r?void 0:r.inboundProtocols)]),(0,u.useEffect)((function(){void 0===L&&(Re(!0),st.y.getSAMLApplicationMeta().finally((function(){Re(!1)})))}),[L,Q]),(0,u.useEffect)((function(){void 0===M&&(Se(!0),st.y.getOIDCApplicationMeta().finally((function(){Se(!1)})))}),[M,Q]),(0,u.useEffect)((function(){var e;if((!te||ue)&&null!=r&&r.id&&!q){Q&&L&&L.certificate&&(Q.certificate=L.certificate,Q.ssoUrl=L.ssoUrl,Q.issuer=L.issuer);var t=G.applicationConfig.editApplication.getTabExtensions({application:r,content:null==O||null===(e=O.content)||void 0===e?void 0:e.quickStart,inboundProtocolConfig:Q,inboundProtocols:$,onApplicationUpdate:function(){Qe(null==r?void 0:r.id)},onTriggerTabUpdate:function(e){je(e)},template:O},c,R,Z);ne(t),de(!1)}}),[te,O,r,$,Q,q]),(0,u.useEffect)((function(){w.get(Ee.jo.CLIENT_SECRET_HASH_ENABLED_URL_SEARCH_PARAM_KEY)&&fe(!0)}),[w.get(Ee.jo.CLIENT_SECRET_HASH_ENABLED_URL_SEARCH_PARAM_KEY)]);var Ye=function(e){O.id===Et.id&&e>0?Je(e-1):Je(e)},Je=function(e){v.m8.push({hash:"#".concat(ye.El.TAB_INDEX).concat(e),pathname:window.location.pathname}),je(e)},et=function(e){var t,n={},i=[],l=[],c=[];(null==r||null===(t=r.inboundProtocols)||void 0===t?void 0:t.length)>0?(r.inboundProtocols.forEach((function(t){if("openid"!==t.type){var n=function(e){var t=e;return"oauth2"===t?t=ye.AI.OIDC:"passivests"===t?t=ye.AI.WS_FEDERATION:"wstrust"===t?t=ye.AI.WS_TRUST:"samlsso"===t&&(t=ye.AI.SAML),t}(t.type);c.includes(n)||(c.push(n),l.push((0,Le.S2)(e,n)))}})),V(!0),y().all(l).then(y().spread((function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t.forEach((function(e,t){n=zt(zt({},n),{},$t({},c[t],e)),i.push(c[t])}))}))).catch((function(e){var t,n,i,l;404!==(null==e||null===(t=e.response)||void 0===t?void 0:t.status)&&(null!=e&&e.response&&null!=e&&null!==(n=e.response)&&void 0!==n&&n.data&&null!=e&&null!==(i=e.response)&&void 0!==i&&null!==(i=i.data)&&void 0!==i&&i.description?T((0,o.V_)({description:null===(l=e.response)||void 0===l||null===(l=l.data)||void 0===l?void 0:l.description,level:a.QU.ERROR,message:j("applications:notifications.getInboundProtocolConfig.error.message")})):T((0,o.V_)({description:j("applications:notifications.getInboundProtocolConfig.genericError.description"),level:a.QU.ERROR,message:j("applications:notifications.getInboundProtocolConfig.genericError.message")})))})).finally((function(){!function(e){var t="saml";if(e[t]){var n,i=null===(n=e[t].singleSignOnProfile)||void 0===n?void 0:n.assertion;if(i){var a=i.nameIdFormat;i.nameIdFormat=a.replace(/\//g,":")}}}(n),de(!0),W(i),X(n),V(!1),g(i),b(n)}))):(W([]),X({}),V(!1),g([]),b({}))},tt=function(){null!=r&&r.id&&et(r.id)},nt=function(e){!(0,s.Z)(e)&&e.clientSecret&&e.clientId&&(he({clientId:e.clientId,clientSecret:e.clientSecret}),fe(!0))},it=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(xt.MyAccountOverview,null))},at=function(){var e;return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(pt,{accessUrl:null==r?void 0:r.accessUrl,appId:null==r?void 0:r.id,description:null==r?void 0:r.description,discoverability:null==r||null===(e=r.advancedConfigurations)||void 0===e?void 0:e.discoverableByEndUsers,imageUrl:null==r?void 0:r.imageUrl,name:null==r?void 0:r.name,application:r,isLoading:m,onDelete:E,onUpdate:Qe,featureConfig:c,template:O,readOnly:R||G.applicationConfig.editApplication.getTabPanelReadOnlyStatus("APPLICATION_EDIT_GENERAL_SETTINGS",r),"data-componentid":"".concat(U,"-general-settings"),isManagementApp:r.isManagementApp}))},ot=function(){var e;return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(mt.E,{application:r,allowedOriginList:ae,certificate:null==r||null===(e=r.advancedConfigurations)||void 0===e?void 0:e.certificate,onAllowedOriginsUpdate:function(){return ce(!re)},onApplicationSecretRegenerate:nt,appId:null==r?void 0:r.id,appName:null==r?void 0:r.name,applicationTemplateId:null==r?void 0:r.templateId,extendedAccessConfig:void 0!==te,isLoading:m,setIsLoading:f,onUpdate:Qe,onProtocolUpdate:tt,isInboundProtocolConfigRequestLoading:q,inboundProtocolsLoading:q,inboundProtocolConfig:Q,inboundProtocols:$,featureConfig:c,template:O,readOnly:R||G.applicationConfig.editApplication.getTabPanelReadOnlyStatus("APPLICATION_EDIT_ACCESS_CONFIG",r),isDefaultApplication:Ee.jo.DEFAULT_APPS.includes(null==r?void 0:r.name),isSystemApplication:Ee.jo.SYSTEM_APPS.includes(null==r?void 0:r.name),"data-componentid":"".concat(U,"-access-settings")}))},lt=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement($e,{appId:r.id,technology:r.inboundProtocols,claimConfigurations:r.claimConfiguration,featureConfig:c,onlyOIDCConfigured:((null==r?void 0:r.templateId)===Et.id||(null==r?void 0:r.templateId)===Ee.jo.CUSTOM_APPLICATION_OIDC)&&0===(null==$?void 0:$.length)||1===(null==$?void 0:$.length)&&$[0]===ye.AI.OIDC,onUpdate:Qe,applicationTemplateId:null==r?void 0:r.templateId,inboundProtocolConfig:Q,readOnly:R,"data-componentid":"".concat(U,"-attribute-settings")}))},ut=function(){var e;return u.createElement(Ft.Z,null,u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(ct.I,{application:r,appId:r.id,authenticationSequence:r.authenticationSequence,clientId:null==Q||null===(e=Q.oidc)||void 0===e?void 0:e.clientId,hiddenAuthenticators:Ve,isLoading:m,onUpdate:Qe,featureConfig:c,readOnly:R,"data-componentid":"".concat(U,"-sign-on-methods")})))},dt=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(gt,{appId:r.id,advancedConfigurations:r.advancedConfigurations,onUpdate:Qe,featureConfig:c,readOnly:R,template:O,"data-componentid":"".concat(U,"-advanced-settings")}))},ft=function(){return G.applicationConfig.editApplication.showProvisioningSettings?u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(rt,{application:r,provisioningConfigurations:r.provisioningConfigurations,onUpdate:Qe,featureConfig:c,readOnly:R,"data-componentid":"".concat(U,"-provisioning-settings")})):null},vt=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(bt,{application:r,onUpdate:Qe,readOnly:R,"data-componentid":"".concat(U,"-shared-access")}))},yt=function(){return u.createElement(l.M$.Pane,{controlledSegmentation:!0},u.createElement(Zt,{appId:r.id,inboundProtocols:null==r?void 0:r.inboundProtocols,isOIDCConfigLoading:Ie,isSAMLConfigLoading:Oe,templateId:null==r?void 0:r.templateId,"data-componentid":"".concat(U,"-server-endpoints")}))};return!r||Y||null==$||!te&&G.applicationConfig.editApplication.extendTabs?u.createElement(l.pO,null):u.createElement(u.Fragment,null,u.createElement(l.M$,{isLoading:m,activeIndex:Ue,"data-componentid":"".concat(U,"-resource-tabs"),defaultActiveIndex:Te,onTabChange:function(e,t){He.compute((function(){He.publish("application-switch-edit-application-tabs",{type:t.panes[t.activeIndex].componentId})})),Je(t.activeIndex)},panes:Xe(),onInitialize:function(e){var t=e.panesLength;De(t)}}),me&&function(){if(!D)return null;if(!$.includes(ye.AI.OIDC)||(0,s.Z)(null==Q?void 0:Q.oidc)||!Q.oidc.clientId||!Q.oidc.clientSecret)return null;var e=ge.clientSecret||Q.oidc.clientSecret,t=ge.clientId||Q.oidc.clientId;return u.createElement(l.cV,{"data-componentid":"".concat(U,"-client-secret-hash-disclaimer-modal"),type:"warning",open:!0,primaryAction:j("common:confirm"),onPrimaryActionClick:function(){fe(!1),he({clientId:"",clientSecret:""})}},u.createElement(l.cV.Header,{"data-componentid":"".concat(U,"-client-secret-hash-disclaimer-modal-header")},j("applications:confirmations.clientSecretHashDisclaimer.modal.header")),u.createElement(l.cV.Message,{attached:!0,warning:!0,"data-componentid":"".concat(U,"-client-secret-hash-disclaimer-modal-message")},j("applications:confirmations.clientSecretHashDisclaimer.modal.message")),u.createElement(l.cV.Content,{"data-componentid":"".concat(U,"-client-secret-hash-disclaimer-modal-content")},u.createElement(C.Z,null,u.createElement(I.Z.Row,null,u.createElement(I.Z.Column,null,u.createElement(C.Z.Field,null,u.createElement("label",null,j("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.label")),u.createElement(l.OR,{value:t,hideSecretLabel:j("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.hide"),showSecretLabel:j("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientId.show"),"data-componentid":"".concat(U,"-client-secret-readonly-input")})),u.createElement(C.Z.Field,null,u.createElement("label",null,j("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.label")),u.createElement(l.OR,{secret:!0,value:e,hideSecretLabel:j("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.hide"),showSecretLabel:j("applications:confirmations.clientSecretHashDisclaimer.forms.clientIdSecretForm.clientSecret.show"),"data-componentid":"".concat(U,"-client-secret-readonly-input")})))))))}())};Xt.defaultProps={"data-componentid":"edit-application",getConfiguredInboundProtocolConfigs:function(){return null},getConfiguredInboundProtocolsList:function(){return null}};var Kt=n(76418),Yt=n(74636);function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o,l,r=[],c=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(r.push(i.value),r.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var nn=function(e){var t,n,E,y,h,C=e.location,I=e["data-componentid"],S=new URLSearchParams(C.search),A="isApplicationHelpShown",O=(0,d.$)().t,R=(0,p.I0)(),w=(0,u.useRef)(null),U=(0,p.v9)((function(e){var t;return null==e||null===(t=e.auth)||void 0===t?void 0:t.allowedScopes})),j=(0,p.v9)((function(e){return e.helpPanel.docStructure})),P=(0,p.v9)((function(e){return e.application.templates})),T=(0,p.v9)((function(e){return e.config.ui.features})),_=(0,p.v9)((function(e){return e.auth.tenantDomain})),N=en((0,u.useState)(void 0),2),M=N[0],L=N[1],D=en((0,u.useState)(void 0),2),Z=D[0],k=D[1],x=en((0,u.useState)(void 0),2),F=x[0],H=x[1],q=en((0,u.useState)(void 0),2),V=(q[0],q[1]),z=en((0,u.useState)(void 0),2),$=z[0],G=z[1],W=en((0,u.useState)(!1),2),B=W[0],Q=W[1],X=en((0,u.useState)(!1),2),K=X[0],Y=X[1],J=en((0,u.useState)(),2),ee=J[0],te=J[1],ne=en((0,u.useState)(),2),ie=ne[0],ae=ne[1],oe=en((0,u.useState)(),2),le=oe[0],re=oe[1],ce=(0,b.b)(M,!!M),se=ce.data,ue=ce.mutate,de=ce.isLoading,pe=ce.error;(0,u.useEffect)((function(){H(de)}),[de]),(0,u.useEffect)((function(){var e;pe&&(null!==(e=pe.response)&&void 0!==e&&null!==(e=e.data)&&void 0!==e&&e.description?R((0,o.V_)({description:pe.response.data.description,level:a.QU.ERROR,message:O("applications:notifications.fetchApplication.error.message")})):R((0,o.V_)({description:O("applications:notifications.fetchApplication.genericError.description"),level:a.QU.ERROR,message:O("applications:notifications.fetchApplication.genericError.message")})))}),[pe]),(0,u.useEffect)((function(){if(w||F){var e=null==w?void 0:w.current;e&&e.offsetWidth<e.scrollWidth&&Q(!0)}}),[w,F]);(0,u.useEffect)((function(){var e,t,n,i=null===(e=v.m8.location.pathname)||void 0===e?void 0:e.split("/"),a=i[(null==i?void 0:i.length)-1];n=v.Wj.getUserPreferences(),(0,s.Z)(n)||null!==(t=n.identityAppsSettings)&&void 0!==t&&null!==(t=t.devPortal)&&void 0!==t&&t[A]||(R((0,v.rq)(!0)),function(){var e,t=v.Wj.getUserPreferences();if(!(0,s.Z)(t)&&null!=t&&null!==(e=t.identityAppsSettings)&&void 0!==e&&e.devPortal){var n=(0,r.Z)(t);n.identityAppsSettings.devPortal[A]=!0,v.Wj.setUserPreferences(n)}}()),L(a)}),[]),(0,u.useEffect)((function(){if("object"===Jt(v.m8.location.state)){Y(!0);var e=v.m8.location.state;te(e.id),ae(e.name),(null==e?void 0:e.redirectTo)&&re(e.redirectTo)}})),(0,u.useEffect)((function(){se&&P&&P instanceof Array&&P.length>0?ve():Yt.e.getApplicationTemplates().finally()}),[P,se]),(0,u.useEffect)((function(){var e,t,n;null!=se&&null!==(e=se.advancedConfigurations)&&void 0!==e&&e.fragment||null!=se&&se.templateId||(null==se||null===(t=se.inboundProtocols)||void 0===t?void 0:t.length)>0&&(se.templateId=null!==(n=Kt.Eg.get(se.inboundProtocols[0].type))&&void 0!==n?n:Ee.jo.CUSTOM_APPLICATION_OIDC,ve())}),[F,se]),(0,u.useEffect)((function(){T&&T.applications&&((0,i.cr)(T.applications,Ee.jo.FEATURE_DICTIONARY.get("APPLICATION_EDIT"))||v.m8.push(v.$x.getPaths().get("PAGE_NOT_FOUND")))}),[T]),(0,u.useEffect)((function(){var e;if(Z){var t=(0,c.Z)(j,Ee.jo.EDIT_APPLICATIONS_DOCS_KEY);t&&R((0,v.dv)(null===(e=t[Ee.jo.APPLICATION_TEMPLATE_DOC_MAPPING.get(Z.id)])||void 0===e?void 0:e[Ee.jo.APPLICATION_DOCS_OVERVIEW]))}}),[Z,j]);var me,fe,ve=function(){var e=null==P?void 0:P.find((function(e){return e.id===se.templateId}));se.templateId!==Ee.jo.CUSTOM_APPLICATION_OIDC&&se.templateId!==Ee.jo.CUSTOM_APPLICATION_SAML&&se.templateId!==Ee.jo.CUSTOM_APPLICATION_PASSIVE_STS||(e=null==P?void 0:P.find((function(e){return e.id===Et.id}))),k(e)};return u.createElement(l.O9,{pageTitle:"Edit Application",title:u.createElement(u.Fragment,null,u.createElement("span",null,null==se?void 0:se.name)),contentTopMargin:!0,description:null!==(t=f.applicationConfig.editApplication.getOverriddenDescription(null==$||null===(n=$.oidc)||void 0===n?void 0:n.clientId,_,null==Z?void 0:Z.name))&&void 0!==t?t:u.createElement("div",{className:"with-label ellipsis",ref:w},null!=se&&null!==(fe=se.advancedConfigurations)&&void 0!==fe&&fe.fragment?u.createElement(m.Z,{size:"small"},O("applications:list.labels.fragment")):null!=Z&&Z.name?u.createElement(m.Z,{size:"small"},Z.name):null,st.y.isChoreoApplication(se)&&u.createElement(m.Z,{size:"small",className:"choreo-label no-margin-left"},O("extensions:develop.apiResource.managedByChoreoText")),u.createElement(l.GI,{disabled:!B,content:null==se?void 0:se.description,trigger:u.createElement("span",null,null==se?void 0:se.description)})),image:null!==(E=f.applicationConfig.editApplication.getOverriddenImage(null==$||null===(y=$.oidc)||void 0===y?void 0:y.clientId,_))&&void 0!==E?E:null!=se&&se.imageUrl?u.createElement(l.JT,{name:null==se?void 0:se.name,image:null==se?void 0:se.imageUrl,size:"tiny"}):u.createElement(l.Xo,{name:null==se?void 0:se.name,size:"tiny",floated:"left"}),loadingStateOptions:{count:5,imageType:"square"},isLoading:F,backButton:{"data-componentid":"".concat(I,"-page-back-button"),onClick:function(){K?le===Ee.jo.ROLE_CALLBACK_REDIRECT?v.m8.push({pathname:v.$x.getPaths().get("ROLE_EDIT").replace(":id",ee),state:g.s0.CONNECTED_APPS_TAB_ID}):v.m8.push({pathname:v.$x.getPaths().get("IDP_EDIT").replace(":id",ee),state:g.s0.CONNECTED_APPS_TAB_ID}):v.m8.push(v.$x.getPaths().get("APPLICATIONS"))},text:K?O("idp:connectedApps.applicationEdit.back",{idpName:ie}):O("console:develop.pages.applicationsEdit.backButton")},titleTextAlign:"left",bottomMargin:!1,pageHeaderMaxWidth:!0,"data-componentid":"".concat(I,"-page-layout"),truncateContent:!0,action:u.createElement(u.Fragment,null,f.applicationConfig.editApplication.getActions(null==$||null===(h=$.oidc)||void 0===h?void 0:h.clientId,_,I))},u.createElement(Xt,{application:se,featureConfig:T,isLoading:F,setIsLoading:H,onDelete:function(){v.m8.push(v.$x.getPaths().get("APPLICATIONS"))},onUpdate:function(){ue()},template:Z,"data-componentid":I,urlSearchParams:S,getConfiguredInboundProtocolsList:function(e){V(e)},getConfiguredInboundProtocolConfigs:function(e){G(e)},readOnly:"true"===S.get(Ee.jo.APP_READ_ONLY_STATE_URL_SEARCH_PARAM_KEY)||(null==se?void 0:se.access)===ye.Ch.READ||!(0,i.Xr)(null==T?void 0:T.applications,null==T||null===(me=T.applications)||void 0===me||null===(me=me.scopes)||void 0===me?void 0:me.update,U)}))};nn.defaultProps={"data-componentid":"application-edit"};const an=nn},20540:(e,t,n)=>{n.r(t),n.d(t,{MyAccountOverview:()=>u});var i=n(20849),a=n(86727),o=n(44194),l=n(10479),r=n(59673),c=n(47245),s=n(24393),u=function(e){var t=e["data-componentid"],n=(0,c.v9)((function(e){var t;return null==e||null===(t=e.config)||void 0===t||null===(t=t.deployment)||void 0===t||null===(t=t.accountApp)||void 0===t?void 0:t.tenantQualifiedPath})),u=(0,l.$)().t;return o.createElement(a.pJ,{padded:"very"},o.createElement("div",{"data-componentid":t,className:"form-container"},o.createElement(a.X6,{"data-componentid":t,bold:!0,as:"h4"},u("applications:myaccount.overview.heading")),o.createElement(a.xv,null,u("applications:myaccount.overview.contentIntro"),o.createElement(a.eb,{link:"develop.applications.myaccount.overview.learnMore",isLinkRef:!0},o.createElement(r.c,{i18nKey:"extensions:common.learnMore"},"Learn More"))),o.createElement(a.xv,null,o.createElement(r.c,{i18nKey:"applications:myaccount.overview.contentDescription"},"You can configure the login flow of the My Account, apply custom",o.createElement(a.rU,{external:!1,onClick:function(){s.m8.push(s.$x.getPaths().get("BRANDING"))}}," Branding configurations"),"and share access to it with B2B organizations.")),o.createElement(i.Z,{container:!0,alignItems:"center"},o.createElement(i.Z,{xs:6},o.createElement(a.X6,{as:"h6",compact:!0},u("applications:myaccount.overview.shareApplication"))),o.createElement(a.GI,{trigger:o.createElement(i.Z,{xs:6,className:"pr-0"},o.createElement(a.OR,{value:n,"data-componentid":"application-consumer-account-link-copy-field"})),content:u("applications:myaccount.popup"),position:"top center",size:"mini",hideOnScroll:!0,inverted:!0}))))};u.defaultProps={"data-componentid":"my-account-overview"}},93474:(e,t,n)=>{n.d(t,{d:()=>E,x:()=>b});var i,a=n(34148),o=n(67442),l=n(93129),r=n(58097),c=n(73508),s=n(22732);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f(i.key),i)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var v=p((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}));i=v,m(v,"WS_FEDERATION_CONFIG_FETCH_ERROR_CODE","WFC-00001"),m(v,"WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE","WFC-00002"),m(v,"WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE","WFC-00003"),m(v,"ErrorMessages",{WS_FEDERATION_CONFIG_FETCH_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_FETCH_ERROR_CODE,"An error occurred while fetching the WS Federation configurations.","Error while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE,"Received an invalid status code while fetching the WS Federation configurations.","Invalid Status Code while fetching the WS Federation configurations",null),WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE:new s.O(i.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE,"An error occurred while updating the WS Federation configurations.","Error while updating the WS Federation configurations",null)});var g=a.AsgardeoSPAClient.getInstance().httpRequest.bind(a.AsgardeoSPAClient.getInstance()),b=function(){var e={headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.GET,url:r.De.getServiceResourceEndpoints().passiveStsConfigurations},t=(0,c.Z)(e),n=t.data,i=t.error;return{data:n,error:i,isLoading:!i&&!n,isValidating:t.isValidating,mutate:t.mutate}},E=function(e){var t={data:e,headers:{Accept:"application/json","Content-Type":"application/json"},method:l.f2.PATCH,url:r.De.getServiceResourceEndpoints().passiveStsConfigurations};return g(t).then((function(e){if(200!==e.status&&201!==e.status)throw new o.u(v.ErrorMessages.WS_FEDERATION_CONFIG_FETCH_INVALID_STATUS_CODE_ERROR_CODE.getErrorMessage(),null,e.status,e.request,e,e.config);return Promise.resolve(e.data)})).catch((function(e){var t,n=v.ErrorMessages.WS_FEDERATION_CONFIG_UPDATE_ERROR_CODE.getErrorMessage();throw new o.u(n,e.stack,null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.code,e.request,e.response,e.config)}))}}}]);